{"ast":null,"code":"import { DataDiffA3ColumnDataItemModel } from './data-diff-a3-model';\nimport { WidgetComponentBase } from 'src/app/utility/widget/widget-utility/widget-component-base';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/server-api-interface-service.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"ngx-spinner\";\nimport * as i4 from \"src/app/services/validation.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/table\";\nimport * as i7 from \"primeng/api\";\nimport * as i8 from \"ngx-text-diff\";\n\nfunction DataDiffA3Component_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelementStart(2, \"div\", 7);\n    i0.ɵɵelement(3, \"ul\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DataDiffA3Component_p_table_4_ng_template_1_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r10 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", col_r10.name, \" \");\n  }\n}\n\nfunction DataDiffA3Component_p_table_4_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, DataDiffA3Component_p_table_4_ng_template_1_th_1_Template, 2, 1, \"th\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const columns_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", columns_r8);\n  }\n}\n\nfunction DataDiffA3Component_p_table_4_ng_template_2_td_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelement(1, \"td-ngx-text-diff\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const j_r16 = i0.ɵɵnextContext().index;\n    const ctx_r20 = i0.ɵɵnextContext();\n    const i_r13 = ctx_r20.rowIndex;\n    const rowData_r11 = ctx_r20.$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"left\", ctx_r17.getRowValue(ctx_r17.dataModel.dataSource2[i_r13], j_r16))(\"right\", ctx_r17.getRowValue(rowData_r11, j_r16))(\"format\", ctx_r17.dataModel.format)(\"showToolbar\", false)(\"showBtnToolbar\", false);\n  }\n}\n\nfunction DataDiffA3Component_p_table_4_ng_template_2_td_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const j_r16 = i0.ɵɵnextContext().index;\n    const rowData_r11 = i0.ɵɵnextContext().$implicit;\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r19.getRowValue(rowData_r11, j_r16), \" \");\n  }\n}\n\nfunction DataDiffA3Component_p_table_4_ng_template_2_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 12);\n    i0.ɵɵtemplate(1, DataDiffA3Component_p_table_4_ng_template_2_td_1_div_1_Template, 2, 5, \"div\", 14);\n    i0.ɵɵtemplate(2, DataDiffA3Component_p_table_4_ng_template_2_td_1_ng_template_2_Template, 1, 1, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const col_r15 = ctx.$implicit;\n\n    const _r18 = i0.ɵɵreference(3);\n\n    const ctx_r24 = i0.ɵɵnextContext();\n    const rowData_r11 = ctx_r24.$implicit;\n    const i_r13 = ctx_r24.rowIndex;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r14.compareData(rowData_r11, ctx_r14.dataModel.dataSource2[i_r13], col_r15[i_r13].field))(\"ngIfElse\", _r18);\n  }\n}\n\nfunction DataDiffA3Component_p_table_4_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 13);\n    i0.ɵɵtemplate(1, DataDiffA3Component_p_table_4_ng_template_2_td_1_Template, 4, 2, \"td\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.displayedColumns);\n  }\n}\n\nconst _c0 = function () {\n  return {\n    width: \"100%\"\n  };\n};\n\nfunction DataDiffA3Component_p_table_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-table\", 8);\n    i0.ɵɵtemplate(1, DataDiffA3Component_p_table_4_ng_template_1_Template, 2, 1, \"ng-template\", 9);\n    i0.ɵɵtemplate(2, DataDiffA3Component_p_table_4_ng_template_2_Template, 2, 1, \"ng-template\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵstyleMap(i0.ɵɵpureFunction0(10, _c0));\n    i0.ɵɵproperty(\"columns\", ctx_r1.displayedColumns)(\"value\", ctx_r1.dataModel.dataSource1)(\"scrollable\", true)(\"rows\", 10)(\"virtualRowHeight\", 85)(\"loading\", ctx_r1.isLoading)(\"virtualScroll\", true)(\"resizableColumns\", true);\n  }\n}\n\nfunction DataDiffA3Component_ng_template_5_table_0_tr_2_td_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵelement(1, \"td-ngx-text-diff\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r36 = i0.ɵɵnextContext();\n    const i_r32 = ctx_r36.index;\n    const row_r31 = ctx_r36.$implicit;\n    const x_r29 = i0.ɵɵnextContext().index;\n    const ctx_r33 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"left\", ctx_r33.getRowValue(ctx_r33.dataModel.dataSource2[i_r32], row_r31[x_r29].headername))(\"right\", ctx_r33.getRowValue(row_r31, row_r31[x_r29].headername))(\"format\", ctx_r33.dataModel.format)(\"showToolbar\", false)(\"showBtnToolbar\", false);\n  }\n}\n\nfunction DataDiffA3Component_ng_template_5_table_0_tr_2_td_3_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r38 = i0.ɵɵnextContext();\n    const row_r31 = ctx_r38.$implicit;\n    const i_r32 = ctx_r38.index;\n    const ctx_r35 = i0.ɵɵnextContext(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r35.getRowValue(row_r31, row_r31[i_r32].headername), \" \");\n  }\n}\n\nfunction DataDiffA3Component_ng_template_5_table_0_tr_2_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtemplate(1, DataDiffA3Component_ng_template_5_table_0_tr_2_td_3_div_1_Template, 2, 5, \"div\", 14);\n    i0.ɵɵtemplate(2, DataDiffA3Component_ng_template_5_table_0_tr_2_td_3_ng_template_2_Template, 1, 1, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r31 = ctx.$implicit;\n    const i_r32 = ctx.index;\n\n    const _r34 = i0.ɵɵreference(3);\n\n    const ctx_r30 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r30.compareData(row_r31, ctx_r30.dataModel.dataSource2[i_r32], row_r31[i_r32].headername))(\"ngIfElse\", _r34);\n  }\n}\n\nfunction DataDiffA3Component_ng_template_5_table_0_tr_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"th\", 21);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, DataDiffA3Component_ng_template_5_table_0_tr_2_td_3_Template, 4, 2, \"td\", 20);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r28 = ctx.$implicit;\n    const ctx_r27 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r28.headername, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r27.dataModel.dataSource1);\n  }\n}\n\nfunction DataDiffA3Component_ng_template_5_table_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 19);\n    i0.ɵɵelementStart(1, \"tbody\");\n    i0.ɵɵtemplate(2, DataDiffA3Component_ng_template_5_table_0_tr_2_Template, 4, 2, \"tr\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r26.dataModel.dataSource1[0]);\n  }\n}\n\nfunction DataDiffA3Component_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, DataDiffA3Component_ng_template_5_table_0_Template, 3, 1, \"table\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n\n    const _r4 = i0.ɵɵreference(8);\n\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.dataModel.dataSource1 && ctx_r3.dataModel.dataSource1.length > 0 && ctx_r3.dataModel.dataSource2 && ctx_r3.dataModel.dataSource2.length > 0 && ctx_r3.dataModel.isTranspose)(\"ngIfElse\", _r4);\n  }\n}\n\nfunction DataDiffA3Component_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Data not available \");\n    i0.ɵɵelementEnd();\n  }\n} //import { WidgetConstants } from 'src/app/modules/widgets/widget-constants';\n\n\nexport let DataDiffA3Component = /*#__PURE__*/(() => {\n  class DataDiffA3Component extends WidgetComponentBase {\n    constructor(_serverApi, _toastnotificationservice, _changeDetectorRef, _spinner, _validationService) {\n      super(_serverApi, _validationService);\n      this._serverApi = _serverApi;\n      this._toastnotificationservice = _toastnotificationservice;\n      this._changeDetectorRef = _changeDetectorRef;\n      this._spinner = _spinner;\n      this._validationService = _validationService;\n      this.displayedColumns = [];\n      this.isLoading = false;\n    }\n\n    ngOnInit() {\n      // this.configModel.CallerToComp.addListener(WidgetConstants.CALLER_TO_COMP_REFRESH_DATA, () => {\n      //   this.RefreshData();\n      // });\n      // this.dataModel.dataSource1 = [];\n      // this.dataModel.dataSource2 = [];\n      // this.setData();\n      this.wgOnInit();\n    }\n\n    setFieldData() {}\n\n    getControlData() {\n      let alterationApplicationId = this.dataModel.globalParameters.get(\"alterationApplicationId\");\n      console.log('alterationApplicationId', alterationApplicationId);\n      return this.wgAPIMethodGet(`/api/v1/applications/${alterationApplicationId}/compare-alterations`);\n    }\n\n    convertData(response) {\n      console.log(\"response data diff\", response);\n      let displayedColumns = [];\n      let dataSurce1Object = [];\n      let dataSurce2Object = [];\n\n      if (response && response.length > 0) {\n        response.forEach(field => {\n          let colData = new DataDiffA3ColumnDataItemModel();\n          colData.field = field.field_name;\n          colData.name = field.field_name;\n          displayedColumns.push(colData);\n          dataSurce1Object.push({\n            headername: field.field_name,\n            isupdatesuccess: true,\n            value: field.changed_value\n          });\n          dataSurce2Object.push({\n            headername: field.field_name,\n            isupdatesuccess: true,\n            value: field.original_value\n          });\n        });\n      }\n\n      return [displayedColumns, dataSurce1Object, dataSurce2Object];\n    }\n\n    setMode(responseDataModel) {}\n\n    setValue(responseDataModel) {\n      this.displayedColumns = [];\n      this.dataModel.dataSource1 = [];\n      this.dataModel.dataSource2 = [];\n      this.displayedColumns = responseDataModel[0];\n      this.dataModel.dataSource1.push(responseDataModel[1]);\n      this.dataModel.dataSource2.push(responseDataModel[2]);\n\n      this._changeDetectorRef.detectChanges();\n    }\n\n    getRowValue(rowdata, colname) {\n      switch (this.dataModel.bindingStrategy) {\n        case 1:\n          return rowdata.filter(item => item.headername === colname)[0].value;\n\n        default:\n          return rowdata.filter(item => item.headername === colname)[0];\n      }\n    }\n\n    compareData(data1, data3, colname) {\n      var _a, _b;\n\n      let value1;\n      let value2;\n\n      switch (this.dataModel.bindingStrategy) {\n        case 1:\n          value1 = (_a = data1.filter(item => item.headername === colname)[0]) === null || _a === void 0 ? void 0 : _a.value;\n          value2 = (_b = data3.filter(item => item.headername === colname)[0]) === null || _b === void 0 ? void 0 : _b.value;\n          break;\n\n        default:\n          value1 = true;\n          value2 = true;\n          break;\n      }\n\n      if (value1 == value2) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    onClick(data, actionName) {\n      let eventDataObj = Object();\n      eventDataObj.eventData = data;\n      let action = actionName;\n\n      if (this.configModel.EventAction.has(action)) {\n        this.configModel.CompToCaller.emit(action, eventDataObj);\n      }\n    }\n\n    ngOnDestroy() {}\n\n  }\n\n  DataDiffA3Component.ɵfac = function DataDiffA3Component_Factory(t) {\n    return new (t || DataDiffA3Component)(i0.ɵɵdirectiveInject(i1.ServerApiInterfaceServiceService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i3.NgxSpinnerService), i0.ɵɵdirectiveInject(i4.ValidationService));\n  };\n\n  DataDiffA3Component.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DataDiffA3Component,\n    selectors: [[\"app-data-diff-a3\"]],\n    inputs: {\n      dataModel: \"dataModel\",\n      configModel: \"configModel\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 9,\n    vars: 3,\n    consts: [[1, \"diff-data-container\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [\"scrollHeight\", \"270px\", 3, \"columns\", \"value\", \"scrollable\", \"rows\", \"virtualRowHeight\", \"loading\", \"virtualScroll\", \"resizableColumns\", \"style\", 4, \"ngIf\", \"ngIfElse\"], [\"transpose\", \"\"], [\"nodata\", \"\"], [1, \"col\"], [1, \"float-right\", \"mb-4\"], [\"scrollHeight\", \"270px\", 3, \"columns\", \"value\", \"scrollable\", \"rows\", \"virtualRowHeight\", \"loading\", \"virtualScroll\", \"resizableColumns\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"style\", \"width: 200px; text-align: center;\", 4, \"ngFor\", \"ngForOf\"], [2, \"width\", \"200px\", \"text-align\", \"center\"], [2, \"height\", \"30px\"], [\"class\", \"text-diff-row\", 4, \"ngIf\", \"ngIfElse\"], [\"equal\", \"\"], [1, \"text-diff-row\"], [3, \"left\", \"right\", \"format\", \"showToolbar\", \"showBtnToolbar\"], [\"class\", \" table\\n            table-borderless text-center\", 4, \"ngIf\", \"ngIfElse\"], [1, \"table\", \"table-borderless\", \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [2, \"border-right\", \"1px solid\"]],\n    template: function DataDiffA3Component_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, DataDiffA3Component_div_1_Template, 4, 0, \"div\", 1);\n        i0.ɵɵelement(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵtemplate(4, DataDiffA3Component_p_table_4_Template, 3, 11, \"p-table\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, DataDiffA3Component_ng_template_5_Template, 1, 2, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(7, DataDiffA3Component_ng_template_7_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(6);\n\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dataModel.dataSource1 && ctx.dataModel.dataSource1.length > 0 && ctx.dataModel.dataSource2 && ctx.dataModel.dataSource2.length > 0);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.dataModel.dataSource1 && ctx.dataModel.dataSource1.length > 0 && ctx.dataModel.dataSource2 && ctx.dataModel.dataSource2.length > 0 && !ctx.dataModel.isTranspose)(\"ngIfElse\", _r2);\n      }\n    },\n    directives: [i5.NgIf, i6.Table, i7.PrimeTemplate, i5.NgForOf, i8.NgxTextDiffComponent],\n    styles: [\"ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-right:25px;list-style:none}.rlegend[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin-right:10px;background-color:#fae8e9}.glegend[_ngcontent-%COMP%]{float:left;width:20px;height:20px;margin-right:10px;background-color:#acf2bd}th[_ngcontent-%COMP%]{width:40%}p-table[_ngcontent-%COMP%]{padding-right:15px!important}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid;background-color:#f3f2fd}.diff-data-container[_ngcontent-%COMP%]{padding:20px}.text-diff-row[_ngcontent-%COMP%]{max-width:900px}\"]\n  });\n  return DataDiffA3Component;\n})();","map":null,"metadata":{},"sourceType":"module"}