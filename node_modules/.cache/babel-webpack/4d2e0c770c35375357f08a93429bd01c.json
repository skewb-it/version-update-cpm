{"ast":null,"code":"import { WidgetComponentBase } from 'src/app/utility/widget/widget-utility/widget-component-base';\nimport { Validators } from '@angular/forms';\nimport { MASTER_DATA_DOMAIN } from 'src/app/constants/app-repo.constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/server-api-interface-service.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"src/app/services/validation.service\";\nimport * as i4 from \"src/app/services/app-repo-helper.service\";\nimport * as i5 from \"@angular/flex-layout/flex\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/select\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/button\";\nimport * as i12 from \"@angular/material/core\";\n\nfunction CancelPermitConfirmationComponent_form_8_mat_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const cancellationReason_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", cancellationReason_r2.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cancellationReason_r2.displayText, \"\");\n  }\n}\n\nfunction CancelPermitConfirmationComponent_form_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 7);\n    i0.ɵɵelementStart(1, \"p\", 8);\n    i0.ɵɵtext(2, \"Are you sure you want to cancel? If you cancel, you wont be able to reverse this action!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-form-field\", 9);\n    i0.ɵɵelementStart(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Cancellation Reason\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-select\", 10);\n    i0.ɵɵtemplate(7, CancelPermitConfirmationComponent_form_8_mat_option_7_Template, 2, 2, \"mat-option\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"mat-error\");\n    i0.ɵɵtext(9, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"mat-form-field\", 9);\n    i0.ɵɵelementStart(11, \"mat-label\");\n    i0.ɵɵtext(12, \"Comment\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"textarea\", 12);\n    i0.ɵɵelementStart(14, \"mat-error\");\n    i0.ɵɵtext(15, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 13);\n    i0.ɵɵelementStart(17, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function CancelPermitConfirmationComponent_form_8_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.onActionBtnClick(false);\n    });\n    i0.ɵɵtext(18, \"No\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function CancelPermitConfirmationComponent_form_8_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onActionBtnClick(true);\n    });\n    i0.ɵɵtext(20, \"Yes, Cancel It!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.wgFormGroup);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrCancellationReason);\n  }\n}\n\nexport let CancelPermitConfirmationComponent = /*#__PURE__*/(() => {\n  class CancelPermitConfirmationComponent extends WidgetComponentBase {\n    constructor(_serverApiBase, fb, _validationService, _appRepoHelperService) {\n      super(_serverApiBase, _validationService);\n      this._serverApiBase = _serverApiBase;\n      this.fb = fb;\n      this._validationService = _validationService;\n      this._appRepoHelperService = _appRepoHelperService;\n      this.arrCancellationReason = [];\n    }\n\n    ngOnInit() {\n      this.createFormGroup();\n      this.wgOnInit();\n    }\n\n    createFormGroup() {\n      this.wgFormGroup = this.fb.group({\n        'cancellationReason': ['', [Validators.required]],\n        'comment': ['', [Validators.required]]\n      });\n    }\n\n    setFieldData() {\n      this.arrCancellationReason = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.CANCELLATION_REASON.toString());\n    }\n\n    getControlData() {}\n\n    convertData(response) {}\n\n    setMode(responseDataModel) {}\n\n    setValue(responseDataModel) {}\n\n    onActionBtnClick(action) {\n      if (action) {\n        this.wgFormGroup.markAllAsTouched;\n\n        if (this.wgFormGroup.valid) {\n          this.dataModel.data.cancellation_reason = this.wgFormGroup.controls.cancellationReason.value;\n          this.dataModel.data.comments = this.wgFormGroup.controls.comment.value;\n          this.wgAPIMethodPut(this.dataModel.apiDataUrl, this.dataModel.data).then(resp => {\n            this.emitEvent('onCancelPermitActionBtnClick', true);\n          });\n        }\n      } else {\n        this.emitEvent('onCancelPermitActionBtnClick', false);\n      }\n    }\n\n  }\n\n  CancelPermitConfirmationComponent.ɵfac = function CancelPermitConfirmationComponent_Factory(t) {\n    return new (t || CancelPermitConfirmationComponent)(i0.ɵɵdirectiveInject(i1.ServerApiInterfaceServiceService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.ValidationService), i0.ɵɵdirectiveInject(i4.AppRepoHelperService));\n  };\n\n  CancelPermitConfirmationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CancelPermitConfirmationComponent,\n    selectors: [[\"app-cancel-permit-confirmation\"]],\n    inputs: {\n      dataModel: \"dataModel\",\n      configModel: \"configModel\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 9,\n    vars: 1,\n    consts: [[\"fxLayout\", \"column\", 1, \"cancel-alert-container\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", 1, \"cancel-dialog-row1\"], [\"fxLayout\", \"column\", \"fxLayoutAlign\", \"center center\"], [1, \"ic-cancel\"], [1, \"cancel-heading\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", 1, \"cancel-dialog-row2\"], [\"fxLayout\", \"column\", 3, \"formGroup\", 4, \"ngIf\"], [\"fxLayout\", \"column\", 3, \"formGroup\"], [1, \"cancel-dialog-msg\"], [\"appearance\", \"outline\"], [\"required\", \"\", \"formControlName\", \"cancellationReason\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"matInput\", \"\", \"required\", \"\", \"formControlName\", \"comment\", \"placeholder\", \"Enter comment\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"20px\", \"fxLayoutAlign\", \"center center\"], [\"color\", \"primary\", \"mat-stroked-button\", \"\", \"cdkFocusInitial\", \"\", 1, \"btn-action\", 3, \"click\"], [\"color\", \"primary\", \"mat-raised-button\", \"\", 1, \"primary-button\", \"btn-action\", 3, \"click\"], [3, \"value\"]],\n    template: function CancelPermitConfirmationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"mat-icon\", 3);\n        i0.ɵɵtext(4, \"delete_forever\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"h3\", 4);\n        i0.ɵɵtext(6, \"Do you wish to cancel the permit?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵtemplate(8, CancelPermitConfirmationComponent_form_8_Template, 21, 2, \"form\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.wgFormGroup);\n      }\n    },\n    directives: [i5.DefaultLayoutDirective, i5.DefaultLayoutAlignDirective, i6.MatIcon, i7.NgIf, i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i8.MatFormField, i8.MatLabel, i9.MatSelect, i2.RequiredValidator, i2.NgControlStatus, i2.FormControlName, i7.NgForOf, i8.MatError, i10.MatInput, i2.DefaultValueAccessor, i5.DefaultLayoutGapDirective, i11.MatButton, i12.MatOption],\n    styles: [\".cancel-alert-container[_ngcontent-%COMP%]{height:100%}.cancel-negative-btn[_ngcontent-%COMP%]{width:130px}.cancel-positive-btn[_ngcontent-%COMP%]{width:130px}.cancel-dialog-msg[_ngcontent-%COMP%]{text-align:center;max-width:350px;font-size:13px;margin-bottom:20px}.ic-cancel[_ngcontent-%COMP%]{background-color:var(--cancel-dialog-color-light-red);padding:30px;border-radius:50%;color:var(--cancel-dialog-color-red);display:flex;justify-content:center;align-items:center}.cancel-heading[_ngcontent-%COMP%]{color:var(--cancel-dialog-color-red);font-weight:bold!important}.cancel-dialog-row1[_ngcontent-%COMP%]{border-bottom:1px solid var(--cancel-dialog-color-border);padding-bottom:20px;margin-bottom:20px}.btn-action[_ngcontent-%COMP%]{min-width:120px}\"]\n  });\n  return CancelPermitConfirmationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}