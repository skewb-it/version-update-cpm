{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Days, PermitConfigModel } from './permit.model';\nimport { Validators } from '@angular/forms';\nimport { GLOBAL_PARAM_KEY } from 'src/app/app-constants';\nimport { MASTER_DATA_DOMAIN, WORK_TYPE } from 'src/app/constants/db.constants';\nimport { TEXT_TYPE, WORK_CATEGORY_KEY_VALUE_CONSTANTS } from 'src/app/constants/app-repo.constants';\nimport { FormModeConstant } from 'src/app/constants/widget-constants';\nimport { UniqueSelectionDispatcher } from '@angular/cdk/collections';\nimport { WidgetComponentBase } from 'src/app/utility/widget/widget-utility/widget-component-base';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/server-api-interface-service.service\";\nimport * as i2 from \"src/app/services/app-repo-helper.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"src/app/services/validation.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"src/app/directive/invalid-control-scroll/invalid-control-scroll.directive\";\nimport * as i8 from \"@angular/flex-layout/flex\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/material/input\";\nimport * as i11 from \"@angular/material/select\";\nimport * as i12 from \"@angular/material/radio\";\nimport * as i13 from \"@angular-material-components/datetime-picker\";\nimport * as i14 from \"@angular/material/datepicker\";\nimport * as i15 from \"@angular/material/checkbox\";\nimport * as i16 from \"@angular/material/core\";\nconst _c0 = [\"startDatePicker\"];\nconst _c1 = [\"endDatePicker\"];\nconst _c2 = [\"formComponent\"];\n\nfunction CreatePermitFormComponent_form_1_ng_container_27_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Should start with MUA \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_ng_container_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CreatePermitFormComponent_form_1_ng_container_27_div_1_Template, 2, 0, \"div\", 71);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.wgFC.projectReferenceNumber.errors.pattern);\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const organizations_r21 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", organizations_r21.orgId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", organizations_r21.name, \" \");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ws_r22 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", ws_r22.workstreamId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ws_r22.description, \" \");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_div_43_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r24 = i0.ɵɵnextContext().$implicit;\n    const ctx_r25 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r25.wgFormGroup.errors[item_r24.key].errorMessage, \" \");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_div_43_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CreatePermitFormComponent_form_1_div_43_ng_container_1_div_1_Template, 2, 1, \"div\", 71);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r24 = ctx.$implicit;\n    const ctx_r23 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r23.wgFormGroup.errors[item_r24.key].errorMessage);\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 73);\n    i0.ɵɵtemplate(1, CreatePermitFormComponent_form_1_div_43_ng_container_1_Template, 2, 1, \"ng-container\", 9);\n    i0.ɵɵpipe(2, \"keyvalue\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(2, 1, ctx_r5.wgFormGroup.errors));\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_48_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const contractor_r27 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", contractor_r27.contractor_id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", contractor_r27.contractor_name, \" \");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_form_field_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 11);\n    i0.ɵɵelementStart(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Cost \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 74);\n    i0.ɵɵelementStart(4, \"mat-error\");\n    i0.ɵɵtext(5, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const workType_r28 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", workType_r28.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", workType_r28.displayText, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_79_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const workIdentifier_r29 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", workIdentifier_r29.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", workIdentifier_r29.description, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_117_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const activityType_r30 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", activityType_r30.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", activityType_r30.displayText, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_141_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const collaborativeType_r31 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", collaborativeType_r31.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", collaborativeType_r31.displayText, \" \");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_172_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const highWayAuthority_r32 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", highWayAuthority_r32.authorityId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", highWayAuthority_r32.name, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_193_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const roadCategory_r33 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", roadCategory_r33.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", roadCategory_r33.displayText, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_198_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const closeFootway_r34 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", closeFootway_r34.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", closeFootway_r34.displayText, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_206_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const trafficManagementType_r35 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", trafficManagementType_r35.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", trafficManagementType_r35.displayText, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_mat_option_213_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const LocationType_r36 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", LocationType_r36.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", LocationType_r36.displayText, \"\");\n  }\n}\n\nfunction CreatePermitFormComponent_form_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 1, 2);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵelementStart(3, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(4, \"mat-label\");\n    i0.ɵɵtext(5, \"Promoter Prefix * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 5);\n    i0.ɵɵelementStart(7, \"mat-error\");\n    i0.ɵɵtext(8, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(10, \"mat-label\");\n    i0.ɵɵtext(11, \"Permit Reference \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 6);\n    i0.ɵɵelementStart(13, \"mat-error\");\n    i0.ɵɵtext(14, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(16, \"mat-label\");\n    i0.ɵɵtext(17, \"Works Reference Number \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 7);\n    i0.ɵɵelementStart(19, \"mat-error\");\n    i0.ɵɵtext(20, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(22, \"mat-label\");\n    i0.ɵɵtext(23, \"Project Reference Number \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(24, \"input\", 8);\n    i0.ɵɵelementStart(25, \"mat-error\");\n    i0.ɵɵtext(26, \" Field must be valid \");\n    i0.ɵɵtemplate(27, CreatePermitFormComponent_form_1_ng_container_27_Template, 2, 1, \"ng-container\", 9);\n    i0.ɵɵpipe(28, \"keyvalue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"div\", 10);\n    i0.ɵɵelementStart(30, \"mat-form-field\", 11);\n    i0.ɵɵelementStart(31, \"mat-label\");\n    i0.ɵɵtext(32, \"Promoter Organisation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"mat-select\", 12);\n    i0.ɵɵlistener(\"selectionChange\", function CreatePermitFormComponent_form_1_Template_mat_select_selectionChange_33_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return ctx_r37.onOrgSelectionChange();\n    });\n    i0.ɵɵtemplate(34, CreatePermitFormComponent_form_1_mat_option_34_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"mat-form-field\", 11);\n    i0.ɵɵelementStart(36, \"mat-label\");\n    i0.ɵɵtext(37, \"Workstream\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"mat-select\", 14);\n    i0.ɵɵlistener(\"selectionChange\", function CreatePermitFormComponent_form_1_Template_mat_select_selectionChange_38_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return ctx_r39.onWorkStreamSelectionChange();\n    });\n    i0.ɵɵtemplate(39, CreatePermitFormComponent_form_1_mat_option_39_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(40, \"mat-error\");\n    i0.ɵɵtext(41, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(42, \"div\", 15);\n    i0.ɵɵtemplate(43, CreatePermitFormComponent_form_1_div_43_Template, 3, 3, \"div\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"mat-form-field\", 11);\n    i0.ɵɵelementStart(45, \"mat-label\");\n    i0.ɵɵtext(46, \"Contractor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"mat-select\", 17);\n    i0.ɵɵtemplate(48, CreatePermitFormComponent_form_1_mat_option_48_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"mat-error\");\n    i0.ɵɵtext(50, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(51, CreatePermitFormComponent_form_1_mat_form_field_51_Template, 6, 0, \"mat-form-field\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"div\", 3);\n    i0.ɵɵelementStart(53, \"mat-form-field\", 19);\n    i0.ɵɵelementStart(54, \"mat-label\");\n    i0.ɵɵtext(55, \"Contact Name \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(56, \"input\", 20);\n    i0.ɵɵelementStart(57, \"mat-error\");\n    i0.ɵɵtext(58, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"mat-form-field\", 19);\n    i0.ɵɵelementStart(60, \"mat-label\");\n    i0.ɵɵtext(61, \"Contact Number \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(62, \"input\", 21);\n    i0.ɵɵelementStart(63, \"mat-error\");\n    i0.ɵɵtext(64, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(65, \"mat-form-field\", 19);\n    i0.ɵɵelementStart(66, \"mat-label\");\n    i0.ɵɵtext(67, \"Works Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(68, \"mat-select\", 22);\n    i0.ɵɵlistener(\"selectionChange\", function CreatePermitFormComponent_form_1_Template_mat_select_selectionChange_68_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r40 = i0.ɵɵnextContext();\n      return ctx_r40.onChangeWorktype($event);\n    });\n    i0.ɵɵtemplate(69, CreatePermitFormComponent_form_1_mat_option_69_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(70, \"mat-error\");\n    i0.ɵɵtext(71, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(72, \"div\", 3);\n    i0.ɵɵelementStart(73, \"div\", 23);\n    i0.ɵɵelementStart(74, \"mat-radio-button\", 24);\n    i0.ɵɵlistener(\"change\", function CreatePermitFormComponent_form_1_Template_mat_radio_button_change_74_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r41 = i0.ɵɵnextContext();\n      return ctx_r41.workDescriptionRadioChange($event.value);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(75, \"mat-form-field\", 25);\n    i0.ɵɵelementStart(76, \"mat-label\");\n    i0.ɵɵtext(77, \"Works Description \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(78, \"mat-select\", 26);\n    i0.ɵɵtemplate(79, CreatePermitFormComponent_form_1_mat_option_79_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(80, \"mat-error\");\n    i0.ɵɵtext(81, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(82, \"div\", 23);\n    i0.ɵɵelementStart(83, \"mat-radio-button\", 24);\n    i0.ɵɵlistener(\"change\", function CreatePermitFormComponent_form_1_Template_mat_radio_button_change_83_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r42 = i0.ɵɵnextContext();\n      return ctx_r42.workDescriptionRadioChange($event.value);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(84, \"mat-form-field\", 25);\n    i0.ɵɵelementStart(85, \"mat-label\");\n    i0.ɵɵtext(86, \"Works Description \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(87, \"textarea\", 27);\n    i0.ɵɵelementStart(88, \"mat-error\");\n    i0.ɵɵtext(89, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(90, \"div\", 3);\n    i0.ɵɵelementStart(91, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(92, \"mat-label\");\n    i0.ɵɵtext(93, \"Proposed Start Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(94, \"input\", 28);\n    i0.ɵɵlistener(\"click\", function CreatePermitFormComponent_form_1_Template_input_click_94_listener() {\n      i0.ɵɵrestoreView(_r38);\n\n      const _r10 = i0.ɵɵreference(97);\n\n      return _r10.open();\n    })(\"dateChange\", function CreatePermitFormComponent_form_1_Template_input_dateChange_94_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r44 = i0.ɵɵnextContext();\n      return ctx_r44.onStartDateChange($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(95, \"mat-datepicker-toggle\", 29);\n    i0.ɵɵelement(96, \"ngx-mat-datetime-picker\", 30, 31);\n    i0.ɵɵelementStart(98, \"mat-error\");\n    i0.ɵɵtext(99, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(100, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(101, \"mat-label\");\n    i0.ɵɵtext(102, \"Proposed End Date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(103, \"input\", 28);\n    i0.ɵɵlistener(\"click\", function CreatePermitFormComponent_form_1_Template_input_click_103_listener() {\n      i0.ɵɵrestoreView(_r38);\n\n      const _r11 = i0.ɵɵreference(106);\n\n      return _r11.open();\n    })(\"dateChange\", function CreatePermitFormComponent_form_1_Template_input_dateChange_103_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r46 = i0.ɵɵnextContext();\n      return ctx_r46.onEndDateChange($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(104, \"mat-datepicker-toggle\", 29);\n    i0.ɵɵelement(105, \"ngx-mat-datetime-picker\", 30, 32);\n    i0.ɵɵelementStart(107, \"mat-error\");\n    i0.ɵɵtext(108, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(109, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(110, \"mat-label\");\n    i0.ɵɵtext(111, \"Working Days\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(112, \"input\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(113, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(114, \"mat-label\");\n    i0.ɵɵtext(115, \"Activity Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(116, \"mat-select\", 34);\n    i0.ɵɵtemplate(117, CreatePermitFormComponent_form_1_mat_option_117_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(118, \"mat-error\");\n    i0.ɵɵtext(119, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(120, \"div\", 3);\n    i0.ɵɵelementStart(121, \"div\", 35);\n    i0.ɵɵelementStart(122, \"mat-checkbox\", 36);\n    i0.ɵɵlistener(\"change\", function CreatePermitFormComponent_form_1_Template_mat_checkbox_change_122_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r47 = i0.ɵɵnextContext();\n      return ctx_r47.onCollabroativeChkBoxChange($event);\n    });\n    i0.ɵɵtext(123, \"Collaborative Working\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(124, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(125, \"mat-label\");\n    i0.ɵɵtext(126, \"Collaborative Details \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(127, \"input\", 37);\n    i0.ɵɵelementStart(128, \"mat-error\");\n    i0.ɵɵtext(129, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(130, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(131, \"mat-label\");\n    i0.ɵɵtext(132, \"Collaborative Work \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(133, \"input\", 38);\n    i0.ɵɵelementStart(134, \"mat-error\");\n    i0.ɵɵtext(135, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(136, \"mat-form-field\", 4);\n    i0.ɵɵelementStart(137, \"mat-label\");\n    i0.ɵɵtext(138, \"Collaborative Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(139, \"mat-select\", 39);\n    i0.ɵɵelement(140, \"mat-option\");\n    i0.ɵɵtemplate(141, CreatePermitFormComponent_form_1_mat_option_141_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(142, \"mat-error\");\n    i0.ɵɵtext(143, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(144, \"hr\");\n    i0.ɵɵelementStart(145, \"div\", 40);\n    i0.ɵɵelementStart(146, \"div\", 41);\n    i0.ɵɵprojection(147);\n    i0.ɵɵelementStart(148, \"div\", 42);\n    i0.ɵɵelementStart(149, \"div\", 3);\n    i0.ɵɵelementStart(150, \"div\", 43);\n    i0.ɵɵelementStart(151, \"mat-checkbox\", 44);\n    i0.ɵɵlistener(\"change\", function CreatePermitFormComponent_form_1_Template_mat_checkbox_change_151_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r48 = i0.ɵɵnextContext();\n      return ctx_r48.onTrafficManagementPlanChkBoxChange($event);\n    });\n    i0.ɵɵtext(152, \"Are you submitting Traffic Management Plan? \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(153, \"div\", 45);\n    i0.ɵɵelementStart(154, \"div\", 3);\n    i0.ɵɵelementStart(155, \"mat-form-field\", 46);\n    i0.ɵɵelementStart(156, \"mat-label\");\n    i0.ɵɵtext(157, \"Works Location Description \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(158, \"input\", 47);\n    i0.ɵɵelementStart(159, \"mat-error\");\n    i0.ɵɵtext(160, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(161, \"div\", 3);\n    i0.ɵɵelementStart(162, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(163, \"mat-label\");\n    i0.ɵɵtext(164, \"Location details \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(165, \"input\", 49);\n    i0.ɵɵelementStart(166, \"mat-error\");\n    i0.ɵɵtext(167, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(168, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(169, \"mat-label\");\n    i0.ɵɵtext(170, \"Highway Authority\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(171, \"mat-select\", 50);\n    i0.ɵɵtemplate(172, CreatePermitFormComponent_form_1_mat_option_172_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(173, \"mat-error\");\n    i0.ɵɵtext(174, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(175, \"div\", 3);\n    i0.ɵɵelementStart(176, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(177, \"mat-label\");\n    i0.ɵɵtext(178, \"Post Code \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(179, \"input\", 51);\n    i0.ɵɵelementStart(180, \"mat-error\");\n    i0.ɵɵtext(181, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(182, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(183, \"mat-label\");\n    i0.ɵɵtext(184, \"USRN \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(185, \"input\", 52);\n    i0.ɵɵelementStart(186, \"mat-error\");\n    i0.ɵɵtext(187, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(188, \"div\", 3);\n    i0.ɵɵelementStart(189, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(190, \"mat-label\");\n    i0.ɵɵtext(191, \"Road Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(192, \"mat-select\", 53);\n    i0.ɵɵtemplate(193, CreatePermitFormComponent_form_1_mat_option_193_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(194, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(195, \"mat-label\");\n    i0.ɵɵtext(196, \"Footway Closure\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(197, \"mat-select\", 54);\n    i0.ɵɵtemplate(198, CreatePermitFormComponent_form_1_mat_option_198_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(199, \"mat-error\");\n    i0.ɵɵtext(200, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(201, \"div\", 3);\n    i0.ɵɵelementStart(202, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(203, \"mat-label\");\n    i0.ɵɵtext(204, \"Traffic Management Required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(205, \"mat-select\", 55);\n    i0.ɵɵtemplate(206, CreatePermitFormComponent_form_1_mat_option_206_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(207, \"mat-error\");\n    i0.ɵɵtext(208, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(209, \"mat-form-field\", 48);\n    i0.ɵɵelementStart(210, \"mat-label\");\n    i0.ɵɵtext(211, \"Location Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(212, \"mat-select\", 56);\n    i0.ɵɵtemplate(213, CreatePermitFormComponent_form_1_mat_option_213_Template, 2, 2, \"mat-option\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(214, \"mat-error\");\n    i0.ɵɵtext(215, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(216, \"div\", 3);\n    i0.ɵɵelementStart(217, \"div\", 43);\n    i0.ɵɵelementStart(218, \"mat-checkbox\", 57);\n    i0.ɵɵtext(219, \"Traffic Sensitive\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(220, \"div\", 3);\n    i0.ɵɵelementStart(221, \"div\", 43);\n    i0.ɵɵelementStart(222, \"mat-checkbox\", 58);\n    i0.ɵɵtext(223, \"Excavation Required\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(224, \"div\", 3);\n    i0.ɵɵelementStart(225, \"div\", 43);\n    i0.ɵɵelementStart(226, \"mat-checkbox\", 59);\n    i0.ɵɵtext(227, \"Is Lane Rental Applicable?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(228, \"div\", 3);\n    i0.ɵɵelementStart(229, \"div\", 60);\n    i0.ɵɵelementStart(230, \"mat-checkbox\", 61);\n    i0.ɵɵtext(231, \"Covid19\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(232, \"div\", 60);\n    i0.ɵɵelementStart(233, \"mat-checkbox\", 62);\n    i0.ɵɵtext(234, \"Environmental Health \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(235, \"div\", 3);\n    i0.ɵɵelementStart(236, \"div\", 63);\n    i0.ɵɵelementStart(237, \"mat-checkbox\", 64);\n    i0.ɵɵlistener(\"change\", function CreatePermitFormComponent_form_1_Template_mat_checkbox_change_237_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r49 = i0.ɵɵnextContext();\n      return ctx_r49.onTTROChkBoxChange($event);\n    });\n    i0.ɵɵtext(238, \"TTRO required \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(239, \"hr\");\n    i0.ɵɵelementStart(240, \"div\", 40);\n    i0.ɵɵelementStart(241, \"div\", 65);\n    i0.ɵɵelementStart(242, \"div\", 3);\n    i0.ɵɵelementStart(243, \"div\", 66);\n    i0.ɵɵelementStart(244, \"mat-checkbox\", 67);\n    i0.ɵɵlistener(\"change\", function CreatePermitFormComponent_form_1_Template_mat_checkbox_change_244_listener() {\n      i0.ɵɵrestoreView(_r38);\n      const ctx_r50 = i0.ɵɵnextContext();\n      return ctx_r50.onEarlyStartApprovalChkBoxChange();\n    });\n    i0.ɵɵtext(245, \" Do you have pre-approval for an early start? \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(246, \"div\", 3);\n    i0.ɵɵelementStart(247, \"mat-form-field\", 46);\n    i0.ɵɵelementStart(248, \"mat-label\");\n    i0.ɵɵtext(249, \"Early Start Reason\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(250, \"input\", 68);\n    i0.ɵɵelementStart(251, \"mat-error\");\n    i0.ɵɵtext(252, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(253, \"div\", 65);\n    i0.ɵɵelementStart(254, \"div\", 3);\n    i0.ɵɵelementStart(255, \"mat-form-field\", 46);\n    i0.ɵɵelementStart(256, \"mat-label\");\n    i0.ɵɵtext(257, \"Pre approved by\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(258, \"input\", 69);\n    i0.ɵɵelementStart(259, \"mat-error\");\n    i0.ɵɵtext(260, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(261, \"div\", 3);\n    i0.ɵɵelementStart(262, \"mat-form-field\", 46);\n    i0.ɵɵelementStart(263, \"mat-label\");\n    i0.ɵɵtext(264, \"Pre approval Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(265, \"input\", 70);\n    i0.ɵɵelementStart(266, \"mat-error\");\n    i0.ɵɵtext(267, \"Field must be valid\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r10 = i0.ɵɵreference(97);\n\n    const _r11 = i0.ɵɵreference(106);\n\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.wgFormGroup);\n    i0.ɵɵadvance(27);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(28, 40, ctx_r0.wgFC.projectReferenceNumber.errors));\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrOrganizations);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrWorkStream);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.wgFormGroup.errors);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrContractors);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.dataModel.mode != ctx_r0.formModeConstant.ADD);\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrWorkType);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.isdisableallFormControl)(\"value\", ctx_r0.STANDARD)(\"checked\", ctx_r0.workDescriptionTextType === ctx_r0.STANDARD);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrWorkIdentifier);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.isdisableallFormControl)(\"value\", ctx_r0.USER)(\"checked\", ctx_r0.workDescriptionTextType === ctx_r0.USER);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngxMatDatetimePicker\", _r10)(\"min\", ctx_r0.minDate)(\"formControl\", ctx_r0.wgFormGroup.controls.proposedStartDate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"showSeconds\", true)(\"stepHour\", 1)(\"stepMinute\", 1)(\"stepSecond\", 1)(\"enableMeridian\", false);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngxMatDatetimePicker\", _r11)(\"min\", ctx_r0.minDate)(\"formControl\", ctx_r0.wgFormGroup.controls.proposedEndDate);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"showSeconds\", true)(\"stepHour\", 1)(\"stepMinute\", 1)(\"stepSecond\", 1)(\"enableMeridian\", false);\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrActivityType);\n    i0.ɵɵadvance(24);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrCollaborativeType);\n    i0.ɵɵadvance(31);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrHighWayAuthorities);\n    i0.ɵɵadvance(21);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrRoadCategory);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrCloseFootway);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrTrafficManagementType);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.arrLocationType);\n  }\n}\n\nconst _c3 = [[[\"\", 8, \"elgin-map-view-slot\"]]];\nconst _c4 = [\".elgin-map-view-slot\"];\nexport let CreatePermitFormComponent = /*#__PURE__*/(() => {\n  class CreatePermitFormComponent extends WidgetComponentBase {\n    constructor(_serverApiBase, _appRepoHelperService, dialog, fb, _validationService, datePipe) {\n      super(_serverApiBase, _validationService);\n      this._serverApiBase = _serverApiBase;\n      this._appRepoHelperService = _appRepoHelperService;\n      this.dialog = dialog;\n      this.fb = fb;\n      this._validationService = _validationService;\n      this.datePipe = datePipe;\n      this.trafficManagementPlanChkBoxChange = new EventEmitter();\n      this.tTROChkBoxChange = new EventEmitter();\n      this.formModeConstant = FormModeConstant; //public defaultTime = [8, 0o0 , 0o0]\n\n      this.dialogTitle = \"Create Permit\";\n      this.arrWorkType = [];\n      this.arrWorkIdentifier = [];\n      this.arrWorkIdentifierByOrg = [];\n      this.arrRoadCategory = [];\n      this.arrCloseFootway = [];\n      this.arrHighWayAuthorities = [];\n      this.arrOrganizations = [];\n      this.arrTrafficManagementType = [];\n      this.arrCollaborativeType = [];\n      this.arrUserAccessWorkStream = [];\n      this.arrWorkStream = [];\n      this.arrUserAccessContractors = [];\n      this.arrContractors = [];\n      this.arrLocationType = [];\n      this.arrActivityType = [];\n      this.dialogData = null;\n      this.errorMsg = \"\";\n      this.STANDARD = TEXT_TYPE.STANDARD;\n      this.USER = TEXT_TYPE.USER;\n      this.workDescriptionTextType = TEXT_TYPE.STANDARD;\n      this.isdisableallFormControl = false;\n      this.dayDiffProposedStartNToday = new Days();\n      this.dayDiffProposedStartNProposedEnd = new Days();\n    }\n\n    ngOnInit() {\n      this.createFormGroup();\n      this.wgOnInit();\n      this.setmindate();\n    }\n\n    setmindate() {\n      const now = new Date();\n      this.minDate = new Date();\n      this.minDate.setDate(now.getDate());\n    }\n\n    onChangeWorktype(event) {\n      if (event.value == 'immediate_urgent' || event.value == 'immediate_emergency') this.minDate = null;else {\n        this.setmindate();\n      }\n    }\n\n    setFieldData() {\n      this.arrWorkType = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.WORK_CATEGORY.toString());\n      this.arrRoadCategory = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.ROAD_CATEGORY.toString());\n      this.arrCloseFootway = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.CLOSE_FOOTWAY.toString());\n      this.arrTrafficManagementType = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.TRAFFIC_MANAGEMENT_TYPE.toString());\n      this.arrHighWayAuthorities = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.HIGHWAY_AUTORITIES.toString());\n      this.arrOrganizations = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.USER_ACCESS_ORG.toString());\n      this.arrUserAccessWorkStream = this._appRepoHelperService.getUserAccessibleWorkStream();\n      this.arrUserAccessContractors = this._appRepoHelperService.getUserAccessibleContractors();\n      this.arrLocationType = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.LOCATION_TYPE.toString());\n      this.arrCollaborativeType = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.COLLABORATION_TYPE.toString());\n      this.arrActivityType = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.ACTIVITY_TYPE.toString());\n\n      if (this.dataModel.mode == FormModeConstant.CHANGE_REQUEST_CREATE) {\n        let permitform = this.dataModel.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM);\n        let appId = permitform === null || permitform === void 0 ? void 0 : permitform.applicationId;\n\n        this._serverApiBase.get(`/api/v1/applications/${appId}/get-estimated-alteration-cost`).subscribe(response => {\n          try {\n            if (response) {\n              this.dataModel.data.reqRaiseCharges = response;\n              this.wgFormGroup.controls.cost.setValue(this.dataModel.data.reqRaiseCharges);\n            }\n          } catch (e) {}\n        }, error => {});\n      }\n    }\n\n    createFormGroup() {\n      this.wgFormGroup = this.fb.group({\n        'promoterPrefix': [''],\n        'permitReference': [''],\n        'worksReferenceNumber': [''],\n        'projectReferenceNumber': ['', [Validators.required]],\n        'worksDescriptionSelect': ['', [Validators.required]],\n        'worksDescriptionText': [''],\n        'worksType': ['', [Validators.required]],\n        'promoterOrganisation': [''],\n        'contact': ['', [Validators.required]],\n        'workStream': ['', [Validators.required]],\n        'accountability': ['', [Validators.required]],\n        'cost': [''],\n        'proposedStartDate': ['', [Validators.required]],\n        'proposedEndDate': ['', [Validators.required]],\n        'actualStartDateTime': [''],\n        'actualEndDateTime': [''],\n        'worksLocationDescription': ['', [Validators.required]],\n        'locationDetails': ['', [Validators.required]],\n        'highwayAuthority': ['', [Validators.required]],\n        'postCode': ['', [Validators.required]],\n        'usrn': ['', [Validators.required]],\n        'roadType': ['', [Validators.required]],\n        'footwayClosure': ['', [Validators.required]],\n        'trafficManagementRequired': ['', [Validators.required]],\n        'locationTypes': ['', [Validators.required]],\n        'trafficSensitivity': [],\n        'collaborativeWorking': [],\n        'collaborativeDetails': [''],\n        'collaborativeWork': [''],\n        'collaborativeType': [''],\n        'excavationRequired': [],\n        'isLaneRentalApplicable': [],\n        'contactNumber': ['', [Validators.required]],\n        'activityType': ['', [Validators.required]],\n        // 'hasHighwayAuthApproval': [''],\n        // 'highwayAuthApprovalAuth': [''],\n        // 'highwayAuthApprovalDetails': [''],\n        'hasEarlyApproval': [''],\n        'earlyStartApprovedBy': [''],\n        'earlyStartApprovalDetails': [''],\n        'earlyStartReason': [''],\n        'ttroRequired': [''],\n        'environmentalHealth': [''],\n        'isCovid19Response': [''],\n        'workingDays': [''],\n        'calenderDays': [''],\n        'trafficManagementPlan': ['']\n      });\n      this.wgFormGroup.get('workingDays').disable();\n\n      switch (this.dataModel.mode) {\n        case FormModeConstant.CHANGE_REQUEST_CREATE:\n          this.disableCommonFormControl(); // this.wgFormGroup.get('worksType').disable();\n          // this.wgFormGroup.get('contact').disable();\n          // this.wgFormGroup.get('contactNumber').disable();\n\n          this.wgFormGroup.get('workStream').disable();\n          this.wgFormGroup.get('promoterOrganisation').disable();\n          this.wgFormGroup.get('accountability').disable();\n          this.wgFormGroup.get('projectReferenceNumber').disable();\n          break;\n\n        case FormModeConstant.DATEDISABLED:\n          this.disableCommonFormControl(); // this.wgFormGroup.get('worksType').disable();\n          // this.wgFormGroup.get('contact').disable();\n          // this.wgFormGroup.get('contactNumber').disable();\n          // this.wgFormGroup.get('workStream').disable();\n          // this.wgFormGroup.get('projectReferenceNumber').disable();\n          // this.wgFormGroup.get('proposedStartDate').disable();\n          // this.wgFormGroup.get('proposedEndDate').disable();\n\n          this.wgFormGroup.get('workStream').disable();\n          this.wgFormGroup.get('promoterOrganisation').disable();\n          this.wgFormGroup.get('accountability').disable();\n          this.wgFormGroup.get('projectReferenceNumber').disable();\n          break;\n\n        case FormModeConstant.STARTDATEDISABLED:\n          this.disableCommonFormControl();\n          this.wgFormGroup.get('worksType').disable();\n          this.wgFormGroup.get('contact').disable();\n          this.wgFormGroup.get('contactNumber').disable();\n          this.wgFormGroup.get('workStream').disable();\n          this.wgFormGroup.get('projectReferenceNumber').disable();\n          this.wgFormGroup.get('proposedStartDate').disable(); // this.wgFormGroup.get('proposedEndDate').disable();\n\n          break;\n\n        case FormModeConstant.VIEW:\n          this.isdisableallFormControl = true;\n          this.disableAllFormControl();\n          break;\n\n        case FormModeConstant.NEW_PHASE_CREATE:\n          this.disableCommonFormControl();\n          break;\n\n        default:\n          this.disableCommonFormControl();\n          break;\n      }\n    }\n\n    disableCommonFormControl() {\n      this.wgFormGroup.get('promoterPrefix').disable();\n      this.wgFormGroup.get('permitReference').disable(); // this.wgFormGroup.get('promoterOrganisation').disable();\n      // this.wgFormGroup.get('workStream').disable();\n\n      this.wgFormGroup.get('worksReferenceNumber').disable(); // this.wgFormGroup.get('accountability').disable()\n\n      this.wgFormGroup.get('cost').disable();\n      this.wgFormGroup.get('actualStartDateTime').disable();\n      this.wgFormGroup.get('actualEndDateTime').disable();\n      this.wgFormGroup.get('trafficSensitivity').disable();\n      this.wgFormGroup.get('locationDetails').disable(); // this.wgFormGroup.get('worksLocationDescription').disable();\n\n      this.wgFormGroup.get('highwayAuthority').disable();\n      this.wgFormGroup.get('postCode').disable();\n      this.wgFormGroup.get('usrn').disable();\n      this.wgFormGroup.get('roadType').disable();\n      this.wgFormGroup.get('worksDescriptionText').disable();\n      this.wgFormGroup.get('collaborativeDetails').disable();\n      this.wgFormGroup.get('collaborativeWork').disable();\n      this.wgFormGroup.get('collaborativeType').disable();\n    }\n\n    disableAllFormControl() {\n      this.wgFormGroup.get('promoterPrefix').disable();\n      this.wgFormGroup.get('permitReference').disable();\n      this.wgFormGroup.get('promoterOrganisation').disable();\n      this.wgFormGroup.get('workStream').disable();\n      this.wgFormGroup.get('worksReferenceNumber').disable();\n      this.wgFormGroup.get('projectReferenceNumber').disable();\n      this.wgFormGroup.get('worksDescriptionSelect').disable();\n      this.wgFormGroup.get('worksDescriptionText').disable();\n      this.wgFormGroup.get('worksType').disable();\n      this.wgFormGroup.get('contact').disable();\n      this.wgFormGroup.get('accountability').disable();\n      this.wgFormGroup.get('cost').disable();\n      this.wgFormGroup.get('proposedStartDate').disable();\n      this.wgFormGroup.get('proposedEndDate').disable();\n      this.wgFormGroup.get('actualStartDateTime').disable();\n      this.wgFormGroup.get('actualEndDateTime').disable();\n      this.wgFormGroup.get('trafficSensitivity').disable();\n      this.wgFormGroup.get('locationDetails').disable();\n      this.wgFormGroup.get('worksLocationDescription').disable();\n      this.wgFormGroup.get('highwayAuthority').disable();\n      this.wgFormGroup.get('postCode').disable();\n      this.wgFormGroup.get('usrn').disable();\n      this.wgFormGroup.get('roadType').disable();\n      this.wgFormGroup.get('worksDescriptionText').disable();\n      this.wgFormGroup.get('footwayClosure').disable();\n      this.wgFormGroup.get('trafficManagementRequired').disable();\n      this.wgFormGroup.get('locationTypes').disable();\n      this.wgFormGroup.get('trafficSensitivity').disable();\n      this.wgFormGroup.get('collaborativeWorking').disable();\n      this.wgFormGroup.get('collaborativeDetails').disable();\n      this.wgFormGroup.get('collaborativeWork').disable();\n      this.wgFormGroup.get('collaborativeType').disable();\n      this.wgFormGroup.get('excavationRequired').disable();\n      this.wgFormGroup.get('isLaneRentalApplicable').disable();\n      this.wgFormGroup.get('contactNumber').disable();\n      this.wgFormGroup.get('activityType').disable();\n      this.wgFormGroup.get('hasEarlyApproval').disable();\n      this.wgFormGroup.get('earlyStartApprovedBy').disable();\n      this.wgFormGroup.get('earlyStartApprovalDetails').disable();\n      this.wgFormGroup.get('earlyStartReason').disable();\n      this.wgFormGroup.get('ttroRequired').disable();\n      this.wgFormGroup.get('environmentalHealth').disable();\n      this.wgFormGroup.get('isCovid19Response').disable();\n      this.wgFormGroup.get('workingDays').disable();\n      this.wgFormGroup.get('calenderDays').disable();\n      this.wgFormGroup.get('trafficManagementPlan').disable();\n    }\n\n    getControlData() {\n      return new Promise((resolve, reject) => {\n        let permitform = this.dataModel.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM);\n        permitform = permitform ? permitform : new Object();\n\n        if (permitform) {\n          resolve(permitform);\n        } else {\n          reject(permitform);\n        }\n      });\n    }\n\n    convertData(response) {\n      var _a;\n\n      console.log(\"convertdata response\", response);\n      this.dataModel.data.promoterPrefix = response.promoterPrefix;\n      this.dataModel.data.permitRefNumber = response.permitRefNumber;\n      this.dataModel.data.workReferenceNumber = response.workReferenceNumber;\n      this.dataModel.data.projectReferenceNumber = response.projectReferenceNumber;\n      this.dataModel.data.locationDescription = response.locationDescription;\n      this.dataModel.data.locationDetails = response.locationDetails;\n      this.dataModel.data.postCode = response.postCode;\n      this.dataModel.data.usrn = response.usrn;\n      this.dataModel.data.workDescription = response.workDescription;\n      this.dataModel.data.workDescTextType = response.workDescTextType;\n      this.dataModel.data.workCategory = response.workCategory;\n      this.dataModel.data.highwayAuthorityId = response.highwayAuthorityId;\n      this.dataModel.data.roadCategory = (_a = response.roadCategory) === null || _a === void 0 ? void 0 : _a.toString();\n      this.dataModel.data.promoterOrganisation = response.promoterOrganisation;\n      this.dataModel.data.secondaryContact = response.secondaryContact;\n      this.dataModel.data.secondaryContactNumber = response.secondaryContactNumber;\n      this.dataModel.data.departmentName = response.departmentName; // this.dataModel.data.accountability = response.accountability;\n\n      this.dataModel.data.accountability = response.contractor_id;\n      this.dataModel.data.contractor_id = response.contractor_id;\n      this.dataModel.data.trafficSensitiveFlag = response.trafficSensitiveFlag;\n      this.dataModel.data.closeFootway = response.closeFootway;\n      this.dataModel.data.excavationFlag = response.excavationFlag;\n      this.dataModel.data.laneRentalFlag = response.laneRentalFlag;\n      this.dataModel.data.trafficManagementType = response.trafficManagementType;\n      this.dataModel.data.geometry = response.geometry;\n      this.dataModel.data.statusValue = response.statusValue;\n      this.dataModel.data.workStatus = response.workStatus;\n      this.dataModel.data.proposedStartDate = response.proposedStartDate;\n      this.dataModel.data.proposedEndDate = response.proposedEndDate;\n      this.dataModel.data.actualStartDate = response.actualStartDate;\n      this.dataModel.data.actualEnddate = response.actualEnddate;\n      this.dataModel.data.totalCost = response.totalCost;\n      this.dataModel.data.costRisk = response.costRisk;\n      this.dataModel.data.customerRisk = response.customerRisk;\n      this.dataModel.data.trafficManagementRisk = response.trafficManagementRisk;\n      this.dataModel.data.orgId = response.orgId;\n      this.dataModel.data.departmentId = response.departmentId;\n      this.dataModel.data.conditions = response.conditions;\n      this.dataModel.data.collaborativeWorkingFlag = response.collaborativeWorkingFlag;\n      this.dataModel.data.collaborationDetails = response.collaborationDetails;\n      this.dataModel.data.collaborativeWorks = response.collaborativeWorks;\n      this.dataModel.data.collaborationType = response.collaborationType;\n      this.dataModel.data.specialDesignations = response.specialDesignations;\n      this.dataModel.data.activityType = response.activityType;\n      this.dataModel.data.locationTypes = response.locationTypes;\n      this.dataModel.data.earlyStartPreApprovalFlag = response.earlyStartPreApprovalFlag;\n      this.dataModel.data.earlyStartReason = response.earlyStartReason;\n      this.dataModel.data.preApprovalDetails = response.preApprovalDetails;\n      this.dataModel.data.preApprovalAuthoriser = response.preApprovalAuthoriser;\n      this.dataModel.data.ttro_requiredFlag = response.ttro_requiredFlag;\n      this.dataModel.data.environmental_flag = response.environmental_flag;\n      this.dataModel.data.is_covid19_response = response.is_covid19_response;\n      this.workDescriptionRadioChange(this.dataModel.data.workDescTextType);\n      this.dataModel.data.contractor_id = response.contractor_id;\n      this.dataModel.data.workstream_id = response.workstream_id;\n      return this.dataModel.data;\n    }\n\n    setMode(responseDataModel) {}\n\n    setValue(responseDataModel) {\n      this.endDatePicker.defaultTime = [17, 0, 0];\n      this.startDatePicker.defaultTime = [8, 0, 0];\n\n      if (responseDataModel) {\n        console.log(\"responseDataModel\", responseDataModel);\n        this.wgFormGroup.patchValue({\n          promoterPrefix: responseDataModel.promoterPrefix,\n          promoterOrganisation: responseDataModel.orgId,\n          // workStream: responseDataModel.departmentId,\n          workStream: responseDataModel.workstream_id,\n          accountability: responseDataModel.contractor_id,\n          usrn: responseDataModel.usrn,\n          postCode: responseDataModel.postCode,\n          worksLocationDescription: responseDataModel.locationDescription,\n          locationDetails: responseDataModel.locationDetails,\n          highwayAuthority: responseDataModel.highwayAuthorityId,\n          roadType: responseDataModel.roadCategory,\n          trafficSensitivity: responseDataModel.trafficSensitiveFlag,\n          permitReference: responseDataModel.permitRefNumber,\n          worksReferenceNumber: responseDataModel.workReferenceNumber,\n          projectReferenceNumber: responseDataModel.projectReferenceNumber,\n          worksDescriptionSelect: responseDataModel.workDescTextType === this.STANDARD ? responseDataModel.workDescription : '',\n          worksDescriptionText: responseDataModel.workDescTextType === this.USER ? responseDataModel.workDescription : '',\n          worksType: responseDataModel.workCategory,\n          contact: responseDataModel.secondaryContact,\n          cost: this.dataModel.data.reqRaiseCharges,\n          proposedStartDate: responseDataModel.proposedStartDate,\n          proposedEndDate: responseDataModel.proposedEndDate,\n          footwayClosure: responseDataModel.closeFootway,\n          trafficManagementRequired: responseDataModel.trafficManagementType,\n          excavationRequired: responseDataModel.excavationFlag,\n          collaborativeWorking: responseDataModel.collaborativeWorkingFlag,\n          collaborativeDetails: responseDataModel.collaborationDetails,\n          collaborativeWork: responseDataModel.collaborativeWorks,\n          collaborativeType: responseDataModel.collaborationType,\n          isLaneRentalApplicable: responseDataModel.laneRentalFlag,\n          contactNumber: responseDataModel.secondaryContactNumber,\n          activityType: responseDataModel.activityType,\n          locationTypes: responseDataModel.locationTypes,\n          // hasHighwayAuthApproval: responseDataModel.earlyStartPreApprovalFlag,\n          // highwayAuthApprovalAuth: responseDataModel.preApprovalAuthoriser ? responseDataModel.preApprovalAuthoriser : '',\n          // highwayAuthApprovalDetails: responseDataModel.preApprovalDetails ? responseDataModel.preApprovalDetails : '',\n          hasEarlyApproval: responseDataModel.earlyStartPreApprovalFlag,\n          earlyStartApprovedBy: responseDataModel.preApprovalAuthoriser ? responseDataModel.preApprovalAuthoriser : '',\n          earlyStartApprovalDetails: responseDataModel.preApprovalDetails ? responseDataModel.preApprovalDetails : '',\n          earlyStartReason: responseDataModel.earlyStartReason ? responseDataModel.earlyStartReason : '',\n          ttroRequired: responseDataModel.ttro_requiredFlag,\n          environmentalHealth: responseDataModel.environmental_flag,\n          isCovid19Response: responseDataModel.is_covid19_response\n        });\n\n        if (this.dataModel.mode == FormModeConstant.ADD) {\n          this.wgFormGroup.patchValue({\n            excavationRequired: true\n          });\n        } // this.onHighwayAuthorityApprovalChkBoxChange();\n\n\n        this.onEarlyStartApprovalChkBoxChange();\n        this.setWorkIdentifier();\n        let orgId = this.wgFormGroup.controls.promoterOrganisation.value;\n        this.setArrContractor(orgId);\n        this.setArrWorkStream(orgId);\n        let proposedStartDate = this.wgFormGroup.controls.proposedStartDate.value;\n        let proposedEndDate = this.wgFormGroup.controls.proposedEndDate.value;\n\n        if (proposedStartDate && proposedEndDate) {\n          this.calculateDiff(proposedStartDate, proposedEndDate).then(r => {\n            this.setDays();\n          });\n        }\n      }\n    }\n\n    setDays() {\n      console.log('start and end date workingDay', this.dayDiffProposedStartNProposedEnd.workingDay);\n      console.log('workingDay start and Today', this.dayDiffProposedStartNToday.workingDay);\n      this.wgFormGroup.patchValue({\n        workingDays: this.dayDiffProposedStartNProposedEnd.workingDay,\n        calenderDays: this.dayDiffProposedStartNProposedEnd.calendarDays\n      }); //  let str= this.wgFormGroup.controls.worksType.value;\n      //  let str1 = WORK_CATEGORY_KEY_VALUE_CONSTANTS.IMMIDIATE_EMERGENCY_KEY;\n      //  let str2 = WORK_CATEGORY_KEY_VALUE_CONSTANTS.IMMIDIATE_MAJOR_KEY;\n\n      if (!(this.wgFormGroup.controls.worksType.value == WORK_CATEGORY_KEY_VALUE_CONSTANTS.IMMIDIATE_EMERGENCY_KEY || this.wgFormGroup.controls.worksType.value == WORK_CATEGORY_KEY_VALUE_CONSTANTS.IMMIDIATE_MAJOR_KEY)) {\n        if (this.dayDiffProposedStartNProposedEnd.workingDay <= 3) {\n          this.wgFormGroup.patchValue({\n            worksType: WORK_TYPE.MINOR\n          });\n        } else if (this.dayDiffProposedStartNProposedEnd.workingDay <= 10 && this.dayDiffProposedStartNProposedEnd.workingDay >= 4) {\n          this.wgFormGroup.patchValue({\n            worksType: WORK_TYPE.STANDARD\n          });\n        } else if (this.dayDiffProposedStartNProposedEnd.workingDay > 10) {\n          this.wgFormGroup.patchValue({\n            worksType: WORK_TYPE.PAA\n          });\n        }\n      }\n    }\n\n    getValue() {\n      var _a, _b;\n\n      let data = {\n        \"org_id\": 200,\n        \"highway_authority_id\": 300,\n        \"department_id\": 999,\n        \"geometry\": {\n          \"type\": \"Polygon\",\n          \"coordinates\": [[[503294.847231123, 192583.873611111], [503280.147220442, 192531.140275998], [503286.058330366, 192530.440275998], [503301.613890669, 192581.462495846], [503294.847231123, 192583.873611111]]]\n        },\n        \"is_an_old_permit\": false,\n        \"street_name\": \"BATCHWORTH ROUNDABOUT\",\n        \"area_name\": \"\",\n        \"town\": \"RICKMANSWORTH\",\n        \"work_reference_number\": \"\",\n        \"usrn\": 40416588,\n        \"location_description\": \"Entrance to new Premier Inn -2\",\n        \"location_types\": [\"footway, carriageway\"],\n        \"road_category\": 1,\n        \"proposed_start_date\": \"2021-01-17T00:00:00.000Z\",\n        \"proposed_end_date\": \"2021-02-28T00:00:00.000Z\",\n        \"traffic_sensitive_flag\": false,\n        \"secondary_contact\": \"Stuart Monk\",\n        \"secondary_contact_number\": \"01543466711\",\n        \"secondary_contact_email\": \"gasnetworks@murphygroup.co.uk\",\n        // \"work_type\": \"planned\",\n        \"work_category\": \"standard\",\n        \"work_description\": \"New distribution main required\",\n        \"activity_type\": \"utility_repair_and_maintenance_works\",\n        \"traffic_management_type\": \"lane_closure\",\n        \"close_footway\": \"yes_provide_pedestrian_walkway\",\n        \"collaborative_working_flag\": false,\n        \"collaboration_details\": \"\",\n        \"collaborative_works\": \"\",\n        \"collaboration_type\": \"\",\n        \"excavation_flag\": false,\n        \"environmental_flag\": false,\n        \"ttro_required_flag\": false,\n        \"project_reference_number\": \"777771\",\n        \"conditions\": [{\n          \"condition\": \"NCT01a\",\n          \"comment\": \"\"\n        }, {\n          \"condition\": \"NCT04a\",\n          \"comment\": \"\"\n        }, {\n          \"condition\": \"NCT01b\",\n          \"comment\": \"\"\n        }],\n        \"special_designations\": [],\n        \"early_start_pre_approval_flag\": false,\n        \"early_start_reason\": \"It is not pre approved -2\",\n        \"lane_rental_flag\": false,\n        \"location_details\": \"Tredegar Park round about\"\n      }; // if (this.dataModel.mode == FormModeConstant.EDIT) {\n      //   data.geometry.coordinates = permitCreateRequestBody.geometry.coordinates;\n      // }else{\n      //   data.geometry.coordinates = JSON.parse(JSON.stringify([[...permitCreateRequestBody.geometry.coordinates]]));\n      // }\n      //data.geometry.coordinates = JSON.parse(JSON.stringify([[...permitCreateRequestBody.geometry.coordinates]]));\n      // data.geometry.type = \"Point\"\n\n      data.geometry.type = this.dataModel.data.geometry.type ? this.dataModel.data.geometry.type : [];\n      data.geometry.coordinates = this.dataModel.data.geometry.coordinates ? this.dataModel.data.geometry.coordinates : [];\n      data.location_description = this.wgFormGroup.controls.worksLocationDescription.value ? this.wgFormGroup.controls.worksLocationDescription.value : null;\n      data.location_details = this.wgFormGroup.controls.locationDetails.value ? this.wgFormGroup.controls.locationDetails.value : null;\n      data.highway_authority_id = this.wgFormGroup.controls.highwayAuthority.value ? this.wgFormGroup.controls.highwayAuthority.value : 0;\n      data.usrn = this.wgFormGroup.controls.usrn.value ? (_a = this.wgFormGroup.controls.usrn) === null || _a === void 0 ? void 0 : _a.value : null;\n      data.proposed_start_date = this.wgFormGroup.controls.proposedStartDate.value ? this.wgFormGroup.controls.proposedStartDate.value : null;\n      data.proposed_end_date = this.wgFormGroup.controls.proposedEndDate.value ? this.wgFormGroup.controls.proposedEndDate.value : null;\n      data.org_id = this.wgFormGroup.controls.promoterOrganisation.value ? this.wgFormGroup.controls.promoterOrganisation.value : null;\n      data.workstream_id = this.wgFormGroup.controls.workStream.value ? this.wgFormGroup.controls.workStream.value : null;\n      data.traffic_sensitive_flag = this.wgFormGroup.controls.trafficSensitivity.value ? this.wgFormGroup.controls.trafficSensitivity.value : false;\n      data.lane_rental_flag = this.wgFormGroup.controls.isLaneRentalApplicable.value ? this.wgFormGroup.controls.isLaneRentalApplicable.value : false;\n      data.excavation_flag = this.wgFormGroup.controls.excavationRequired.value ? this.wgFormGroup.controls.excavationRequired.value : false;\n      data.conditions = this.dataModel.data.conditions ? this.dataModel.data.conditions : [];\n      data.special_designations = this.dataModel.data.specialDesignations ? this.dataModel.data.specialDesignations : []; // data.project_reference_number = this.wgFormGroup.controls.projectReferenceNumber.value ?\n      //   this.wgFormGroup.controls.projectReferenceNumber.value : 0;\n\n      data.project_reference_number = this.wgFormGroup.controls.projectReferenceNumber.value;\n      data.road_category = this.wgFormGroup.controls.roadType.value ? Number(this.wgFormGroup.controls.roadType.value) : 0;\n      data.secondary_contact = this.wgFormGroup.controls.contact.value ? this.wgFormGroup.controls.contact.value : 0; // data.secondary_contact_email = this.dataModel.data.secondaryContactEmail ?\n      //   this.dataModel.data.secondaryContactEmail : null;\n\n      data.secondary_contact_number = this.wgFormGroup.controls.contactNumber.value ? (_b = this.wgFormGroup.controls.contactNumber.value) === null || _b === void 0 ? void 0 : _b.toString() : 0;\n      data.close_footway = this.wgFormGroup.controls.footwayClosure.value ? this.wgFormGroup.controls.footwayClosure.value : 0;\n      data.traffic_management_type = this.wgFormGroup.controls.trafficManagementRequired.value ? this.wgFormGroup.controls.trafficManagementRequired.value : 0;\n      data.work_description = this.workDescriptionTextType === this.STANDARD ? this.wgFormGroup.controls.worksDescriptionSelect.value ? this.wgFormGroup.controls.worksDescriptionSelect.value : 0 : this.wgFormGroup.controls.worksDescriptionText.value ? this.wgFormGroup.controls.worksDescriptionText.value : 0;\n      data.work_description_text_type = this.workDescriptionTextType;\n      data.work_category = this.wgFormGroup.controls.worksType.value ? this.wgFormGroup.controls.worksType.value : 0;\n      data.postcode = this.wgFormGroup.controls.postCode.value ? this.wgFormGroup.controls.postCode.value : null;\n      data.accountability = this.wgFormGroup.controls.accountability.value ? this.wgFormGroup.controls.accountability.value : 0;\n      data.contractor_id = this.wgFormGroup.controls.accountability.value ? this.wgFormGroup.controls.accountability.value : 0;\n      data.collaborative_working_flag = this.wgFormGroup.controls.collaborativeWorking.value ? this.wgFormGroup.controls.collaborativeWorking.value : false;\n      data.collaboration_details = this.wgFormGroup.controls.collaborativeDetails.value ? this.wgFormGroup.controls.collaborativeDetails.value : null;\n      data.collaborative_works = this.wgFormGroup.controls.collaborativeWork.value ? this.wgFormGroup.controls.collaborativeWork.value : null;\n      data.collaboration_type = this.wgFormGroup.controls.collaborativeType.value ? this.wgFormGroup.controls.collaborativeType.value : null;\n      data.activity_type = this.wgFormGroup.controls.activityType.value ? this.wgFormGroup.controls.activityType.value : null;\n      data.work_reference_number = this.dataModel.data.workReferenceNumber;\n      data.location_types = this.wgFormGroup.controls.locationTypes.value ? this.wgFormGroup.controls.locationTypes.value : null;\n      data.ttro_required_flag = this.wgFormGroup.controls.ttroRequired.value ? this.wgFormGroup.controls.ttroRequired.value : false;\n      data.early_start_pre_approval_flag = this.wgFormGroup.controls.hasEarlyApproval.value;\n      data.early_start_reason = this.wgFormGroup.controls.earlyStartReason.value;\n      data.pre_approval_authoriser = this.wgFormGroup.controls.earlyStartApprovedBy.value;\n      data.pre_approval_details = this.wgFormGroup.controls.earlyStartApprovalDetails.value;\n      data.environmental_flag = this.wgFormGroup.controls.environmentalHealth.value ? this.wgFormGroup.controls.environmentalHealth.value : false;\n      data.is_covid19_response = this.wgFormGroup.controls.isCovid19Response.value ? this.wgFormGroup.controls.isCovid19Response.value : false;\n      console.log('------------------------Data Create Permit-------------------');\n      console.log(data); // if (this.dataModel.mode == FormModeConstant.EDIT) {\n      //   let data: any = {\n      //     \"org_id\": 200,\n      //     \"highway_authority_id\": 300,\n      //     \"department_id\": 100,\n      //     \"geometry\": { \"type\": \"Polygon\", \"coordinates\": [[[432417, 433309], [432449, 433289], [432470, 433325], [432443, 433341]]] },\n      //     \"is_an_old_permit\": false,\n      //     \"street_name\": \"BATCHWORTH ROUNDABOUT\",\n      //     \"area_name\": \"\", \"town\": \"RICKMANSWORTH\",\n      //     \"work_reference_number\": \"\",\n      //     \"usrn\": \"23004489\",\n      //     \"location_description\": \"East Park Parade Leeds\",\n      //     \"location_types\": \"footway, carriageway\",\n      //     \"road_category\": 2,\n      //     \"proposed_start_date\": \"2020-12-23T11:41:50.945Z\",\n      //     \"proposed_end_date\": \"2020-12-26T11:41:55.000Z\",\n      //     \"traffic_sensitive_flag\": true,\n      //     \"secondary_contact\": \"Test Name\",\n      //     \"secondary_contact_number\": \"9876543210\",\n      //     \"secondary_contact_email\": \"\",\n      //     \"work_category\": \"minor\",\n      //     \"work_description\": 400,\n      //     \"activity_type\": \"utility_repair_and_maintenance_works\",\n      //     \"traffic_management_type\": \"no_carriageway_incursion\",\n      //     \"close_footway\": \"no\",\n      //     \"collaborative_working_flag\": false,\n      //     \"collaboration_details\": \"\",\n      //     \"collaborative_works\": \"\",\n      //     \"collaboration_type\": \"\",\n      //     \"excavation_flag\": false,\n      //     \"environmental_flag\": false,\n      //     \"ttro_required_flag\": false,\n      //     \"project_reference_number\": \"123\",\n      //     \"conditions\": [{ \"condition\": \"NCT01a\", \"comment\": \"\" }, { \"condition\": \"NCT01b\", \"comment\": \"\" }, { \"condition\": \"NCT11a\", \"comment\": \"\" }],\n      //     \"special_designations\": [],\n      //     \"early_start_pre_approval_flag\": false,\n      //     \"early_start_reason\": \"It is not pre approved -2\",\n      //     \"lane_rental_flag\": false,\n      //     \"postcode\": \"LS9 999\",\n      //     \"accountability\": \"MUC\"\n      //   };\n      //   //TODO: Set geometry cordinates properly to make it in action\n      //   data.geometry.type = this.dataModel.data.geometry.type ? ElginMapUtility.getGeometryTypeForRequest(this.dataModel.data.geometry.type) : null;\n      //   data.geometry.coordinates = this.dataModel.data.geometry.coordinates ? this.dataModel.data.geometry.coordinates : [];\n      //   data.location_description = this.wgFormGroup.controls.locationDetails.value ? this.wgFormGroup.controls.locationDetails.value : null;\n      //   data.highway_authority_id = this.wgFormGroup.controls.highwayAuthority.value ? this.wgFormGroup.controls.highwayAuthority.value : 0;\n      //   data.usrn = this.wgFormGroup.controls.usrn.value ? this.wgFormGroup.controls.usrn.value : null;\n      //   data.proposed_start_date = this.wgFormGroup.controls.proposedStartDate.value ?\n      //     this.wgFormGroup.controls.proposedStartDate.value : null;\n      //   data.proposed_end_date = this.wgFormGroup.controls.proposedEndDate.value ?\n      //     this.wgFormGroup.controls.proposedEndDate.value : null;\n      //   data.org_id = this.dataModel.data.orgId ? this.dataModel.data.orgId : 0;\n      //   data.department_id = this.dataModel.data.departmentId ? this.dataModel.data.departmentId : 0;\n      //   data.traffic_sensitive_flag = this.wgFormGroup.controls.trafficSensitivity.value ?\n      //     this.wgFormGroup.controls.trafficSensitivity.value : false;\n      //   data.lane_rental_flag = this.wgFormGroup.controls.isLaneRentalApplicable.value ?\n      //     this.wgFormGroup.controls.isLaneRentalApplicable.value : false;\n      //   data.excavation_flag = this.wgFormGroup.controls.excavationRequired.value ?\n      //     this.wgFormGroup.controls.excavationRequired.value : false;\n      //   data.conditions = this.dataModel.data.conditions ? this.dataModel.data.conditions : [];\n      //   data.project_reference_number = this.wgFormGroup.controls.projectReferenceNumber.value ?\n      //     this.wgFormGroup.controls.projectReferenceNumber.value : 0;\n      //   data.road_category = this.wgFormGroup.controls.roadType.value ?\n      //     this.wgFormGroup.controls.roadType.value : 0;\n      //   data.secondary_contact = this.wgFormGroup.controls.contact.value ?\n      //     this.wgFormGroup.controls.contact.value : 0;\n      //   data.secondary_contact_email = this.dataModel.data.secondaryContactEmail ?\n      //     this.dataModel.data.secondaryContactEmail : null;\n      //   data.secondary_contact_number = this.wgFormGroup.controls.contactNumber.value ?\n      //     this.wgFormGroup.controls.contactNumber.value : 0;\n      //   data.close_footway = this.wgFormGroup.controls.footwayClosure.value ?\n      //     this.wgFormGroup.controls.footwayClosure.value : 0;\n      //   data.traffic_management_type =  this.wgFormGroup.controls.trafficManagementRequired.value ?\n      //   this.wgFormGroup.controls.trafficManagementRequired.value : 0;\n      //   data.work_description = this.wgFormGroup.controls.worksDescription.value ?\n      //     this.wgFormGroup.controls.worksDescription.value : 0;\n      //   data.work_category = this.wgFormGroup.controls.worksType.value ?\n      //     this.wgFormGroup.controls.worksType.value : 0;\n      //   data.postcode = this.wgFormGroup.controls.postCode.value ?\n      //     this.wgFormGroup.controls.postCode.value : null;\n      //   data.accountability = this.wgFormGroup.controls.accountability.value ?\n      //     this.wgFormGroup.controls.accountability.value : 0;\n      //   return data;\n      // } else {\n      //   return data;\n      // }\n\n      return data;\n    }\n\n    validate() {\n      this.errorMsg = \"\";\n      this.wgFormGroup.markAllAsTouched();\n      let isValid = super.validate();\n\n      if (!isValid) {\n        return;\n      }\n\n      ;\n      let proposedStartDate = this.wgFormGroup.controls.proposedStartDate.value;\n      let proposedEndDate = this.wgFormGroup.controls.proposedEndDate.value;\n      let workType = this.wgFormGroup.controls.worksType.value;\n\n      if (proposedStartDate > proposedEndDate) {\n        this.errorMsg = \"Start date cannot be greater than end date\";\n        this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n        return false;\n      }\n      /* let days = this.calculateDiff(proposedStartDate, proposedEndDate)\n           if (days > 10) {\n        switch (workType) {\n          case \"major\":\n            break\n          default:\n            this.errorMsg = \"Please select Work Type as Major\"\n            return false;\n        }\n      } else if (days > 3 && days <= 10) {\n        switch (workType) {\n          case \"standard\":\n            break\n          default:\n            this.errorMsg = \"Please select Work Type as Standard\"\n            return false;\n        }\n      } else if (days > 0 && days <= 3) {\n             switch (workType) {\n          case \"minor\":\n            break\n          default:\n            this.errorMsg = \"Please select Work Type as Minor\"\n            return false;\n        }\n      }\n      else {\n        switch (workType) {\n          case \"immediate_emergency\":\n            break\n          case \"immediate_urgent\":\n            break\n          default:\n            this.errorMsg = \"Please select Work Type as Immediate Emergency or Immediate Urgent\"\n            return false;\n        }\n      }\n           return true; */\n\n\n      return this.validateRoadClosureType() && this.validateDurationAndAdvance() && this.validatePAAWorkType();\n    }\n\n    validatePAAWorkType() {\n      let proposedStartDate = this.wgFormGroup.controls.proposedStartDate.value;\n      let workType = this.wgFormGroup.controls.worksType.value;\n\n      if (workType == WORK_TYPE.PAA) {\n        let today = new Date();\n        today.setMonth(today.getMonth() + 3);\n\n        if (proposedStartDate < today) {\n          this.errorMsg = `Major permits (PAA) require a lead time of 3 calendar months. Please amend your proposed start date accordingly.`;\n          this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    validateDurationAndAdvance() {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n\n      let proposedStartDate = this.wgFormGroup.controls.proposedStartDate.value;\n      let proposedEndDate = this.wgFormGroup.controls.proposedEndDate.value;\n      let workType = this.wgFormGroup.controls.worksType.value;\n      let propsedStartDateFormatted = \"\";\n\n      if (this.dataModel.mode == FormModeConstant.DATEDISABLED) {\n        return true;\n      }\n\n      switch (workType) {\n        case WORK_CATEGORY_KEY_VALUE_CONSTANTS.MAJOR_KEY.toString():\n          if (!((_b = (_a = this.wgFormGroup.controls) === null || _a === void 0 ? void 0 : _a.hasEarlyApproval) === null || _b === void 0 ? void 0 : _b.value)) {\n            if (this.dayDiffProposedStartNToday.workingDay < 11) {\n              this.errorMsg = `<Major> permits require and advance notice period of at least 10 working days. Only progress with submission if you have pre-approval from the HA. Alternatively, please update your ${propsedStartDateFormatted} prior to submitting your permit.   `;\n              this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n              return false;\n            }\n          }\n\n          if (this.dayDiffProposedStartNProposedEnd.workingDay < 11) {\n            this.errorMsg = `<Major> permits are applicable to works which are planned for more than 10 days. Please amend your proposed start and end dates or select the appropriate permit type`;\n            this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n            return false;\n          }\n\n          break;\n\n        case WORK_CATEGORY_KEY_VALUE_CONSTANTS.MINOR_KEY.toString():\n          if (!((_d = (_c = this.wgFormGroup.controls) === null || _c === void 0 ? void 0 : _c.hasEarlyApproval) === null || _d === void 0 ? void 0 : _d.value)) {\n            if (this.dayDiffProposedStartNToday.workingDay < 3) {\n              this.errorMsg = `<Minor> permits require an advanced notice period of at least 3 working days. Only progress with submission if you have pre-approval from the HA. Alternatively, please update your ${propsedStartDateFormatted} prior to submitting your permit. `;\n              this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n              return false;\n            }\n          }\n\n          if (this.dayDiffProposedStartNProposedEnd.workingDay > 3) {\n            this.errorMsg = `<Minor> permits are applicable to works which are planned for three working days or less. Please amend your proposed start and end dates or select the appropriate permit type`;\n            this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n            return false;\n          }\n\n          break;\n\n        case WORK_CATEGORY_KEY_VALUE_CONSTANTS.STANDARD_KEY.toString():\n          if (!((_f = (_e = this.wgFormGroup.controls) === null || _e === void 0 ? void 0 : _e.hasEarlyApproval) === null || _f === void 0 ? void 0 : _f.value)) {\n            if (this.dayDiffProposedStartNToday.workingDay < 11) {\n              this.errorMsg = `<Standard> permits require an advanced notice period of at least 10 working days. Only progress with submission if you have pre-approval from the HA. Alternatively, please update your ${propsedStartDateFormatted} prior to submitting your permit. `;\n              this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n              return false;\n            }\n          }\n\n          if (!(this.dayDiffProposedStartNProposedEnd.workingDay > 3 && this.dayDiffProposedStartNProposedEnd.workingDay < 11)) {\n            this.errorMsg = `<Standard> permits are applicable to works which are planned for between 4 and 10 working days. Please amend your proposed start and end dates or select the appropriate permit type`;\n            this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n            return false;\n          }\n\n          break;\n\n        case WORK_CATEGORY_KEY_VALUE_CONSTANTS.IMMIDIATE_EMERGENCY_KEY.toString():\n          if (this.dayDiffProposedStartNToday.workingDay == 0) {\n            this.errorMsg = `You are about to raise an emergency permit with the HA. Please ensure that the HA is aware of nature of the emergency. Works must commence within 2 hours of submitting this permit`;\n            this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n            return false;\n          }\n\n          break;\n\n        case WORK_CATEGORY_KEY_VALUE_CONSTANTS.IMMIDIATE_MAJOR_KEY.toString():\n          if (this.dayDiffProposedStartNToday.workingDay == 0) {\n            this.errorMsg = `Works must commence within 2 hours of submitting this permit`;\n            this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n            return false;\n          }\n\n          break;\n\n        case WORK_CATEGORY_KEY_VALUE_CONSTANTS.MAJOR_PAA_KEY.toString():\n          if (!((_h = (_g = this.wgFormGroup.controls) === null || _g === void 0 ? void 0 : _g.hasEarlyApproval) === null || _h === void 0 ? void 0 : _h.value)) {\n            if (this.dayDiffProposedStartNToday.workingDay == 0) {\n              this.errorMsg = `<Major(PAA)> permits require an advanced notice period of at least 30 working days. Only progress with submission if you have pre-approval from the HA. Alternatively, please update your ${propsedStartDateFormatted} prior to submitting your permit.   `;\n              this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n              return false;\n            }\n          }\n\n          if (this.dayDiffProposedStartNProposedEnd.workingDay < 11) {\n            this.errorMsg = `<Major(PAA)> permits are applicable to works which are planned for more than 11 working days. Please amend your proposed start and end dates or select the appropriate permit type`;\n            this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n            return false;\n          }\n\n          break;\n      }\n\n      if (this.wgFormGroup.controls.ttroRequired.value && this.wgFormGroup.controls.worksType.value != WORK_TYPE.MAJOR) {\n        this.errorMsg = `TTRO can be requested for major permits only. Amend your proposed start and end dates and select the appropriate permit type.`;\n        this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n        return false;\n      }\n\n      return true; // })\n      // let dayDiffProposedStartNToday = Math.abs(this.calculateDiff(proposedStartDate, new Date()));\n      // let dayDiffProposedStartNProposedEnd = Math.abs(this.calculateDiff(proposedStartDate, proposedEndDate));\n      // let propsedStartDateFormatted = 'Proposed Start Date';//proposedStartDate;\n      // let today: any = new Date();\n    }\n\n    calculateDiff(startDate, endDate) {\n      new UniqueSelectionDispatcher();\n      let today = new Date().toUTCString();\n      let dayDiffProposedStartNTodayPromise = this.getDays(today, startDate);\n      let dayDiffProposedStartNProposedEndPromise = this.getDays(startDate, endDate);\n      dayDiffProposedStartNTodayPromise.then(r => {\n        this.dayDiffProposedStartNToday.workingDay = r === null || r === void 0 ? void 0 : r.working_days;\n        this.dayDiffProposedStartNToday.calendarDays = r === null || r === void 0 ? void 0 : r.calendar_days;\n      });\n      dayDiffProposedStartNProposedEndPromise.then(r => {\n        this.dayDiffProposedStartNProposedEnd.workingDay = r === null || r === void 0 ? void 0 : r.working_days;\n        this.dayDiffProposedStartNProposedEnd.calendarDays = r === null || r === void 0 ? void 0 : r.calendar_days;\n      });\n      return Promise.all([dayDiffProposedStartNTodayPromise, dayDiffProposedStartNProposedEndPromise]);\n    }\n\n    getDays(startDate, endDate) {\n      // var date1: any = new Date(startDate);\n      // var date2: any = new Date(endDate);\n      // var diffDays: any = Math.floor((date2 - date1) / (1000 * 60 * 60 * 24));\n      let dateFormat = 'yyyy-MM-dd'; // return diffDays;\n\n      let request = {\n        startDate: this.datePipe.transform(startDate, dateFormat),\n        endDate: this.datePipe.transform(endDate, dateFormat)\n      };\n      let url = '/api/v1/calendar/get-days';\n      return new Promise((resolve, reject) => {\n        this.wgAPIMethodGet(url, request).then(response => {\n          if (response) {\n            resolve(response);\n          } else {\n            reject(response);\n          }\n        });\n      });\n    }\n\n    onCollabroativeChkBoxChange(event) {\n      if (event.checked) {\n        this.wgFormGroup.get('collaborativeDetails').enable();\n        this.wgFormGroup.get('collaborativeWork').enable();\n        this.wgFormGroup.get('collaborativeType').enable();\n      } else {\n        // this.wgFormGroup.set('collaborativeDetails')=\"\";\n        this.wgFormGroup.controls.collaborativeDetails.setValue(null);\n        this.wgFormGroup.controls.collaborativeWork.setValue(null);\n        this.wgFormGroup.controls.collaborativeType.setValue(null);\n        this.wgFormGroup.get('collaborativeDetails').disable();\n        this.wgFormGroup.get('collaborativeWork').disable();\n        this.wgFormGroup.get('collaborativeType').disable();\n      }\n    }\n\n    onTrafficManagementPlanChkBoxChange(event) {\n      this.trafficManagementPlanChkBoxChange.emit(event.checked);\n    }\n\n    onTTROChkBoxChange(event) {\n      this.tTROChkBoxChange.emit(event.checked);\n    }\n    /* onHighwayAuthorityApprovalChkBoxChange() {\n      if (this.wgFormGroup.controls.hasHighwayAuthApproval.value) {\n           this.wgFormGroup.get('highwayAuthApprovalAuth').enable();\n        this.wgFormGroup.get('highwayAuthApprovalAuth').setValidators([Validators.minLength(1), Validators.required]);\n        this.wgFormGroup.get('highwayAuthApprovalAuth').updateValueAndValidity();\n           this.wgFormGroup.get('highwayAuthApprovalDetails').enable();\n        this.wgFormGroup.get('highwayAuthApprovalDetails').setValidators([Validators.minLength(1), Validators.required]);\n        this.wgFormGroup.get('highwayAuthApprovalDetails').updateValueAndValidity();\n         } else {\n           this.wgFormGroup.get('highwayAuthApprovalAuth').disable();\n        this.wgFormGroup.get('highwayAuthApprovalAuth').clearValidators();\n        this.wgFormGroup.controls.highwayAuthApprovalAuth.setValue('');\n        this.wgFormGroup.get('highwayAuthApprovalAuth').updateValueAndValidity();\n           this.wgFormGroup.get('highwayAuthApprovalDetails').disable();\n        this.wgFormGroup.get('highwayAuthApprovalDetails').clearValidators();\n        this.wgFormGroup.controls.highwayAuthApprovalDetails.setValue('');\n        this.wgFormGroup.get('highwayAuthApprovalDetails').updateValueAndValidity();\n         }\n    } */\n\n\n    onEarlyStartApprovalChkBoxChange() {\n      if (this.wgFormGroup.controls.hasEarlyApproval.value) {\n        this.wgFormGroup.get('earlyStartApprovedBy').enable();\n        this.wgFormGroup.get('earlyStartApprovedBy').setValidators([Validators.minLength(1), Validators.required]);\n        this.wgFormGroup.get('earlyStartApprovedBy').updateValueAndValidity();\n        this.wgFormGroup.get('earlyStartApprovalDetails').enable();\n        this.wgFormGroup.get('earlyStartApprovalDetails').setValidators([Validators.minLength(1), Validators.required]);\n        this.wgFormGroup.get('earlyStartApprovalDetails').updateValueAndValidity();\n        this.wgFormGroup.get('earlyStartReason').enable();\n        this.wgFormGroup.get('earlyStartReason').setValidators([Validators.minLength(1), Validators.required]);\n        this.wgFormGroup.get('earlyStartReason').updateValueAndValidity();\n      } else {\n        this.wgFormGroup.get('earlyStartApprovedBy').disable();\n        this.wgFormGroup.get('earlyStartApprovedBy').clearValidators();\n        this.wgFormGroup.controls.earlyStartApprovedBy.setValue('');\n        this.wgFormGroup.get('earlyStartApprovedBy').updateValueAndValidity();\n        this.wgFormGroup.get('earlyStartApprovalDetails').disable();\n        this.wgFormGroup.get('earlyStartApprovalDetails').clearValidators();\n        this.wgFormGroup.controls.earlyStartApprovalDetails.setValue('');\n        this.wgFormGroup.get('earlyStartApprovalDetails').updateValueAndValidity();\n        this.wgFormGroup.get('earlyStartReason').disable();\n        this.wgFormGroup.get('earlyStartReason').clearValidators();\n        this.wgFormGroup.controls.earlyStartReason.setValue('');\n        this.wgFormGroup.get('earlyStartReason').updateValueAndValidity();\n      }\n    }\n\n    onWorkStreamSelectionChange() {\n      this.setWorkIdentifier();\n      this.wgFormGroup.controls.worksDescriptionSelect.setValue(null);\n    }\n\n    setWorkIdentifier() {\n      let wsid = this.wgFormGroup.controls.workStream.value;\n      let orgId = this.wgFormGroup.controls.promoterOrganisation.value;\n\n      if (wsid && orgId) {\n        this.arrWorkIdentifier = this._appRepoHelperService.getWorkIdentifiersByOrg(orgId, wsid);\n      }\n    }\n\n    onOrgSelectionChange() {\n      var _a;\n\n      this.wgFormGroup.controls.workStream.setValue(null);\n      this.wgFormGroup.controls.accountability.setValue(null);\n      this.wgFormGroup.controls.worksDescriptionSelect.setValue(null);\n      let orgId = this.wgFormGroup.controls.promoterOrganisation.value;\n      let promoterPrefix = (_a = this.arrOrganizations.find(o => o.orgId == orgId)) === null || _a === void 0 ? void 0 : _a.promoterPrefix;\n      this.wgFormGroup.controls.promoterPrefix.setValue(promoterPrefix);\n      this.setArrContractor(orgId);\n      this.setArrWorkStream(orgId);\n    }\n\n    setArrContractor(orgId) {\n      if (orgId) {\n        this.arrContractors = this.arrUserAccessContractors.filter(d => d.org_id == orgId);\n      }\n    }\n\n    setArrWorkStream(orgId) {\n      if (orgId) {\n        this.arrWorkStream = this.arrUserAccessWorkStream.filter(d => d.org_id == orgId);\n      }\n    }\n\n    onStartDateChange(event) {\n      this.validateDate();\n    }\n\n    onEndDateChange(event) {\n      this.validateDate();\n    }\n\n    validateDate() {\n      let proposedStartDate = this.wgFormGroup.controls.proposedStartDate.value;\n      let proposedEndDate = this.wgFormGroup.controls.proposedEndDate.value;\n      this.dayDiffProposedStartNProposedEnd = new Days();\n      this.dayDiffProposedStartNToday = new Days();\n      this.setDays();\n      this.errorMsg = '';\n\n      if (proposedStartDate && proposedEndDate) {\n        this.calculateDiff(proposedStartDate, proposedEndDate).then(response => {\n          this.setDays();\n        });\n      }\n    }\n\n    workDescriptionRadioChange(radioBtnValue) {\n      if (radioBtnValue == null) return;\n      this.workDescriptionTextType = radioBtnValue;\n\n      if (this.workDescriptionTextType === this.STANDARD) {\n        this.wgFormGroup.get('worksDescriptionText').disable();\n        this.wgFormGroup.get('worksDescriptionText').clearValidators();\n        this.wgFormGroup.controls.worksDescriptionText.setValue('');\n        this.wgFormGroup.get('worksDescriptionText').updateValueAndValidity();\n\n        if (!this.isdisableallFormControl) {\n          this.wgFormGroup.get('worksDescriptionSelect').enable();\n          this.wgFormGroup.get('worksDescriptionSelect').setValidators(Validators.required);\n          this.wgFormGroup.get('worksDescriptionSelect').updateValueAndValidity();\n        } else {}\n      } else if (this.workDescriptionTextType === this.USER) {\n        this.wgFormGroup.get('worksDescriptionSelect').disable();\n        this.wgFormGroup.get('worksDescriptionSelect').clearValidators();\n        this.wgFormGroup.controls.worksDescriptionSelect.setValue('');\n        this.wgFormGroup.get('worksDescriptionSelect').updateValueAndValidity();\n\n        if (!this.isdisableallFormControl) {\n          this.wgFormGroup.get('worksDescriptionText').enable();\n          this.wgFormGroup.get('worksDescriptionText').setValidators(Validators.required);\n          this.wgFormGroup.get('worksDescriptionText').updateValueAndValidity();\n        }\n      }\n    }\n\n    validateRoadClosureType() {\n      if (this.wgFormGroup.controls.trafficManagementRequired.value !== 'road_closure' || this.wgFormGroup.controls.trafficManagementRequired.value === 'road_closure' && (this.wgFormGroup.controls.worksType.value === 'major' || this.wgFormGroup.controls.worksType.value === 'paa')) return true;\n      this.errorMsg = `Road closures (Traffic Management)  are only applicable to Major (including PAA) permits. Please select the appropriate permit type`;\n      this.emitEvent(PermitConfigModel.COMP_TO_CALLER_SHOW_ERROR, this.errorMsg);\n      return false;\n    }\n\n  }\n\n  CreatePermitFormComponent.ɵfac = function CreatePermitFormComponent_Factory(t) {\n    return new (t || CreatePermitFormComponent)(i0.ɵɵdirectiveInject(i1.ServerApiInterfaceServiceService), i0.ɵɵdirectiveInject(i2.AppRepoHelperService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.ValidationService), i0.ɵɵdirectiveInject(i6.DatePipe));\n  };\n\n  CreatePermitFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreatePermitFormComponent,\n    selectors: [[\"app-create-permit-form\"]],\n    viewQuery: function CreatePermitFormComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(_c2, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.startDatePicker = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.endDatePicker = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formComponent = _t.first);\n      }\n    },\n    inputs: {\n      dataModel: \"dataModel\",\n      configModel: \"configModel\"\n    },\n    outputs: {\n      trafficManagementPlanChkBoxChange: \"trafficManagementPlanChkBoxChange\",\n      tTROChkBoxChange: \"tTROChkBoxChange\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    ngContentSelectors: _c4,\n    decls: 3,\n    vars: 1,\n    consts: [[\"appInvalidControlScroll\", \"\", 3, \"formGroup\", 4, \"ngIf\"], [\"appInvalidControlScroll\", \"\", 3, \"formGroup\"], [\"formComponent\", \"ngForm\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", \"fxLayoutGap\", \"20px\"], [\"appearance\", \"outline\", \"fxFlex\", \"25\"], [\"matInput\", \"\", \"placeholder\", \"Enter Promoter Prefix*\", \"autocomplete\", \"off\", \"maxlength\", \"25\", \"formControlName\", \"promoterPrefix\"], [\"matInput\", \"\", \"placeholder\", \"Enter Permit Reference\", \"autocomplete\", \"off\", \"maxlength\", \"25\", \"formControlName\", \"permitReference\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Enter Works Reference Number\", \"autocomplete\", \"off\", \"maxlength\", \"50\", \"formControlName\", \"worksReferenceNumber\"], [\"matInput\", \"\", \"placeholder\", \"Enter Project Reference Number\", \"autocomplete\", \"off\", \"maxlength\", \"10\", \"formControlName\", \"projectReferenceNumber\", \"pattern\", \"^MUA.*$\"], [4, \"ngFor\", \"ngForOf\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"start center\", \"fxLayoutGap\", \"20px\"], [\"appearance\", \"outline\", \"fxFlex\", \"0 1 calc(25%)\"], [\"formControlName\", \"promoterOrganisation\", 3, \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"required\", \"\", \"formControlName\", \"workStream\", 3, \"selectionChange\"], [1, \"is-invalid\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"required\", \"\", \"formControlName\", \"accountability\"], [\"appearance\", \"outline\", \"fxFlex\", \"0 1 calc(25%)\", 4, \"ngIf\"], [\"appearance\", \"outline\", \"fxFlex\", \"33\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Enter Contact Name\", \"autocomplete\", \"off\", \"maxlength\", \"100\", \"formControlName\", \"contact\"], [\"matInput\", \"\", \"required\", \"\", \"type\", \"text\", \"placeholder\", \"Enter Contact Number\", \"id\", \"txtContactNo\", \"oninput\", \"javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);\", \"autocomplete\", \"off\", \"maxlength\", \"15\", \"formControlName\", \"contactNumber\"], [\"required\", \"\", \"formControlName\", \"worksType\", 3, \"selectionChange\"], [\"fxFlex\", \"0 1 calc(50% + 20px)\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"start center\"], [3, \"disabled\", \"value\", \"checked\", \"change\"], [\"appearance\", \"outline\"], [\"required\", \"\", \"formControlName\", \"worksDescriptionSelect\"], [\"required\", \"\", \"matInput\", \"\", \"rows\", \"1\", \"placeholder\", \"Enter Works Description\", \"autocomplete\", \"off\", \"maxlength\", \"100\", \"formControlName\", \"worksDescriptionText\"], [\"matInput\", \"\", \"autocomplete\", \"off\", \"required\", \"\", \"placeholder\", \"Choose a date\", 3, \"ngxMatDatetimePicker\", \"min\", \"formControl\", \"click\", \"dateChange\"], [\"matSuffix\", \"\", 3, \"for\"], [3, \"showSeconds\", \"stepHour\", \"stepMinute\", \"stepSecond\", \"enableMeridian\"], [\"startDatePicker\", \"\"], [\"endDatePicker\", \"\"], [\"matInput\", \"\", \"placeholder\", \"Working Days\", \"autocomplete\", \"off\", \"formControlName\", \"workingDays\"], [\"required\", \"\", \"formControlName\", \"activityType\"], [\"fxFlex\", \"25\", 1, \"custom-checkbox-collabrative\"], [\"formControlName\", \"collaborativeWorking\", 3, \"change\"], [\"matInput\", \"\", \"placeholder\", \"Collaborative Details\", \"formControlName\", \"collaborativeDetails\"], [\"matInput\", \"\", \"placeholder\", \"Collaborative Work\", \"formControlName\", \"collaborativeWork\"], [\"formControlName\", \"collaborativeType\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between start\", \"fxLayoutGap\", \"20px\"], [\"fxFlex\", \"40\", 1, \"map-wrapper\"], [1, \"action-checkbox-container\"], [\"fxFlex\", \"100\", 1, \"custom-checkbox\"], [\"formControlName\", \"trafficManagementPlan\", 3, \"change\"], [\"fxFlex\", \"60\"], [\"appearance\", \"outline\", \"fxFlex\", \"100\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Enter Works Location Description\", \"autocomplete\", \"off\", \"maxlength\", \"100\", \"formControlName\", \"worksLocationDescription\"], [\"appearance\", \"outline\", \"fxFlex\", \"50\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Enter Location details\", \"autocomplete\", \"off\", \"maxlength\", \"500\", \"formControlName\", \"locationDetails\"], [\"required\", \"\", \"formControlName\", \"highwayAuthority\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Enter Post Code\", \"autocomplete\", \"off\", \"maxlength\", \"20\", \"formControlName\", \"postCode\"], [\"matInput\", \"\", \"required\", \"\", \"placeholder\", \"Enter USRN\", \"autocomplete\", \"off\", \"maxlength\", \"20\", \"formControlName\", \"usrn\"], [\"required\", \"\", \"formControlName\", \"roadType\"], [\"required\", \"\", \"formControlName\", \"footwayClosure\"], [\"required\", \"\", \"formControlName\", \"trafficManagementRequired\"], [\"required\", \"\", \"multiple\", \"\", \"formControlName\", \"locationTypes\"], [\"formControlName\", \"trafficSensitivity\"], [\"formControlName\", \"excavationRequired\"], [\"formControlName\", \"isLaneRentalApplicable\"], [\"fxFlex\", \"50\", 1, \"custom-checkbox\"], [\"formControlName\", \"isCovid19Response\"], [\"formControlName\", \"environmentalHealth\"], [\"fxFlex\", \"100\", 1, \"custom-checkbox\", \"mt-4\"], [\"formControlName\", \"ttroRequired\", 3, \"change\"], [\"fxFlex\", \"50\"], [\"fxFlex\", \"100\", 1, \"custom-checkbox-extra-padding\"], [\"formControlName\", \"hasEarlyApproval\", 3, \"change\"], [\"matInput\", \"\", \"placeholder\", \"Early Start Reason\", \"autocomplete\", \"off\", \"formControlName\", \"earlyStartReason\"], [\"matInput\", \"\", \"placeholder\", \"Pre approved by\", \"autocomplete\", \"off\", \"formControlName\", \"earlyStartApprovedBy\"], [\"matInput\", \"\", \"placeholder\", \"Pre approved Details\", \"autocomplete\", \"off\", \"formControlName\", \"earlyStartApprovalDetails\"], [4, \"ngIf\"], [3, \"value\"], [1, \"invalid-feedback\"], [\"matInput\", \"\", \"placeholder\", \"Enter Cost\", \"autocomplete\", \"off\", \"formControlName\", \"cost\"]],\n    template: function CreatePermitFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵprojectionDef(_c3);\n        i0.ɵɵelement(0, \"hr\");\n        i0.ɵɵtemplate(1, CreatePermitFormComponent_form_1_Template, 268, 42, \"form\", 0);\n        i0.ɵɵelement(2, \"div\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.wgFormGroup);\n      }\n    },\n    directives: [i6.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i7.InvalidControlScrollDirective, i4.FormGroupDirective, i8.DefaultLayoutDirective, i8.DefaultLayoutAlignDirective, i8.DefaultLayoutGapDirective, i9.MatFormField, i8.DefaultFlexDirective, i9.MatLabel, i10.MatInput, i4.DefaultValueAccessor, i4.MaxLengthValidator, i4.NgControlStatus, i4.FormControlName, i9.MatError, i4.RequiredValidator, i4.PatternValidator, i6.NgForOf, i11.MatSelect, i12.MatRadioButton, i13.NgxMatDatetimeInput, i4.FormControlDirective, i14.MatDatepickerToggle, i9.MatSuffix, i13.NgxMatDatetimePicker, i15.MatCheckbox, i16.MatOption],\n    pipes: [i6.KeyValuePipe],\n    styles: [\".map-wrapper[_ngcontent-%COMP%]{min-width:500px;min-height:300px;border:1px solid beige;border-radius:4px}.mat-checkbox-layout[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:30px}.action-checkbox-container[_ngcontent-%COMP%]{margin-top:27px}#txtContactNo[_ngcontent-%COMP%]::-webkit-inner-spin-button, #txtContactNo[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0}\"]\n  });\n  return CreatePermitFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}