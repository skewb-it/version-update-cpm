{"ast":null,"code":"import { CreatePermitSummuryConfigModel, CreatePermitSummuryDataModel } from '../../widget-app/create-permit-summary/create-permit-summury.model';\nimport { ElginMapConfigModel, ElginMapDataModel, GeometryDataModel } from '../../widget-app/elginmap/elginmap-model';\nimport { FileUploadConfigModel, FileUploadDataModel } from '../../widget-app/file-upload/file-upload-model';\nimport { FormModeConstant, WidgetConstants } from 'src/app/constants/widget-constants';\nimport { GLOBAL_PARAM_KEY, NAVIGATION_DATA } from 'src/app/app-constants';\nimport { GLOBAL_PERSISTANT_DATA, MASTER_DATA_DOMAIN, PERMIT_GEOMETRY_TYPE, PRODUCT_SERVICES } from 'src/app/constants/app-repo.constants';\nimport { GlobalFilterConfigModel, GlobalFilterDataModel } from '../../widget-app/global-filter/global-filter.model';\nimport { MASTER_DATA, PERMIT_ACTIONS_CONFIG } from 'src/app/constants/db.constants';\nimport { MapPageDataDataModel, NSGDetails, PermitConditionsPageModel, PermitFormPageData, PermitNavigationDataModel } from './permit-listing.model';\nimport { PermitConditionsConfigModel, PermitConditionsItem, PermitConditionsModel } from '../../widget-app/permit-conditions-tab/permit-conditions-tab.model';\nimport { PermitConfigModel, PermitDataModel } from '../../widget-app/create-permit-form/permit.model';\nimport { PermitConfirmationConfigModel, PermitConfirmationDataModel } from '../../widget-app/create-permit-confirmation/create-permit-confirmation.model';\nimport { PermitDrawMapConfigModel, PermitDrawMapDataModel, PermitDrawMapDetails } from '../../widget-app/create-permit-draw-map/create-permit-draw-map.model';\nimport { PermitFilterConfigModel, PermitFilterDataModel } from '../../widget-app/permit-filter/permit-filter.model';\nimport { PermitImagesAndFilesConfigModel, PermitImagesAndFilesModel } from '../../widget-app/permit-images-and-files-tab/permit-images-and-files-tab.model';\nimport { PermitListConfigModel, PermitListDataModel, PermitListRequestModel } from '../../widget-app/permit-list/permit-list.model';\nimport { PermitQuickFilterConfigModel, PermitQuickFilterDataModel } from '../../widget-app/permit-quick-filter/permit-quick-filter.model';\nimport { BulkUploadComponent } from '../../widget-app/bulk-upload/bulk-upload.component';\nimport { CreatePermitDrawMapComponent } from '../../widget-app/create-permit-draw-map/create-permit-draw-map.component';\nimport { CreatePermitFormComponent } from '../../widget-app/create-permit-form/create-permit-form.component';\nimport { CreatePermitSummaryComponent } from '../../widget-app/create-permit-summary/create-permit-summary.component';\nimport { DialogComponent } from '../../shared/dialog/dialog.component';\nimport { DialogModel } from '../../shared/dialog/dialog-model';\nimport { ElginMapUtility } from '../../widget-app/elginmap/elginmap-utility';\nimport { ElginmapComponent } from '../../widget-app/elginmap/elginmap.component';\nimport { FILTER_TYPE } from 'src/app/app-constants';\nimport { GlobalFilterComponent } from '../../widget-app/global-filter/global-filter.component';\nimport { PermitConditionsTabComponent } from '../../widget-app/permit-conditions-tab/permit-conditions-tab.component';\nimport { PermitFilterComponent } from '../../widget-app/permit-filter/permit-filter.component';\nimport { PermitImagesAndFilesTabComponent } from '../../widget-app/permit-images-and-files-tab/permit-images-and-files-tab.component';\nimport { PermitListComponent } from '../../widget-app/permit-list/permit-list.component';\nimport { PermitOverviewModel } from '../../widget-app/permit-overview-tab/permit-overview-tab.model';\nimport { PermitQuickFilterComponent } from '../../widget-app/permit-quick-filter/permit-quick-filter.component';\nimport { WidgetPageBase } from 'src/app/utility/widget/widget-utility/widget-page-base';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"src/app/services/server-api-interface-service.service\";\nimport * as i3 from \"src/app/services/event-action.service\";\nimport * as i4 from \"src/app/services/session-storage.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"ngx-spinner\";\nimport * as i7 from \"src/app/services/app-repo-helper.service\";\nimport * as i8 from \"src/app/services/notification.service\";\nimport * as i9 from \"src/app/services/app-repo.service\";\nimport * as i10 from \"@angular/flex-layout/flex\";\nimport * as i11 from \"../../widget-app/global-filter/global-filter.component\";\nimport * as i12 from \"@angular/common\";\nimport * as i13 from \"../../widget-app/permit-quick-filter/permit-quick-filter.component\";\nimport * as i14 from \"../../widget-app/permit-filter/permit-filter.component\";\nimport * as i15 from \"../../widget-app/permit-list/permit-list.component\";\nimport * as i16 from \"../../shared/dialog/dialog.component\";\nimport * as i17 from \"../../widget-app/file-upload/file-upload.component\";\nimport * as i18 from \"primeng/dialog\";\nimport * as i19 from \"primeng/api\";\nimport * as i20 from \"@angular/material/icon\";\nimport * as i21 from \"@angular/material/button\";\nimport * as i22 from \"../../widget-app/create-permit-draw-map/create-permit-draw-map.component\";\nimport * as i23 from \"../../widget-app/elginmap/elginmap.component\";\nimport * as i24 from \"../../widget-app/create-permit-form/create-permit-form.component\";\nimport * as i25 from \"../../widget-app/permit-conditions-tab/permit-conditions-tab.component\";\nimport * as i26 from \"../../widget-app/permit-images-and-files-tab/permit-images-and-files-tab.component\";\nimport * as i27 from \"../../widget-app/create-permit-summary/create-permit-summary.component\";\nimport * as i28 from \"../../widget-app/create-permit-confirmation/create-permit-confirmation.component\";\nimport * as i29 from \"@angular/flex-layout/extended\";\nimport * as i30 from \"../../../directive/helper-text-popover/helper-text-popover.directive\";\n\nfunction PermitListingComponent_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.openDialog();\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"add_box\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"Create Permit \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PermitListingComponent_div_24_app_create_permit_draw_map_1_app_elginmap_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-elginmap\", 39);\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"dataModel\", ctx_r18.elginMapDataModel)(\"configModel\", ctx_r18.elginMapConfigModel);\n  }\n}\n\nfunction PermitListingComponent_div_24_app_create_permit_draw_map_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-create-permit-draw-map\", 4);\n    i0.ɵɵelementContainerStart(1, 37);\n    i0.ɵɵtemplate(2, PermitListingComponent_div_24_app_create_permit_draw_map_1_app_elginmap_2_Template, 1, 2, \"app-elginmap\", 38);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r17.permitDrawMapDataModel)(\"configModel\", ctx_r17.permitDrawMapConfigModel);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.createPermitStepNo == 1);\n  }\n}\n\nfunction PermitListingComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PermitListingComponent_div_24_app_create_permit_draw_map_1_Template, 3, 3, \"app-create-permit-draw-map\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.dialogModel.visible);\n  }\n}\n\nfunction PermitListingComponent_div_25_app_create_permit_form_1_app_elginmap_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-elginmap\", 44);\n  }\n\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"dataModel\", ctx_r20.elginMapDataModel)(\"configModel\", ctx_r20.elginMapConfigModel);\n  }\n}\n\nfunction PermitListingComponent_div_25_app_create_permit_form_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-create-permit-form\", 41);\n    i0.ɵɵlistener(\"trafficManagementPlanChkBoxChange\", function PermitListingComponent_div_25_app_create_permit_form_1_Template_app_create_permit_form_trafficManagementPlanChkBoxChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return ctx_r21.onTrafficManagementPlanChkBoxChange($event);\n    })(\"tTROChkBoxChange\", function PermitListingComponent_div_25_app_create_permit_form_1_Template_app_create_permit_form_tTROChkBoxChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return ctx_r23.onTTROChkBoxChange($event);\n    });\n    i0.ɵɵelementContainerStart(1, 42);\n    i0.ɵɵtemplate(2, PermitListingComponent_div_25_app_create_permit_form_1_app_elginmap_2_Template, 1, 2, \"app-elginmap\", 43);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r19.createPermitFormDataModel)(\"configModel\", ctx_r19.createPermitFormConfigModel);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.createPermitStepNo == 2);\n  }\n}\n\nfunction PermitListingComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PermitListingComponent_div_25_app_create_permit_form_1_Template, 3, 3, \"app-create-permit-form\", 40);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.dialogModel.visible);\n  }\n}\n\nfunction PermitListingComponent_div_26_app_permit_conditions_tab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-permit-conditions-tab\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r24.permitConditionsDataModel)(\"configModel\", ctx_r24.permitConditionsConfigModel);\n  }\n}\n\nfunction PermitListingComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PermitListingComponent_div_26_app_permit_conditions_tab_1_Template, 1, 2, \"app-permit-conditions-tab\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.dialogModel.visible);\n  }\n}\n\nfunction PermitListingComponent_div_27_app_permit_images_and_files_tab_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-permit-images-and-files-tab\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r25.permitImagesAndFilesDataModel)(\"configModel\", ctx_r25.permitImagesAndFilesConfigModel);\n  }\n}\n\nfunction PermitListingComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PermitListingComponent_div_27_app_permit_images_and_files_tab_1_Template, 1, 2, \"app-permit-images-and-files-tab\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.dialogModel.visible);\n  }\n}\n\nfunction PermitListingComponent_div_28_app_create_permit_summary_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-create-permit-summary\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r26.summaryDataModel)(\"configModel\", ctx_r26.summaryConfigModel);\n  }\n}\n\nfunction PermitListingComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PermitListingComponent_div_28_app_create_permit_summary_1_Template, 1, 2, \"app-create-permit-summary\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.dialogModel.visible);\n  }\n}\n\nfunction PermitListingComponent_div_29_app_create_permit_confirmation_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-create-permit-confirmation\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r27 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"dataModel\", ctx_r27.permitConfirmationDataModel)(\"configModel\", ctx_r27.permitConfirmationConfigModel);\n  }\n}\n\nfunction PermitListingComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PermitListingComponent_div_29_app_create_permit_confirmation_1_Template, 1, 2, \"app-create-permit-confirmation\", 36);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.dialogModel.visible);\n  }\n}\n\nfunction PermitListingComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Something went wrong..!!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PermitListingComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 45);\n    i0.ɵɵelementStart(1, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_34_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.nextButtonDrawMapClick();\n    });\n    i0.ɵɵtext(2, \"Next\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"opacity\": a0\n  };\n};\n\nfunction PermitListingComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 47);\n    i0.ɵɵelementStart(1, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_35_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return ctx_r30.backButtonPermitFormClick();\n    });\n    i0.ɵɵtext(2, \"Go Back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 49);\n    i0.ɵɵelementStart(4, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_35_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r32 = i0.ɵɵnextContext();\n      return ctx_r32.openOneNetwork();\n    });\n    i0.ɵɵtext(5, \"Create Traffic Management Plan\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_35_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.openOneNetwork();\n    });\n    i0.ɵɵtext(7, \"Create TTRO\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_35_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r34 = i0.ɵɵnextContext();\n      return ctx_r34.nextButtonPermitFormClick();\n    });\n    i0.ɵɵtext(9, \"Next\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", ctx_r9.isCreateTrafficManagementPlanBtnDisable)(\"ngStyle\", i0.ɵɵpureFunction1(4, _c0, ctx_r9.isCreateTrafficManagementPlanBtnDisable ? \"0.5\" : \"1\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r9.isCreateTTROBtnDisable)(\"ngStyle\", i0.ɵɵpureFunction1(6, _c0, ctx_r9.isCreateTTROBtnDisable ? \"0.5\" : \"1\"));\n  }\n}\n\nfunction PermitListingComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵelementStart(1, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_36_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return ctx_r35.backButtonConditionClick();\n    });\n    i0.ɵɵtext(2, \"Go Back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 49);\n    i0.ɵɵelementStart(4, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_36_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return ctx_r37.savePermitAsDraft();\n    });\n    i0.ɵɵtext(5, \"Save As Draft\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 46);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_36_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return ctx_r38.nextButtonConditionClick();\n    });\n    i0.ɵɵtext(7, \"Next\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PermitListingComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵelementStart(1, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_37_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return ctx_r39.backButtonUploadDocClick();\n    });\n    i0.ɵɵtext(2, \"Go Back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_37_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r40);\n      const ctx_r41 = i0.ɵɵnextContext();\n      return ctx_r41.submitPermit();\n    });\n    i0.ɵɵtext(4, \"Review Changes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PermitListingComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r43 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 51);\n    i0.ɵɵelementStart(1, \"button\", 48);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_38_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r42 = i0.ɵɵnextContext();\n      return ctx_r42.backButtonConfirmSubmitClick();\n    });\n    i0.ɵɵtext(2, \"Go Back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 54);\n    i0.ɵɵelementStart(4, \"div\", 54);\n    i0.ɵɵelementStart(5, \"p\", 55);\n    i0.ɵɵtext(6, \"Are you sure you want to confirm?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 56);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_38_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r44 = i0.ɵɵnextContext();\n      return ctx_r44.permitConfirm();\n    });\n    i0.ɵɵtext(8, \"Confirm\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_38_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r45 = i0.ɵɵnextContext();\n      return ctx_r45.submissionConfirmSavePermitAsDraft();\n    });\n    i0.ɵɵtext(10, \"Save As Draft\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"helperTextData\", ctx_r12.getHelpTextData());\n  }\n}\n\nfunction PermitListingComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r47 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 57);\n    i0.ɵɵelementStart(1, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_39_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r47);\n      const ctx_r46 = i0.ɵɵnextContext();\n      return ctx_r46.onViewClick();\n    });\n    i0.ɵɵtext(2, \"View Permit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function PermitListingComponent_div_39_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r47);\n      const ctx_r48 = i0.ɵɵnextContext();\n      return ctx_r48.onViewPermitListClick();\n    });\n    i0.ɵɵtext(4, \"View List\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PermitListingComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\");\n  }\n}\n\nconst _c1 = function () {\n  return {\n    width: \"800px\",\n    minWidth: \"700px\",\n    \"text-align\": \"center\",\n    \"font-size\": \"15px\"\n  };\n}; // container/page/parent\n\n\nexport let PermitListingComponent = /*#__PURE__*/(() => {\n  class PermitListingComponent extends WidgetPageBase {\n    constructor(dialog, _serverApi, _eventActionServiceBase, _sessionStorageService, _router, _spinner, changeDetector, _appRepoHelperService, _serverApiBase, _notificationService, _eventActionService, _appRepoService) {\n      super(_serverApi, _eventActionServiceBase, _sessionStorageService, _router, _spinner);\n      this.dialog = dialog;\n      this._serverApi = _serverApi;\n      this._eventActionServiceBase = _eventActionServiceBase;\n      this._sessionStorageService = _sessionStorageService;\n      this._router = _router;\n      this._spinner = _spinner;\n      this.changeDetector = changeDetector;\n      this._appRepoHelperService = _appRepoHelperService;\n      this._serverApiBase = _serverApiBase;\n      this._notificationService = _notificationService;\n      this._eventActionService = _eventActionService;\n      this._appRepoService = _appRepoService;\n      this.display = false;\n      this.errorMsg = '';\n      this.dialogDeleteFileModel = new DialogModel();\n      this.dialogModel = new DialogModel();\n      this.dialogUplaodFileModel = new DialogModel();\n      this.validatePermitStep = 0;\n      this.PERMIT_ACTIONS_CONFIG = PERMIT_ACTIONS_CONFIG;\n      this.createPermitStepNo = 3;\n      this.arrCreatePermitDialogTitle = ['Create Permit - Draw Map', 'Create Permit', 'Create Permit - Select Conditions', 'Upload Images & Files', 'Check Permit Details Before Submission', 'Permit Request Confirmed'];\n      this.arrEditPermitDialogTitle = ['Edit Permit - Draw Map', 'Edit Permit', 'Edit Permit - Select Conditions', 'Upload Images & Files', 'Check Permit Details Before Submission', 'Permit Request Confirmed'];\n      this.isCreatePermitModeCreate = true;\n      this.isCreateTrafficManagementPlanBtnDisable = true;\n      this.isCreateTTROBtnDisable = true;\n      this.permitListDataModel = PermitListDataModel.getInstance();\n      this.permitListConfigModel = PermitListConfigModel.getInstance();\n      this.permitFilterDataModel = PermitFilterDataModel.getInstance();\n      this.permitFilterConfigModel = PermitFilterConfigModel.getInstance();\n      this.elginMapDataModel = ElginMapDataModel.getInstance();\n      this.elginMapConfigModel = ElginMapConfigModel.getInstance();\n      this.permitDrawMapDataModel = PermitDrawMapDataModel.getInstance();\n      this.permitDrawMapConfigModel = PermitDrawMapConfigModel.getInstance();\n      this.createPermitFormConfigModel = PermitConfigModel.getInstance();\n      this.createPermitFormDataModel = PermitDataModel.getInstance();\n      this.summaryDataModel = CreatePermitSummuryDataModel.getInstance();\n      this.summaryConfigModel = CreatePermitSummuryConfigModel.getInstance();\n      this.permitConfirmationDataModel = PermitConfirmationDataModel.getInstance();\n      this.permitConfirmationConfigModel = PermitConfirmationConfigModel.getInstance();\n      this.dialogModel = new DialogModel();\n      this.permitQuickFilterDataModel = PermitQuickFilterDataModel.getInstance();\n      this.permitQuickFilterConfigModel = PermitQuickFilterConfigModel.getInstance();\n      this.permitQuickFilterDataModel = PermitQuickFilterDataModel.getInstance();\n      this.permitQuickFilterConfigModel = PermitQuickFilterConfigModel.getInstance();\n      this.permitConditionsDataModel = PermitConditionsModel.getInstance();\n      this.permitConditionsConfigModel = PermitConditionsConfigModel.getInstance();\n      this.permitImagesAndFilesDataModel = PermitImagesAndFilesModel.getInstance();\n      this.permitImagesAndFilesConfigModel = PermitImagesAndFilesConfigModel.getInstance();\n      this.fileUploadDataModel = FileUploadDataModel.getInstance();\n      this.fileUploadConfigModel = FileUploadConfigModel.getInstance();\n      this.globalFilterDataModel = GlobalFilterDataModel.getInstance();\n      this.globalFilterConfigModel = GlobalFilterConfigModel.getInstance();\n      this.pageInstance = this;\n      this.permitviewdataModel = PermitOverviewModel.getInstance();\n    }\n\n    ngOnInit() {\n      this.bindPermitListDataModel();\n      this.bindPermitListEvents();\n      this.bindPermitFilterDataModel();\n      this.bindPermitFilterEvents();\n      this.bindElginMapDataModel();\n      this.bindElginMapEvents();\n      this.bindCreatePermitFormDataModel();\n      this.bindCreatePermitFormEvents();\n      this.bindSummaryDataModel();\n      this.bindSummaryEvents();\n      this.bindPermitImagesAndFilesDataModel();\n      this.bindPermitImagesAndFilesConfigModel();\n      this.bindFileUploadDataModel();\n      this.bindFileUploadConfigModel();\n      this.bindPermitConfirmationDataModel();\n      this.bindPermitConfirmationConfigModel();\n      this.bindPermitConditionsDataModel();\n      this.bindPermitConditionsConfigModel();\n      this.bindPermitQuickFilterDataModel();\n      this.bindPermitQuickFilterEvents();\n      this.bindPermitConditionsDataModel();\n      this.bindPermitConditionsConfigModel();\n      this.bindGlobalFilterDataModel();\n      this.bindGlobalFilterConfigModel();\n    }\n\n    ngAfterViewInit() {\n      this.setComponentRefMap();\n      this.checkJourney();\n    }\n\n    checkJourney() {\n      if (this._appRepoService.appRepo.appProductCode == PRODUCT_SERVICES.START_STOP_REGISTER_MANAGER_PRODUCT_CODE || this._appRepoService.appRepo.appProductCode == PRODUCT_SERVICES.INSPECTIONS_AND_DEFECTS_MANAGER_PRODUCT_CODE) {\n        let journeyType = this._appRepoService.appRepo.appGlobalPersistantData.get(GLOBAL_PERSISTANT_DATA.JOURNEY);\n\n        if (journeyType != null) {\n          this.checkAndBindJourney(journeyType);\n        } else {\n          this.checkAndBindDynamicFilterData(false);\n        }\n      } else {\n        this.checkAndBindDynamicFilterData(false);\n      }\n    }\n\n    checkAndBindJourney(journeyType) {\n      this.permitListDataModel.apireqdata = new PermitListRequestModel();\n      this.permitListDataModel.journeyType = journeyType;\n      this.permitList.resetPagination();\n      this.checkAndBindDynamicFilterData(true);\n    }\n\n    checkAndBindDynamicFilterData(shouldCompulsoryRefreshList) {\n      let filterGlobalPersistData = this._appRepoService.appRepo.appGlobalPersistantData.get(GLOBAL_PARAM_KEY.APP_FILTER);\n\n      if (filterGlobalPersistData.persistantfilterType == FILTER_TYPE.DYNAMIC_FILTER) {\n        this.permitListDataModel.apireqdata = new PermitListRequestModel();\n        this.permitListDataModel.filterType = FILTER_TYPE.DYNAMIC_FILTER;\n        this.permitListDataModel.apireqdata = Object.assign({}, filterGlobalPersistData.persistantDynamicFilterModel);\n        this.permitList.resetPagination();\n        this.permitListConfigModel.CallerToComp.emit(WidgetConstants.CALLER_TO_COMP_REFRESH_DATA);\n      } else if (shouldCompulsoryRefreshList) {\n        this.permitListConfigModel.CallerToComp.emit(WidgetConstants.CALLER_TO_COMP_REFRESH_DATA);\n      }\n    }\n\n    setComponentRefMap() {\n      this.compRefInstancesMap.set('permitList', this.permitList);\n      this.compRefInstancesMap.set('permitFilter', this.permitListFilter);\n      this.compRefInstancesMap.set('permitQuickFilter', this.permitQuickFilter);\n      this.compRefInstancesMap.set('globalFilterComponent', this.globalFilterComponent);\n    }\n\n    bindPermitListDataModel() {\n      // abstract methid for setGlobalParams\n      super.setGlobalParams(this.permitListDataModel);\n      this.permitListDataModel.columnsToDisplay = ['CollaborativeWorkingFlag', 'PermitRefNumber', 'WorksLocationDescription', 'WorksType', 'CostRisk', 'CustomerRisk', 'TrafficManagement', 'StartDate', 'EndDate', 'PermitStatus', 'WorkStatus', 'tag_matrix', 'actions'];\n      this.permitListDataModel.apiUrls.advanceFilter = \"/api/v1/applications\";\n      this.permitListDataModel.apiUrls.quickFilter = \"/api/v1/applications/quick-filter\";\n      this.permitListDataModel.apiUrls.dynamicFilter = \"/api/v1/applications\";\n    }\n\n    bindPermitListEvents() {\n      let eventActions = [['viewClick', [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_viewClick'\n        }]\n      } // {\n      //   \"action\": \"navigate1\",\n      //   \"params\": {\n      //     \"staticKeys\": [\n      //     ],\n      //     \"eventParamKeys\": [\n      //       {\n      //         \"getKey\": \"ApplicationId\",\n      //         \"setKey\": \"applicationId\"\n      //       },\n      //       {\n      //         \"getKey\": \"PermitRefNumber\",\n      //         \"setKey\": \"permitRefNumber\"\n      //       }\n      //     ],\n      //     \"globalParamKeys\": [\n      //       \"applicationId\"\n      //     ],\n      //     \"location\": {\n      //       \"path\": \"/admin/permit-view\"\n      //     }\n      //   },\n      //   \"eventParamKeys\": \"\"\n      // }\n      ]], ['editPermit', [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_openEditPermitDialog'\n        }]\n      }]], ['deletePermit', [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_onDelete'\n        }]\n      }]]];\n      super.addEventListener(eventActions, this.permitListDataModel, this.permitListConfigModel);\n    }\n\n    bindPermitFilterDataModel() {\n      // abstract methid for setGlobalParams\n      super.setGlobalParams(this.permitListDataModel);\n    }\n\n    bindPermitFilterEvents() {\n      let eventActions = [[WidgetConstants.APPLY_FILTER, [{\n        action: 'applyFilterOnChange',\n        params: [{\n          'page.filterposition': \"'permitFilter'\",\n          'page.gridposition': \"'permitList'\",\n          'page.clearFilter': \"'permitQuickFilter'\",\n          'targ.filterType': FILTER_TYPE.ADVANCE_FILTER\n        }]\n      }]]];\n      super.addEventListener(eventActions, this.permitFilterDataModel, this.permitFilterConfigModel);\n    }\n\n    bindPermitQuickFilterDataModel() {\n      // abstract methid for setGlobalParams\n      super.setGlobalParams(this.permitQuickFilterDataModel);\n      this.permitQuickFilterDataModel.quickFilters = [{\n        filterValue: '_all',\n        label: 'All',\n        count: 0,\n        icon: '',\n        helperTitle: 'All'\n      }, {\n        filterValue: 'Defects',\n        label: 'Defects',\n        count: 0,\n        icon: '',\n        helperTitle: 'Defects'\n      }, {\n        filterValue: 'FPN',\n        label: 'FPN',\n        count: 0,\n        icon: '',\n        helperTitle: 'FPN'\n      }, {\n        filterValue: 'To_Do',\n        label: 'Respond to HA',\n        count: 0,\n        icon: '',\n        helperTitle: 'To Do'\n      }, {\n        filterValue: 'Planning',\n        label: 'Planning',\n        count: 0,\n        icon: '',\n        helperTitle: 'Planning'\n      }, {\n        filterValue: 'PAA_Follow_Up',\n        label: 'PAA Follow Up',\n        count: 0,\n        icon: '',\n        helperTitle: 'Paa Follow Up'\n      }, {\n        filterValue: 'Awaiting_Grant',\n        label: 'Awaiting Grant',\n        count: 0,\n        icon: '',\n        helperTitle: 'Awaiting Grant'\n      }, {\n        filterValue: 'Awaiting_Work_Start',\n        label: 'Awaiting Work Start',\n        count: 0,\n        icon: '',\n        helperTitle: 'Awating Work Start'\n      }, {\n        filterValue: 'In_Progress',\n        label: 'In Progress',\n        count: 0,\n        icon: '',\n        helperTitle: 'In Progress'\n      }, {\n        filterValue: 'Awaiting_Work_Stop',\n        label: 'Awaiting Work Stop',\n        count: 0,\n        icon: '',\n        helperTitle: 'Awaiting Work Stop'\n      }, {\n        filterValue: 'Registration_Due',\n        label: 'Registration Due',\n        count: 0,\n        icon: '',\n        helperTitle: 'Registration Due'\n      }, {\n        filterValue: 'Interim_To_Perm',\n        label: 'Interim to Permanent',\n        count: 0,\n        icon: '',\n        helperTitle: 'Interim To Permanent'\n      }];\n    }\n\n    bindPermitQuickFilterEvents() {\n      let eventActions = [[WidgetConstants.APPLY_FILTER, [{\n        action: 'applyFilterOnChange',\n        params: [{\n          'page.filterposition': \"'permitQuickFilter'\",\n          'page.gridposition': \"'permitList'\",\n          'page.clearFilter': \"'permitFilter'\",\n          'targ.filterType': FILTER_TYPE.QUICK_FILTER\n        }]\n      }]]];\n      super.addEventListener(eventActions, this.permitQuickFilterDataModel, this.permitQuickFilterConfigModel);\n    }\n\n    bindElginMapDataModel() {\n      // abstract methid for setGlobalParams\n      super.setGlobalParams(this.elginMapDataModel);\n    }\n\n    bindElginMapEvents() {\n      let eventActions = [['overlayComplete', [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_drawMapOverlayComplete'\n        }]\n      }]], ['drawingmodeChanged', [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_drawingmodeChanged'\n        }]\n      }]], ['mapLoaded', [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_mapLoaded'\n        }]\n      }]]];\n      super.addEventListener(eventActions, this.elginMapDataModel, this.elginMapConfigModel);\n    }\n\n    bindCreatePermitFormDataModel() {\n      super.setGlobalParams(this.createPermitFormDataModel);\n    }\n\n    bindCreatePermitFormEvents() {\n      let eventActions = [[WidgetConstants.SHOW_ERROR, [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_showError'\n        }]\n      }]]];\n      super.addEventListener(eventActions, this.createPermitFormDataModel, this.createPermitFormConfigModel);\n    }\n\n    page_showError(eventparams) {\n      this.display = true;\n      this.errorMsg = eventparams.dataContext;\n    }\n\n    bindSummaryDataModel() {//super.setGlobalParams(this.summaryDataModel);\n    }\n\n    bindSummaryEvents() {}\n\n    bindPermitImagesAndFilesDataModel() {\n      this.setGlobalParams(this.permitImagesAndFilesDataModel);\n    }\n\n    bindPermitImagesAndFilesConfigModel() {\n      let events = [['openDialog', [{\n        action: 'setPageProperties',\n        params: [{\n          'page.dialogUplaodFileModel.visible': 'true',\n          'page.dialogUplaodFileModel.header': \"'File Upload'\"\n        }]\n      }]]];\n      this.addEventListener(events, this.permitImagesAndFilesDataModel, this.permitImagesAndFilesConfigModel);\n    }\n\n    bindFileUploadDataModel() {\n      this.setGlobalParams(this.fileUploadDataModel);\n    }\n\n    bindFileUploadConfigModel() {\n      let events = [['uploadHandler', [{\n        action: 'fileUploadWithUserData',\n        params: [],\n        posteventaction: {\n          success: [{\n            action: 'executePageMethod',\n            params: [{\n              methodname: 'page_refreshCreatePermitDocList'\n            }]\n          }]\n        }\n      }, {\n        action: 'setPageProperties',\n        params: [{\n          'page.dialogUplaodFileModel.visible': 'false'\n        }]\n      }]]];\n      this.addEventListener(events, this.fileUploadDataModel, this.fileUploadConfigModel);\n    }\n\n    bindPermitConfirmationDataModel() {\n      super.setGlobalParams(this.permitConfirmationDataModel);\n    }\n\n    bindPermitConfirmationConfigModel() {}\n\n    bindPermitConditionsDataModel() {\n      super.setGlobalParams(this.permitConditionsDataModel);\n    }\n\n    bindPermitConditionsConfigModel() {}\n\n    bindGlobalFilterDataModel() {}\n\n    bindGlobalFilterConfigModel() {\n      let events = [['ON_GLOBAL_FILTER_CHANGE', [{\n        action: 'executePageMethod',\n        params: [{\n          methodname: 'page_on_global_filter_change'\n        }]\n      }, {\n        action: 'refresh',\n        params: {\n          position: 'permitList'\n        }\n      }]]];\n      this.addEventListener(events, this.globalFilterDataModel, this.globalFilterConfigModel);\n    }\n\n    page_drawMapOverlayComplete(eventparams, wigDataContext, params) {\n      this.permitDrawMapConfigModel.CallerToComp.emit(WidgetConstants.LOAD_DATA, eventparams);\n    }\n\n    page_drawingmodeChanged(eventparams, wigDataContext, params) {\n      this._appRepoHelperService.setNavigationData(this.permitNavigationKey, {});\n\n      this.permitDrawMapConfigModel.CallerToComp.emit(WidgetConstants.RESET_TO_DEFAULT, eventparams);\n    }\n\n    openBulkUpload() {\n      this.dialog.open(BulkUploadComponent, {\n        panelClass: 'full-width-dialog'\n      });\n    }\n\n    openDialog() {\n      this.resetPermitNavigationData();\n      this.setPermitNavigationKey(FormModeConstant.ADD);\n      this.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, null);\n      let conditions = {\n        conditions: []\n      };\n      this.globalParameters.set(GLOBAL_PARAM_KEY.CONDITIONS, conditions);\n      this.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, null);\n      let permitFormPageData = this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM);\n      permitFormPageData = permitFormPageData ? permitFormPageData : new PermitFormPageData();\n\n      let userInfo = this._appRepoHelperService.getMDataByKey(MASTER_DATA.USER_INFO); // user Info\n      // permitFormPageData.promoterPrefix = userInfo.promoter_prefix;\n      // permitFormPageData.promoterOrganisation = userInfo.promoter_org;\n      // permitFormPageData.departmentName = userInfo.workstream;\n      // permitFormPageData.accountability = userInfo.accountability;\n      // permitFormPageData.orgId = userInfo.org_id;\n      // permitFormPageData.departmentId = userInfo.department_id;\n\n\n      permitFormPageData.secondaryContact = userInfo.display_name;\n      permitFormPageData.secondaryContactNumber = userInfo.contact_no;\n      this.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, permitFormPageData);\n      this.isCreatePermitModeCreate = true;\n      this.permitDrawMapDataModel.data = new PermitDrawMapDetails();\n      this.globalParameters.set('applicationId', 0);\n      this.dialogModel = new DialogModel();\n      this.dialogModel.width = '80%';\n      this.dialogModel.maximizable = true;\n      this.createPermitStepNo = 1;\n      this.dialogModel.maximizable = true;\n      this.dialogModel.header = this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1];\n      this.elginMapDataModel.geometry = new GeometryDataModel(); // set eleginMap Mode\n\n      this.elginMapDataModel.mode = this.permitMode;\n      this.elginMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, null);\n      this.permitDrawMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, null);\n      this.permitDrawMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, null);\n      this.elginMapDataModel.isSelfDataLoad = false;\n      this.dialogModel.maximizable = true;\n      this.dialogModel.visible = true;\n    }\n\n    nextButtonDrawMapClick() {\n      if (this.createPermitDrawMapComponent.validate()) {\n        // map page details\n        let mapPageDataDataModel = new MapPageDataDataModel();\n        mapPageDataDataModel.geometry = this.elginmapComponent.getValue();\n        mapPageDataDataModel.nsgDetails = this.createPermitDrawMapComponent.getValue();\n        this.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, mapPageDataDataModel);\n        let permitFormPageData = this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM);\n        permitFormPageData = permitFormPageData ? permitFormPageData : new PermitFormPageData(); // geometry\n\n        permitFormPageData.geometry = {\n          type: ElginMapUtility.getGeometryTypeForRequest(mapPageDataDataModel.geometry.type),\n          coordinates: mapPageDataDataModel.geometry.cordinateNorthingsEastings\n        };\n\n        let arrHighWayAuthorities = this._appRepoHelperService.getMDataByDomain(MASTER_DATA_DOMAIN.HIGHWAY_AUTORITIES.toString());\n\n        arrHighWayAuthorities.forEach(authority => {\n          if (authority.swaCode == mapPageDataDataModel.nsgDetails.authority_swa_code) {\n            permitFormPageData.highwayAuthorityId = authority.authorityId;\n          }\n        });\n        permitFormPageData.locationDescription = mapPageDataDataModel.nsgDetails.worksLocationDescription;\n        permitFormPageData.locationDetails = mapPageDataDataModel.nsgDetails.location_details;\n        permitFormPageData.postCode = mapPageDataDataModel.nsgDetails.postcode;\n        permitFormPageData.usrn = mapPageDataDataModel.nsgDetails.usrn;\n        permitFormPageData.roadCategory = mapPageDataDataModel.nsgDetails.road_category;\n        permitFormPageData.roadType = mapPageDataDataModel.nsgDetails.roadType;\n        permitFormPageData.streetName = mapPageDataDataModel.nsgDetails.street_name;\n        permitFormPageData.town = mapPageDataDataModel.nsgDetails.town;\n        permitFormPageData.specialDesignations = [];\n        mapPageDataDataModel.nsgDetails.special_designations.forEach(designation => {\n          if (designation.isChecked) {\n            let specialDesignation = {\n              street_special_desig_code: designation.street_special_desig_code,\n              special_desig_location_text: designation.special_desig_location_text,\n              special_desig_description: designation.special_desig_description,\n              special_desig_start_time: designation.special_desig_start_time,\n              special_desig_end_time: designation.special_desig_end_time,\n              special_desig_periodicity_code: designation.special_desig_periodicity_code\n            };\n            permitFormPageData.specialDesignations.push(specialDesignation);\n          }\n        });\n        permitFormPageData.trafficSensitiveFlag = mapPageDataDataModel.nsgDetails.traffic_sensitive;\n        this.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, permitFormPageData);\n        this.createPermitFormDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM));\n        this.elginMapDataModel.mode = FormModeConstant.VIEW;\n        this.createPermitFormDataModel.mode = this.permitMode;\n        this.createPermitStepNo = 2;\n        this.dialogModel.maximizable = true;\n        this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n        this.dialogContentScrollTop();\n      }\n    }\n\n    nextButtonPermitFormClick() {\n      let isValid = this.createPermitFormComponent.validate();\n      if (!isValid) return; // conditions\n\n      this.permitConditionsDataModel.globalParameters.set(GLOBAL_PARAM_KEY.CONDITIONS, this.globalParameters.get(GLOBAL_PARAM_KEY.CONDITIONS));\n      this.setPermitFormDataToPageData();\n      this.permitConditionsDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM));\n      this.createPermitStepNo = 3;\n      this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n    }\n\n    nextButtonConditionClick() {\n      this.setConditionsToGlobalParameters();\n      let data = this.getPermitRequestBody();\n      let applicationId = this.globalParameters.get('applicationId'); //Edit Permit\n\n      if (applicationId) {\n        this._serverApiBase.put(`/api/v1/applications/${applicationId}`, data).subscribe(response => {\n          try {\n            if (response && response.applicationId) {\n              this.globalParameters.set('applicationId', response.applicationId); // this.setGlobalParams(this.summaryDataModel);\n              // this.setGlobalParams(this.permitConfirmationDataModel);\n              // this.permitConfirmationDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_CONFIRMATION, response.permit_reference_number);\n\n              this.setGlobalParams(this.permitImagesAndFilesDataModel);\n              this.fileUploadDataModel.apiDataUrl = `/api/v1/applications/${response.applicationId}/work-files`;\n              this.setGlobalParams(this.fileUploadDataModel); // this.dialogModel.visible = false;\n\n              this.createPermitStepNo = 4;\n              this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n              this.permitList.wgRefreshData();\n            }\n          } catch (e) {}\n        }, error => {\n          console.log('Permit save as draft error :');\n        });\n      } else {\n        this._serverApiBase.post('/api/v1/applications', data).subscribe(response => {\n          try {\n            if (response && response.applicationId) {\n              this.globalParameters.set('applicationId', response.applicationId); // this.setGlobalParams(this.summaryDataModel);\n              // this.setGlobalParams(this.permitConfirmationDataModel);\n              // this.permitConfirmationDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_CONFIRMATION, response.permit_reference_number);\n\n              this.fileUploadDataModel.apiDataUrl = `/api/v1/applications/${response.applicationId}/work-files`;\n              this.setGlobalParams(this.fileUploadDataModel);\n              this.setGlobalParams(this.permitImagesAndFilesDataModel);\n              this.permitImagesAndFilesDataModel.data = null; // this.dialogModel.visible = false;\n\n              this.createPermitStepNo = 4;\n              this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n              this.permitList.wgRefreshData();\n            }\n          } catch (e) {}\n        }, error => {\n          console.log('Permit save as draft error :');\n        });\n      }\n    }\n\n    backButtonPermitFormClick() {\n      this.elginMapDataModel.mode = this.permitMode;\n      this.permitDrawMapConfigModel.CallerToComp.emit(WidgetConstants.RESET_TO_DEFAULT, null);\n      this.permitDrawMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, this.globalParameters.get(GLOBAL_PARAM_KEY.ELGIN_MAP));\n      this.permitDrawMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM));\n      this.createPermitFormDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM));\n      this.createPermitStepNo = 1;\n      this.dialogModel.maximizable = true;\n      this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n      this.dialogContentScrollTop();\n    }\n\n    backButtonConditionClick() {\n      // Set updated conditions\n      let conditions = this.permitConditionsTabComponent.getValue();\n      conditions = conditions ? conditions : [];\n      this.globalParameters.set(GLOBAL_PARAM_KEY.CONDITIONS, conditions);\n      this.createPermitFormDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM));\n      this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n      this.createPermitStepNo = 2;\n      this.dialogModel.maximizable = true;\n      this.dialogContentScrollTop();\n    }\n\n    backButtonUploadDocClick() {\n      this.permitConditionsDataModel.globalParameters.set(GLOBAL_PARAM_KEY.CONDITIONS, this.globalParameters.get(GLOBAL_PARAM_KEY.CONDITIONS));\n      this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n      this.createPermitStepNo = 3;\n      this.dialogContentScrollTop();\n    }\n\n    setPermitFormDataToPageData() {\n      let permitFormPageData = this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM);\n      permitFormPageData = permitFormPageData ? permitFormPageData : new PermitFormPageData();\n      let permitFormData = this.createPermitFormComponent.getValue(); // geometry\n\n      let mapPageDataDataModel = this.globalParameters.get(GLOBAL_PARAM_KEY.ELGIN_MAP);\n      permitFormPageData.geometry = {\n        type: ElginMapUtility.getGeometryTypeForRequest(mapPageDataDataModel.geometry.type),\n        coordinates: mapPageDataDataModel.geometry.cordinateNorthingsEastings\n      };\n      mapPageDataDataModel.nsgDetails.special_designations.forEach(designation => {\n        if (designation.isChecked) {\n          let specialDesignation = {\n            street_special_desig_code: designation.street_special_desig_code,\n            special_desig_location_text: designation.special_desig_location_text,\n            special_desig_description: designation.special_desig_description,\n            special_desig_start_time: designation.special_desig_start_time,\n            special_desig_end_time: designation.special_desig_end_time,\n            special_desig_periodicity_code: designation.special_desig_periodicity_code\n          }; //permitFormPageData.specialDesignations.push(specialDesignation);\n        }\n      });\n      permitFormPageData.orgId = permitFormData.org_id;\n      permitFormPageData.departmentId = permitFormData.department_id;\n      permitFormPageData.accountability = permitFormData.accountability;\n      permitFormPageData.workReferenceNumber = permitFormData.work_reference_number;\n      permitFormPageData.highwayAuthorityId = permitFormData.highway_authority_id;\n      permitFormPageData.postCode = permitFormData.postcode;\n      permitFormPageData.usrn = permitFormData.usrn;\n      permitFormPageData.roadCategory = permitFormData.road_category;\n      permitFormPageData.locationDescription = permitFormData.location_description;\n      permitFormPageData.proposedStartDate = permitFormData.proposed_start_date;\n      permitFormPageData.proposedEndDate = permitFormData.proposed_end_date;\n      permitFormPageData.trafficSensitiveFlag = permitFormData.traffic_sensitive_flag;\n      permitFormPageData.secondaryContact = permitFormData.secondary_contact;\n      permitFormPageData.secondaryContactNumber = permitFormData.secondary_contact_number;\n      permitFormPageData.locationTypes = permitFormData.location_types;\n      permitFormPageData.workCategory = permitFormData.work_category;\n      permitFormPageData.workDescription = permitFormData.work_description;\n      permitFormPageData.workDescTextType = permitFormData.work_description_text_type;\n      permitFormPageData.activityType = permitFormData.activity_type;\n      permitFormPageData.trafficManagementType = permitFormData.traffic_management_type;\n      permitFormPageData.closeFootway = permitFormData.close_footway;\n      permitFormPageData.collaborativeWorkingFlag = permitFormData.collaborative_working_flag;\n      permitFormPageData.collaborationDetails = permitFormData.collaboration_details;\n      permitFormPageData.collaborativeWorks = permitFormData.collaborative_works;\n      permitFormPageData.collaborationType = permitFormData.collaboration_type;\n      permitFormPageData.excavationFlag = permitFormData.excavation_flag;\n      permitFormPageData.environmentalFlag = permitFormData.environmental_flag;\n      permitFormPageData.ttro_requiredFlag = permitFormData.ttro_required_flag;\n      permitFormPageData.projectReferenceNumber = permitFormData.project_reference_number;\n      permitFormPageData.laneRentalFlag = permitFormData.lane_rental_flag;\n      permitFormPageData.earlyStartPreApprovalFlag = permitFormData.early_start_pre_approval_flag;\n      permitFormPageData.earlyStartReason = permitFormData.early_start_reason;\n      permitFormPageData.preApprovalDetails = permitFormData.pre_approval_details;\n      permitFormPageData.preApprovalAuthoriser = permitFormData.pre_approval_authoriser;\n      permitFormPageData.locationDetails = permitFormData.location_details;\n      permitFormPageData.is_covid19_response = permitFormData.is_covid19_response;\n      permitFormPageData.environmental_flag = permitFormData.environmental_flag;\n      permitFormPageData.workstream_id = permitFormData.workstream_id;\n      permitFormPageData.contractor_id = permitFormData.contractor_id;\n      this.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, permitFormPageData);\n    }\n\n    onAppDialogClose(data) {}\n\n    submitPermit() {\n      // let data = this.getPermitRequestBody();\n      // let applicationId = this.globalParameters.get('applicationId');\n      // //Edit Permit\n      // if (applicationId) {\n      //   this._serverApiBase.put<any, any>(`/api/v1/applications/${applicationId}`, data).subscribe(\n      //     response => {\n      //       // console.log('Permit save as draft response :', response);\n      //       try {\n      //         if (response && response.applicationId) {\n      // this.globalParameters.set('applicationId', response.applicationId);\n      this.setGlobalParams(this.summaryDataModel);\n      this.setGlobalParams(this.permitConfirmationDataModel); //           this.permitList.wgRefreshData();\n\n      this.createPermitStepNo = 5;\n      this.dialogModel.header = this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1]; //         }\n      //       } catch (e) {\n      //       }\n      //     }, error => {\n      //       console.log('Permit save as draft error :');\n      //     }\n      //   );\n      // } else {\n      //   this._serverApiBase.post<any, any>(\"/api/v1/applications\", data).subscribe(\n      //     response => {\n      //       try {\n      //         if (response && response.applicationId) {\n      //           this.globalParameters.set('applicationId', response.applicationId);\n      //           this.setGlobalParams(this.summaryDataModel);\n      //           this.permitConfirmationDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_CONFIRMATION, response.permit_reference_number);\n      //           this.permitList.wgRefreshData();\n      //           this.createPermitStepNo = 5;\n      //           this.dialogModel.header = this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1];\n      //         }\n      //       } catch (e) {\n      //       }\n      //     }, error => {\n      //       console.log('Permit save as draft error :');\n      //     }\n      //   );\n      // }\n    }\n\n    savePermitAsDraft() {\n      this.setConditionsToGlobalParameters();\n      let data = this.getPermitRequestBody();\n      let applicationId = this.globalParameters.get('applicationId'); //Edit Permit\n\n      if (applicationId) {\n        this._serverApiBase.put(`/api/v1/applications/${applicationId}`, data).subscribe(response => {\n          try {\n            if (response && response.applicationId) {\n              this.globalParameters.set('applicationId', response.applicationId); // this.setGlobalParams(this.summaryDataModel);\n              // this.setGlobalParams(this.permitConfirmationDataModel);\n              // this.permitConfirmationDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_CONFIRMATION, response.permit_reference_number);\n\n              this.setGlobalParams(this.permitImagesAndFilesDataModel);\n              this.fileUploadDataModel.apiDataUrl = `/api/v1/applications/${response.applicationId}/work-files`;\n              this.setGlobalParams(this.fileUploadDataModel);\n              this.dialogModel.visible = false;\n              this.createPermitStepNo = 1;\n              this.dialogModel.maximizable = true;\n              this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n              this.permitList.wgRefreshData();\n            }\n          } catch (e) {}\n        }, error => {\n          console.log('Permit save as draft error :');\n        });\n      } else {\n        this._serverApiBase.post('/api/v1/applications', data).subscribe(response => {\n          try {\n            if (response && response.applicationId) {\n              this.globalParameters.set('applicationId', response.applicationId); // this.setGlobalParams(this.summaryDataModel);\n              // this.setGlobalParams(this.permitConfirmationDataModel);\n              // this.permitConfirmationDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_CONFIRMATION, response.permit_reference_number);\n\n              this.setGlobalParams(this.permitImagesAndFilesDataModel);\n              this.fileUploadDataModel.apiDataUrl = `/api/v1/applications/${response.applicationId}/work-files`;\n              this.setGlobalParams(this.fileUploadDataModel);\n              this.dialogModel.visible = false;\n              this.createPermitStepNo = 1;\n              this.dialogModel.maximizable = true;\n              this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n              this.permitList.wgRefreshData();\n            }\n          } catch (e) {}\n        }, error => {\n          console.log('Permit save as draft error :');\n        });\n      }\n    }\n\n    setConditionsToGlobalParameters() {\n      let conditionsData = this.permitConditionsTabComponent.getValue();\n      conditionsData = conditionsData ? conditionsData : new PermitConditionsPageModel();\n      conditionsData = this.permitConditionsTabComponent.getValue();\n      this.globalParameters.set(GLOBAL_PARAM_KEY.CONDITIONS, conditionsData);\n    }\n\n    getPermitRequestBody() {\n      var _a;\n\n      let data = {\n        org_id: 200,\n        highway_authority_id: 300,\n        department_id: 999,\n        geometry: {\n          type: 'Polygon',\n          coordinates: [[[503294.847231123, 192583.873611111], [503280.147220442, 192531.140275998], [503286.058330366, 192530.440275998], [503301.613890669, 192581.462495846], [503294.847231123, 192583.873611111]]]\n        },\n        is_an_old_permit: false,\n        street_name: 'BATCHWORTH ROUNDABOUT',\n        area_name: '',\n        town: 'RICKMANSWORTH',\n        work_reference_number: '',\n        usrn: 40416588,\n        location_description: 'Entrance to new Premier Inn -2',\n        location_types: ['footway, carriageway'],\n        road_category: 1,\n        proposed_start_date: '2021-01-17T00:00:00.000Z',\n        proposed_end_date: '2021-02-28T00:00:00.000Z',\n        traffic_sensitive_flag: false,\n        secondary_contact: 'Stuart Monk',\n        secondary_contact_number: '01543466711',\n        secondary_contact_email: 'gasnetworks@murphygroup.co.uk',\n        // \"work_type\": \"planned\",\n        work_category: 'standard',\n        work_description: 'New distribution main required',\n        activity_type: 'utility_repair_and_maintenance_works',\n        traffic_management_type: 'lane_closure',\n        close_footway: 'yes_provide_pedestrian_walkway',\n        collaborative_working_flag: false,\n        collaboration_details: '',\n        collaborative_works: '',\n        collaboration_type: '',\n        excavation_flag: false,\n        environmental_flag: false,\n        ttro_required_flag: false,\n        project_reference_number: '777771',\n        conditions: [{\n          condition: 'NCT01a',\n          comment: ''\n        }, {\n          condition: 'NCT04a',\n          comment: ''\n        }, {\n          condition: 'NCT01b',\n          comment: ''\n        }],\n        special_designations: [],\n        early_start_pre_approval_flag: false,\n        early_start_reason: 'It is not pre approved -2',\n        lane_rental_flag: false,\n        location_details: 'Tredegar Park round about'\n      };\n      let permitFormPageData = this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM);\n      console.log('permit for page data', permitFormPageData);\n      data.geometry.type = permitFormPageData.geometry.type ? permitFormPageData.geometry.type : [];\n      data.geometry.coordinates = permitFormPageData.geometry.coordinates ? permitFormPageData.geometry.coordinates : [];\n      data.location_description = permitFormPageData.locationDescription ? permitFormPageData.locationDescription : null;\n      data.location_details = permitFormPageData.locationDetails ? permitFormPageData.locationDetails : null;\n      data.highway_authority_id = permitFormPageData.highwayAuthorityId ? permitFormPageData.highwayAuthorityId : 0;\n      data.usrn = permitFormPageData.usrn ? permitFormPageData.usrn : null;\n      data.proposed_start_date = permitFormPageData.proposedStartDate ? permitFormPageData.proposedStartDate : null;\n      data.proposed_end_date = permitFormPageData.proposedEndDate ? permitFormPageData.proposedEndDate : null;\n      data.org_id = permitFormPageData.orgId ? permitFormPageData.orgId : 0;\n      data.department_id = permitFormPageData.departmentId ? permitFormPageData.departmentId : 0;\n      data.traffic_sensitive_flag = permitFormPageData.trafficSensitiveFlag ? permitFormPageData.trafficSensitiveFlag : false;\n      data.lane_rental_flag = permitFormPageData.laneRentalFlag ? permitFormPageData.laneRentalFlag : false;\n      data.excavation_flag = permitFormPageData.excavationFlag ? permitFormPageData.excavationFlag : false;\n      let conditions = this.globalParameters.get(GLOBAL_PARAM_KEY.CONDITIONS).conditions;\n      data.conditions = conditions ? conditions : [];\n      data.special_designations = permitFormPageData.specialDesignations ? permitFormPageData.specialDesignations : [];\n      data.project_reference_number = permitFormPageData.projectReferenceNumber;\n      data.road_category = permitFormPageData.roadCategory ? Number(permitFormPageData.roadCategory) : 0;\n      data.secondary_contact = permitFormPageData.secondaryContact ? permitFormPageData.secondaryContact : 0;\n      data.secondary_contact_number = permitFormPageData.secondaryContactNumber ? (_a = permitFormPageData.secondaryContactNumber) === null || _a === void 0 ? void 0 : _a.toString() : 0;\n      data.close_footway = permitFormPageData.closeFootway ? permitFormPageData.closeFootway : 0;\n      data.traffic_management_type = permitFormPageData.trafficManagementType ? permitFormPageData.trafficManagementType : 0;\n      data.work_description = permitFormPageData.workDescription ? permitFormPageData.workDescription : 0;\n      data.work_category = permitFormPageData.workCategory ? permitFormPageData.workCategory : 0;\n      data.postcode = permitFormPageData.postCode ? permitFormPageData.postCode : null;\n      data.accountability = permitFormPageData.accountability ? permitFormPageData.accountability : 0;\n      data.collaborative_working_flag = permitFormPageData.collaborativeWorkingFlag ? permitFormPageData.collaborativeWorkingFlag : false;\n      data.collaboration_details = permitFormPageData.collaborationDetails ? permitFormPageData.collaborationDetails : null;\n      data.collaborative_works = permitFormPageData.collaborativeWorks ? permitFormPageData.collaborativeWorks : null;\n      data.collaboration_type = permitFormPageData.collaborationType ? permitFormPageData.collaborationType : null;\n      data.activity_type = permitFormPageData.activityType ? permitFormPageData.activityType : null;\n      data.work_reference_number = permitFormPageData.workReferenceNumber;\n      data.location_types = permitFormPageData.locationTypes ? permitFormPageData.locationTypes : null;\n      data.ttro_required_flag = permitFormPageData.ttro_requiredFlag ? permitFormPageData.ttro_requiredFlag : false;\n      data.early_start_pre_approval_flag = permitFormPageData.earlyStartPreApprovalFlag;\n      data.early_start_reason = permitFormPageData.earlyStartReason;\n      data.pre_approval_authoriser = permitFormPageData.preApprovalAuthoriser;\n      data.pre_approval_details = permitFormPageData.preApprovalDetails;\n      data.environmental_flag = permitFormPageData.environmental_flag ? permitFormPageData.environmental_flag : false;\n      data.is_covid19_response = permitFormPageData.is_covid19_response ? permitFormPageData.is_covid19_response : false;\n      data.street_name = permitFormPageData.streetName ? permitFormPageData.streetName : '';\n      data.town = permitFormPageData.town ? permitFormPageData.town : '';\n      data.workstream_id = permitFormPageData.workstream_id;\n      data.contractor_id = permitFormPageData.contractor_id;\n      console.log('------------------------Final Data Create Permit-------------------');\n      console.log(data);\n      return data;\n    }\n\n    onViewPermitListClick() {\n      this.permitList.wgRefreshData();\n      this.dialogModel.visible = false;\n      this.createPermitStepNo = 1;\n    }\n\n    permitConfirm() {\n      this.createPermitStepNo = 5;\n      this.dialogModel.header = this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1];\n      let applicationId = this.globalParameters.get('applicationId'); // Edit Permit\n\n      if (applicationId) {\n        this._serverApiBase.post('/api/v1/applications/' + applicationId + '/submission', null).subscribe(submitresp => {\n          try {\n            if (submitresp && submitresp.permit_reference_number) {\n              this.permitConfirmationDataModel.globalParameters.set('applicationId', this.globalParameters.get('applicationId')); // this.permitConfirmationDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_CONFIRMATION, submitresp);\n              // this.permitConfirmationConfigModel.CallerToComp.emit(WidgetConstants.CALLER_TO_COMP_REFRESH_DATA);\n\n              this.permitList.wgRefreshData();\n              this.createPermitStepNo = 6;\n              this.dialogModel.header = this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1];\n            }\n          } catch (e) {}\n        }, err => {});\n      }\n    }\n\n    page_mapLoaded() {\n      if (this.elginMapDataModel.mode == FormModeConstant.EDIT || this.elginMapDataModel.mode == FormModeConstant.VIEW) {}\n    }\n\n    onTTROChkBoxChange(checked) {\n      this.isCreateTTROBtnDisable = !checked;\n    }\n\n    onTrafficManagementPlanChkBoxChange(checked) {\n      this.isCreateTrafficManagementPlanBtnDisable = !checked;\n    }\n\n    openOneNetwork() {\n      window.open('https://one.network/', '_blank');\n    }\n\n    page_openEditPermitDialog(eventparams, wigDataContext, params) {\n      this.globalParameters.set('applicationId', null);\n      this.permitDrawMapDataModel.data = new PermitDrawMapDetails();\n      let applicationId = eventparams.dataContext.ApplicationId;\n      this.resetPermitNavigationData();\n      this.setPermitNavigationKey(FormModeConstant.EDIT);\n      this.isCreatePermitModeCreate = false;\n      this.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, null);\n      this.globalParameters.set(GLOBAL_PARAM_KEY.CONDITIONS, null);\n      this.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, null);\n      this.showSpinner();\n\n      this._serverApiBase.get(`/api/v1/applications/${applicationId}`).subscribe(response => {\n        try {\n          this.hideSpinner();\n\n          if (response) {\n            let permitresponse = this.convertPermitDetailsResponse(response);\n            this.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, permitresponse.mapPageData);\n            this.globalParameters.set(GLOBAL_PARAM_KEY.CONDITIONS, permitresponse.conditionPageData);\n            this.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, permitresponse.permitFormPageData);\n            this.permitDrawMapDataModel.data = new PermitDrawMapDetails();\n            this.permitDrawMapDataModel.mode = FormModeConstant.EDIT;\n            this.globalParameters.set('applicationId', applicationId);\n            this.dialogModel = new DialogModel();\n            this.dialogModel.width = '80%';\n            this.createPermitStepNo = 1;\n            this.dialogModel.maximizable = true;\n            this.dialogModel.header = this.arrEditPermitDialogTitle[this.createPermitStepNo - 1]; // set eleginMap Mode\n\n            this.elginMapDataModel.mode = FormModeConstant.EDIT;\n            this.elginMapDataModel.isSelfDataLoad = true;\n            this.elginMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, this.globalParameters.get(GLOBAL_PARAM_KEY.ELGIN_MAP));\n            this.permitDrawMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.ELGIN_MAP, this.globalParameters.get(GLOBAL_PARAM_KEY.ELGIN_MAP));\n            this.permitDrawMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, this.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM));\n            this.dialogModel.visible = true;\n          }\n        } catch (e) {\n          this.hideSpinner();\n        }\n      }, error => {\n        this.hideSpinner();\n        console.log('Permit save as draft error :');\n      });\n    } //delete\n\n\n    confirmDelete() {\n      this.showSpinner();\n      let applicationIdForDelete = this.globalParameters.get('applicationIdForDelete');\n\n      this._serverApiBase.delete(`/api/v1/applications/${applicationIdForDelete}`).subscribe(response => {\n        try {\n          if (response) {\n            this._notificationService.success('Permit has been deleted successfully');\n\n            this.dialogDeleteFileModel.visible = false;\n            this.hideSpinner();\n            this.permitList.wgRefreshData();\n          }\n        } catch (e) {\n          this._notificationService.error(e);\n\n          this.dialogDeleteFileModel.visible = false;\n          this.hideSpinner();\n        }\n      }, error => {\n        this.dialogDeleteFileModel.visible = false;\n        this.hideSpinner();\n      });\n    }\n\n    cancelDelete() {\n      this.dialogDeleteFileModel.visible = false;\n    }\n\n    page_onDelete(eventparams, wigDataContext, params) {\n      let applicationId = eventparams.dataContext.ApplicationId;\n      this.permit_reference_number = eventparams.dataContext.PermitRefNumber;\n      this.applicationIdToBeDelete = applicationId;\n      this.globalParameters.set('applicationIdForDelete', applicationId);\n      this.dialogDeleteFileModel.visible = true;\n      this.dialogDeleteFileModel.width = '10%';\n      this.dialogDeleteFileModel.header = 'Delete Permit ';\n      this.dialogDeleteFileModel.minWidth = '500px';\n    } //delete ends\n\n\n    onViewClick() {\n      let AppId = this.globalParameters.get('applicationId');\n      let evnt = {\n        dataContext: {\n          ApplicationId: AppId\n        }\n      };\n      this.page_viewClick(evnt, null, null);\n    }\n\n    page_viewClick(eventparams, wigDataContext, params) {\n      this.globalParameters.set('applicationId', null);\n      let applicationId = eventparams.dataContext.ApplicationId;\n      this.showSpinner();\n\n      this._serverApiBase.get(`/api/v1/applications/${applicationId}`).subscribe(response => {\n        try {\n          this.hideSpinner();\n\n          if (response) {\n            let permitresponse = this.convertPermitDetailsResponse(response);\n            this.globalParameters.set(GLOBAL_PARAM_KEY.VIEW_ELGIN_MAP, permitresponse.mapPageData);\n            this.globalParameters.set(GLOBAL_PARAM_KEY.VIEW_CONDITIONS, permitresponse.conditionPageData);\n            this.globalParameters.set(GLOBAL_PARAM_KEY.VIEW_PERMIT_FORM, response); // this.permitDrawMapDataModel.globalParameters.set(GLOBAL_PARAM_KEY.PERMIT_FORM, response);\n            // console.log(\"at view button click\",this.permitDrawMapDataModel.globalParameters.get(GLOBAL_PARAM_KEY.PERMIT_FORM));\n\n            this.globalParameters.set('applicationId', applicationId);\n            let navigationData = new Map();\n            navigationData.set('applicationId', this.globalParameters.get('applicationId'));\n            navigationData.set(GLOBAL_PARAM_KEY.ELGIN_MAP, this.globalParameters.get(GLOBAL_PARAM_KEY.VIEW_ELGIN_MAP));\n            navigationData.set(GLOBAL_PARAM_KEY.CONDITIONS, this.globalParameters.get(GLOBAL_PARAM_KEY.VIEW_CONDITIONS));\n            navigationData.set(GLOBAL_PARAM_KEY.VIEW_PERMIT_FORM, this.globalParameters.get(GLOBAL_PARAM_KEY.VIEW_PERMIT_FORM));\n\n            this._sessionStorageService.setNavigationData(navigationData);\n\n            this._router.navigate(['/admin/permit-view']);\n          }\n        } catch (e) {\n          this.hideSpinner();\n        }\n      }, error => {\n        this.hideSpinner();\n        console.log('Permit save as draft error :');\n      });\n    }\n\n    setPermitNavigationKey(mode) {\n      this.permitMode = mode;\n      this.permitNavigationKey = mode == FormModeConstant.ADD ? NAVIGATION_DATA.CREATE_PERMIT : NAVIGATION_DATA.EDIT_PERMIT;\n    }\n\n    resetPermitNavigationData() {\n      this._appRepoHelperService.setNavigationData(NAVIGATION_DATA.CREATE_PERMIT, {});\n\n      this._appRepoHelperService.setNavigationData(NAVIGATION_DATA.EDIT_PERMIT, {});\n    }\n\n    ngOnDestroy() {\n      this.removeListener(this.permitDrawMapConfigModel);\n      this.removeListener(this.elginMapConfigModel);\n    }\n\n    convertPermitDetailsResponse(response) {\n      let permitNavigationDataModel = new PermitNavigationDataModel();\n\n      if (!response) {\n        return permitNavigationDataModel;\n      }\n\n      permitNavigationDataModel.mapPageData = this.convertToMapPageData(response); //set conditionPageData\n\n      permitNavigationDataModel.conditionPageData = this.convertToConditionPageData(response); //set permitFormPageData\n\n      permitNavigationDataModel.permitFormPageData = this.convertToPermitForm(response);\n\n      let userInfo = this._appRepoHelperService.getMDataByKey(MASTER_DATA.USER_INFO); // user Info\n      // permitNavigationDataModel.permitFormPageData.orgId = userInfo.org_id;\n      //permitNavigationDataModel.permitFormPageData.departmentId = userInfo.department_id;\n\n\n      return permitNavigationDataModel;\n    }\n\n    convertToMapPageData(response) {\n      let mapPageData = new MapPageDataDataModel();\n\n      if (response) {\n        if (response.geometry.type == PERMIT_GEOMETRY_TYPE.POLYGON) {\n          let coordinatesLatLngs = ElginMapUtility.convertCoordinatesToLatLong(response.geometry.coordinates);\n          let geometry = {\n            cordinateNorthingsEastings: response.geometry.coordinates,\n            coordinatesLatLng: coordinatesLatLngs,\n            type: ElginMapUtility.getGeometryType(response.geometry.type),\n            center: coordinatesLatLngs[0],\n            zoom: 18\n          };\n          mapPageData.geometry = geometry;\n        } else if (response.geometry.type == PERMIT_GEOMETRY_TYPE.POLYLINE) {\n          let coordinatesLatLngs = ElginMapUtility.convertCoordinatesToLatLongForPloyline(response.geometry.coordinates);\n          let geometry = {\n            cordinateNorthingsEastings: response.geometry.coordinates,\n            coordinatesLatLng: coordinatesLatLngs,\n            type: ElginMapUtility.getGeometryType(response.geometry.type),\n            center: coordinatesLatLngs[0],\n            zoom: 18\n          };\n          mapPageData.geometry = geometry;\n        } else if (response.geometry.type == PERMIT_GEOMETRY_TYPE.MARKER) {\n          let coordinatesLatLngsMarker = ElginMapUtility.convertCoordinatesToLatLongForMarker(response.geometry.coordinates);\n          let geometry = {\n            cordinateNorthingsEastings: response.geometry.coordinates,\n            coordinatesLatLng: coordinatesLatLngsMarker,\n            type: ElginMapUtility.getGeometryType(response.geometry.type),\n            center: {\n              lat: coordinatesLatLngsMarker[0],\n              lng: coordinatesLatLngsMarker[1]\n            },\n            zoom: 18\n          };\n          mapPageData.geometry = geometry;\n        }\n\n        mapPageData.nsgDetails = new NSGDetails(); //mapPageData.nsgDetails.worksLocationDescription = response.worksLocationDescription;\n\n        mapPageData.nsgDetails.postcode = response.worksLocationDescription;\n        mapPageData.nsgDetails.usrn = response.usrn;\n        mapPageData.nsgDetails.roadType = response.roadType;\n        mapPageData.nsgDetails.road_category = response.road_category;\n        mapPageData.nsgDetails.highway_authority_name = response.highway_authority_name;\n\n        if (response.special_designations && response.special_designations.length > 0) {\n          response.special_designations.forEach(element => {\n            element.isChecked = true;\n          });\n        }\n\n        mapPageData.nsgDetails.special_designations = response.special_designations;\n      }\n\n      return mapPageData;\n    }\n\n    convertToConditionPageData(response) {\n      var _a;\n\n      let permitConditionsList = [];\n\n      if (response) {\n        for (let index = 0; index < ((_a = response.conditions) === null || _a === void 0 ? void 0 : _a.length); index++) {\n          const element = response.conditions[index];\n          let condition = new PermitConditionsItem();\n          condition.condition = element.condition;\n          condition.comment = element.comment;\n          permitConditionsList.push(condition);\n        }\n      }\n\n      let data = {\n        conditions: permitConditionsList\n      };\n      return data;\n    }\n\n    convertToPermitForm(response) {\n      let permitFormPageData = new PermitFormPageData();\n\n      if (response) {\n        permitFormPageData.applicationId = response.application_id;\n        permitFormPageData.workId = response.work_id;\n        permitFormPageData.isAnOldPermit = response.is_an_old_permit;\n        permitFormPageData.workReferenceNumber = response.work_reference_number;\n        permitFormPageData.orgId = response.org_id;\n        permitFormPageData.highwayAuthorityId = response.highway_authority_id;\n        permitFormPageData.departmentId = response.department_id;\n        permitFormPageData.permitRefNumber = response.permit_reference_number;\n        permitFormPageData.streetName = response.street_name;\n        permitFormPageData.areaName = response.area_name;\n        permitFormPageData.town = response.town;\n        permitFormPageData.postCode = response.postcode;\n        permitFormPageData.usrn = response.usrn;\n        permitFormPageData.roadCategory = response.road_category;\n        permitFormPageData.locationDescription = response.location_description;\n        permitFormPageData.proposedStartDate = response.proposed_start_date;\n        permitFormPageData.proposedEndDate = response.proposed_end_date;\n        permitFormPageData.actualStartDate = response.actual_start_date;\n        permitFormPageData.actualEnddate = response.actual_end_date;\n        permitFormPageData.reasonablePeriodEndDate = response.reasonable_period_end_date;\n        permitFormPageData.trafficSensitiveFlag = response.traffic_sensitive_flag;\n        permitFormPageData.secondaryContact = response.secondary_contact;\n        permitFormPageData.secondaryContactNumber = response.secondary_contact_number;\n        permitFormPageData.secondaryContactEmail = response.secondary_contact_email;\n        permitFormPageData.locationTypes = response.location_types;\n        permitFormPageData.workType = response.work_type;\n        permitFormPageData.workCategory = response.work_category;\n        permitFormPageData.workDescription = response.work_description;\n        permitFormPageData.workDescTextType = response.work_desc_text_type;\n        permitFormPageData.activityType = response.activity_type;\n        permitFormPageData.trafficManagementType = response.traffic_management_type;\n        permitFormPageData.closeFootway = response.close_footway;\n        permitFormPageData.collaborativeWorkingFlag = response.collaborative_working_flag;\n        permitFormPageData.collaborationDetails = response.collaboration_details;\n        permitFormPageData.collaborativeWorks = response.collaborative_works;\n        permitFormPageData.collaborationType = response.collaboration_type;\n        permitFormPageData.excavationFlag = response.excavation_flag;\n        permitFormPageData.environmentalFlag = response.environmental_flag;\n        permitFormPageData.ttro_requiredFlag = response.ttro_required_flag;\n        permitFormPageData.projectReferenceNumber = response.project_reference_number;\n        permitFormPageData.laneRentalFlag = response.lane_rental_flag;\n        permitFormPageData.specialDesignations = response.special_designations;\n        permitFormPageData.earlyStartPreApprovalFlag = response.early_start_pre_approval_flag;\n        permitFormPageData.earlyStartReason = response.early_start_reason;\n        permitFormPageData.preApprovalDetails = response.pre_approval_details;\n        permitFormPageData.preApprovalAuthoriser = response.pre_approval_authoriser;\n        permitFormPageData.status = response.status;\n        permitFormPageData.workStatus = response.work_status;\n        permitFormPageData.assessmentDiscount = response.assessment_discount;\n        permitFormPageData.assessmentComments = response.assessment_comments;\n        permitFormPageData.assessmentStatus = response.assessment_status;\n        permitFormPageData.alterationReason = response.alteration_reason;\n        permitFormPageData.draftApplicationId = response.draft_application_id;\n        permitFormPageData.draftAlterationId = response.draft_alteration_id;\n        permitFormPageData.draftWorkType = response.draft_work_type;\n        permitFormPageData.alterationStatus = response.alteration_status;\n        permitFormPageData.pendingChangedetails = response.pending_change_details;\n        permitFormPageData.reasonsForRefusal = response.reasons_for_refusal;\n        permitFormPageData.revokeReason = response.revoke_reason;\n        permitFormPageData.costRisk = response.cost_risk;\n        permitFormPageData.customerRisk = response.customer_risk;\n        permitFormPageData.trafficManagementRisk = response.traffic_management_risk;\n        permitFormPageData.accountability = response.accountability;\n        permitFormPageData.paaCost = response.paa_cost;\n        permitFormPageData.permitCost = response.permit_cost;\n        permitFormPageData.variationCost = response.variation_cost;\n        permitFormPageData.totalCost = response.total_cost;\n        permitFormPageData.calendarDays = response.calendar_days;\n        permitFormPageData.workingDays = response.working_days;\n        permitFormPageData.highwayAuthorityName = response.highway_authority_name;\n        permitFormPageData.departmentName = response.department_name;\n        permitFormPageData.promoterPrefix = response.promoter_prefix;\n        permitFormPageData.promoterOrganisation = response.promoter_organisation;\n        permitFormPageData.statusValue = response.status_value;\n        permitFormPageData.workStatusValue = response.work_status_value;\n        permitFormPageData.locationDetails = response.location_details;\n        permitFormPageData.workOrderNo = response.work_order_no;\n        permitFormPageData.is_covid19_response = response.is_covid19_response;\n        permitFormPageData.environmental_flag = response.environmental_flag;\n        permitFormPageData.contractor_id = response.contractor_id;\n        permitFormPageData.workstream_id = response.workstream_id;\n      }\n\n      return permitFormPageData;\n    }\n\n    dialogContentScrollTop() {\n      this.dialogComponent.scrollTop();\n    }\n\n    page_refreshCreatePermitDocList() {\n      this.permitImagesAndFilesConfigModel.CallerToComp.emit(WidgetConstants.CALLER_TO_COMP_REFRESH_DATA);\n    }\n\n    backButtonConfirmSubmitClick() {\n      this.createPermitStepNo--;\n      this.dialogModel.header = this.isCreatePermitModeCreate ? this.arrCreatePermitDialogTitle[this.createPermitStepNo - 1] : this.arrEditPermitDialogTitle[this.createPermitStepNo - 1];\n      this.dialogContentScrollTop();\n    }\n\n    submissionConfirmSavePermitAsDraft() {\n      this.dialogModel.visible = false;\n      this.createPermitStepNo = 1;\n    }\n\n    getHelpTextData() {\n      return {\n        helpTextId: Math.floor(Math.random() * (100 - 1 + 1) + 1)\n      };\n    }\n\n    hasPermitActionPermission(actionName) {\n      return this._appRepoHelperService.hasPermitActionPermission(actionName);\n    }\n\n    page_on_global_filter_change() {\n      let data = this.globalFilterComponent.getValue();\n      let contractor = data.contractor;\n      let promoterOrganisation = data.promoterOrganisation;\n      let highwayAuthority = data.highwayAuthority;\n\n      this._appRepoHelperService.setGlobalPersistantData(GLOBAL_PERSISTANT_DATA.SELECTED_CONTRACTOR, contractor);\n\n      this._appRepoHelperService.setGlobalPersistantData(GLOBAL_PERSISTANT_DATA.SELECTED_PROMOTER_ORGNISATION, promoterOrganisation);\n\n      this._appRepoHelperService.setGlobalPersistantData(GLOBAL_PERSISTANT_DATA.SELECTED_HIGHWAY_AUTHORITY, highwayAuthority);\n    }\n\n  }\n\n  PermitListingComponent.ɵfac = function PermitListingComponent_Factory(t) {\n    return new (t || PermitListingComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.ServerApiInterfaceServiceService), i0.ɵɵdirectiveInject(i3.EventActionService), i0.ɵɵdirectiveInject(i4.SessionStorageService), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.NgxSpinnerService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i7.AppRepoHelperService), i0.ɵɵdirectiveInject(i2.ServerApiInterfaceServiceService), i0.ɵɵdirectiveInject(i8.NotificationService), i0.ɵɵdirectiveInject(i3.EventActionService), i0.ɵɵdirectiveInject(i9.AppRepoService));\n  };\n\n  PermitListingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PermitListingComponent,\n    selectors: [[\"app-permit-listing\"]],\n    viewQuery: function PermitListingComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(PermitListComponent, 5);\n        i0.ɵɵviewQuery(PermitFilterComponent, 5);\n        i0.ɵɵviewQuery(ElginmapComponent, 5);\n        i0.ɵɵviewQuery(CreatePermitDrawMapComponent, 5);\n        i0.ɵɵviewQuery(CreatePermitFormComponent, 5);\n        i0.ɵɵviewQuery(PermitConditionsTabComponent, 5);\n        i0.ɵɵviewQuery(CreatePermitSummaryComponent, 5);\n        i0.ɵɵviewQuery(PermitImagesAndFilesTabComponent, 5);\n        i0.ɵɵviewQuery(GlobalFilterComponent, 5);\n        i0.ɵɵviewQuery(PermitQuickFilterComponent, 5);\n        i0.ɵɵviewQuery(DialogComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.permitList = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.permitListFilter = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.elginmapComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.createPermitDrawMapComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.createPermitFormComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.permitConditionsTabComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.createPermitSummaryComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.permitImagesAndFilesTabComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.globalFilterComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.permitQuickFilter = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.dialogComponent = _t.first);\n      }\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 67,\n    vars: 42,\n    consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-12\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"end center\", \"fxLayoutGap\", \"20px\"], [3, \"dataModel\", \"configModel\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", 1, \"col-md-12\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", \"fxLayoutGap\", \"10px\", 1, \"page-top-left\"], [1, \"page-title\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", \"fxLayoutGap\", \"10px\", 1, \"page-actions\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [1, \"page-top-right\"], [1, \"row\", \"no-gutters\", \"mt-4\"], [1, \"col-md-2\"], [1, \"col-md-10\"], [1, \"row\", 2, \"height\", \"150px\"], [3, \"dialogModel\", \"onDialogClose\"], [1, \"dialog-content-slot\"], [1, \"mat-typography\", \"permit-form\", 3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [4, \"ngSwitchDefault\"], [3, \"ngSwitch\"], [\"fxLayoutGap\", \"10px\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"end center\", 4, \"ngSwitchCase\"], [\"fxLayoutGap\", \"10px\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", 4, \"ngSwitchCase\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\", 4, \"ngSwitchCase\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"15px\", 4, \"ngSwitchCase\"], [3, \"dialogModel\"], [1, \"errormodal\", 3, \"visible\", \"modal\", \"responsive\", \"minY\", \"maximizable\", \"baseZIndex\", \"visibleChange\"], [1, \"mat-error\"], [1, \"align-middle\"], [1, \"jumbotron\", \"mb-0\"], [1, \"errorlabel\"], [1, \"btn\", \"btn-lg\", \"btn-primary\", \"errorbtn\", \"float-right\", 3, \"click\"], [1, \"py-3\"], [1, \"float-right\"], [\"mat-raised-button\", \"\", \"color\", \"warn\", 1, \"primary-button\", \"mr-2\", 3, \"click\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [3, \"dataModel\", \"configModel\", 4, \"ngIf\"], [1, \"elgin-map-slot\"], [\"id\", \"draw-map-elgin-map\", 3, \"dataModel\", \"configModel\", 4, \"ngIf\"], [\"id\", \"draw-map-elgin-map\", 3, \"dataModel\", \"configModel\"], [3, \"dataModel\", \"configModel\", \"trafficManagementPlanChkBoxChange\", \"tTROChkBoxChange\", 4, \"ngIf\"], [3, \"dataModel\", \"configModel\", \"trafficManagementPlanChkBoxChange\", \"tTROChkBoxChange\"], [1, \"elgin-map-view-slot\"], [\"id\", \"create-permit-elgin-map\", 3, \"dataModel\", \"configModel\", 4, \"ngIf\"], [\"id\", \"create-permit-elgin-map\", 3, \"dataModel\", \"configModel\"], [\"fxLayoutGap\", \"10px\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"end center\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"primary-button\", 3, \"click\"], [\"fxLayoutGap\", \"10px\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 1, \"primary-button-outline\", 3, \"click\"], [\"fxLayoutGap\", \"10px\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"dark-gray-button\", \"primary-button\", \"mb-2\", 3, \"disabled\", \"ngStyle\", \"click\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between center\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"sky-blue-button\", \"primary-button\", \"mb-2\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"primary-button\", \"mb-2\", 3, \"click\"], [\"fxLayout\", \"row\", \"fxLayoutGap\", \"10px\", \"fxLayoutAlign\", \"start center\"], [2, \"margin-right\", \"25px\"], [\"mat-raised-button\", \"\", \"appHelperTextPopover\", \"\", \"color\", \"primary\", 1, \"green-button\", \"primary-button\", \"mb-2\", 3, \"helperTextData\", \"click\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"15px\"]],\n    template: function PermitListingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelement(4, \"app-global-filter\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 2);\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"h1\");\n        i0.ɵɵtext(10, \"My Permits\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵtemplate(12, PermitListingComponent_button_12_Template, 4, 0, \"button\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelement(14, \"app-permit-quick-filter\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 11);\n        i0.ɵɵelementStart(16, \"div\", 12);\n        i0.ɵɵelement(17, \"app-permit-filter\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 13);\n        i0.ɵɵelement(19, \"app-permit-list\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"div\", 14);\n        i0.ɵɵelementStart(21, \"app-dialog\", 15);\n        i0.ɵɵlistener(\"onDialogClose\", function PermitListingComponent_Template_app_dialog_onDialogClose_21_listener($event) {\n          return ctx.onAppDialogClose($event);\n        });\n        i0.ɵɵelementContainerStart(22, 16);\n        i0.ɵɵelementStart(23, \"div\", 17);\n        i0.ɵɵtemplate(24, PermitListingComponent_div_24_Template, 2, 1, \"div\", 18);\n        i0.ɵɵtemplate(25, PermitListingComponent_div_25_Template, 2, 1, \"div\", 18);\n        i0.ɵɵtemplate(26, PermitListingComponent_div_26_Template, 2, 1, \"div\", 18);\n        i0.ɵɵtemplate(27, PermitListingComponent_div_27_Template, 2, 1, \"div\", 18);\n        i0.ɵɵtemplate(28, PermitListingComponent_div_28_Template, 2, 1, \"div\", 18);\n        i0.ɵɵtemplate(29, PermitListingComponent_div_29_Template, 2, 1, \"div\", 18);\n        i0.ɵɵtemplate(30, PermitListingComponent_div_30_Template, 2, 0, \"div\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"hr\");\n        i0.ɵɵelementStart(32, \"div\");\n        i0.ɵɵelementStart(33, \"div\", 20);\n        i0.ɵɵtemplate(34, PermitListingComponent_div_34_Template, 3, 0, \"div\", 21);\n        i0.ɵɵtemplate(35, PermitListingComponent_div_35_Template, 10, 8, \"div\", 22);\n        i0.ɵɵtemplate(36, PermitListingComponent_div_36_Template, 8, 0, \"div\", 23);\n        i0.ɵɵtemplate(37, PermitListingComponent_div_37_Template, 5, 0, \"div\", 23);\n        i0.ɵɵtemplate(38, PermitListingComponent_div_38_Template, 11, 1, \"div\", 23);\n        i0.ɵɵtemplate(39, PermitListingComponent_div_39_Template, 5, 0, \"div\", 24);\n        i0.ɵɵtemplate(40, PermitListingComponent_div_40_Template, 1, 0, \"div\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"app-dialog\", 25);\n        i0.ɵɵelementContainerStart(42, 16);\n        i0.ɵɵelement(43, \"app-file-upload\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"app-dialog\", 25);\n        i0.ɵɵelementContainerStart(45, 16);\n        i0.ɵɵelement(46, \"app-file-upload\", 4);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"p-dialog\", 26);\n        i0.ɵɵlistener(\"visibleChange\", function PermitListingComponent_Template_p_dialog_visibleChange_47_listener($event) {\n          return ctx.display = $event;\n        });\n        i0.ɵɵelementStart(48, \"p-header\", 27);\n        i0.ɵɵelementStart(49, \"mat-icon\", 28);\n        i0.ɵɵtext(50, \"error\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(51, \" Error \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"div\", 29);\n        i0.ɵɵelementStart(53, \"label\", 30);\n        i0.ɵɵtext(54);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"button\", 31);\n        i0.ɵɵlistener(\"click\", function PermitListingComponent_Template_button_click_55_listener() {\n          return ctx.display = false;\n        });\n        i0.ɵɵtext(56, \"OK\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"app-dialog\", 25);\n        i0.ɵɵelementContainerStart(58, 16);\n        i0.ɵɵelementStart(59, \"p\", 32);\n        i0.ɵɵtext(60, \"Are you sure you want to delete permit \");\n        i0.ɵɵelementStart(61, \"b\");\n        i0.ɵɵtext(62);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(63, \" ?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"div\", 33);\n        i0.ɵɵelementStart(65, \"button\", 34);\n        i0.ɵɵlistener(\"click\", function PermitListingComponent_Template_button_click_65_listener() {\n          return ctx.confirmDelete();\n        });\n        i0.ɵɵtext(66, \"Confirm\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"dataModel\", ctx.globalFilterDataModel)(\"configModel\", ctx.globalFilterConfigModel);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.hasPermitActionPermission(ctx.PERMIT_ACTIONS_CONFIG.CREATE_PERMIT));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataModel\", ctx.permitQuickFilterDataModel)(\"configModel\", ctx.permitQuickFilterConfigModel);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"dataModel\", ctx.permitFilterDataModel)(\"configModel\", ctx.permitFilterConfigModel);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataModel\", ctx.permitListDataModel)(\"configModel\", ctx.permitListConfigModel);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dialogModel\", ctx.dialogModel);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngSwitch\", ctx.createPermitStepNo);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 4);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 5);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 6);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngSwitch\", ctx.createPermitStepNo);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 3);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 4);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 5);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngSwitchCase\", 6);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dialogModel\", ctx.dialogUplaodFileModel);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataModel\", ctx.fileUploadDataModel)(\"configModel\", ctx.fileUploadConfigModel);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"dialogModel\", ctx.dialogUplaodFileModel);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"dataModel\", ctx.fileUploadDataModel)(\"configModel\", ctx.fileUploadConfigModel);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(41, _c1));\n        i0.ɵɵproperty(\"visible\", ctx.display)(\"modal\", true)(\"responsive\", true)(\"minY\", 100)(\"maximizable\", true)(\"baseZIndex\", 10000);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.errorMsg);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"dialogModel\", ctx.dialogDeleteFileModel);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" \", ctx.permit_reference_number, \"\");\n      }\n    },\n    directives: [i10.DefaultLayoutDirective, i10.DefaultLayoutAlignDirective, i10.DefaultLayoutGapDirective, i11.GlobalFilterComponent, i12.NgIf, i13.PermitQuickFilterComponent, i14.PermitFilterComponent, i15.PermitListComponent, i16.DialogComponent, i12.NgSwitch, i12.NgSwitchCase, i12.NgSwitchDefault, i17.FileUploadComponent, i18.Dialog, i19.Header, i20.MatIcon, i21.MatButton, i22.CreatePermitDrawMapComponent, i23.ElginmapComponent, i24.CreatePermitFormComponent, i25.PermitConditionsTabComponent, i26.PermitImagesAndFilesTabComponent, i27.CreatePermitSummaryComponent, i28.CreatePermitConfirmationComponent, i12.NgStyle, i29.DefaultStyleDirective, i30.HelperTextPopoverDirective],\n    styles: [\".page-top-left[_ngcontent-%COMP%]{width:220px}.page-top-right[_ngcontent-%COMP%]{width:calc(100% - 240px)}.errorlabel[_ngcontent-%COMP%]{font-size:18px;text-align:left}.errorbtn[_ngcontent-%COMP%]{min-width:100px;margin-top:20px}\"]\n  });\n  return PermitListingComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}