{"ast":null,"code":"import { EventEmitter, Component, ChangeDetectionStrategy, ViewEncapsulation, ElementRef, NgZone, ChangeDetectorRef, Input, Output, ContentChildren, ViewChild, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { ButtonModule } from 'primeng/button';\nimport { MessagesModule } from 'primeng/messages';\nimport { ProgressBarModule } from 'primeng/progressbar';\nimport { DomHandler } from 'primeng/dom';\nimport { PrimeTemplate, SharedModule } from 'primeng/api';\nimport { RippleModule } from 'primeng/ripple';\nimport { HttpEventType, HttpClient } from '@angular/common/http';\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/platform-browser';\nimport * as ɵngcc2 from '@angular/common/http';\nimport * as ɵngcc3 from '@angular/common';\nimport * as ɵngcc4 from 'primeng/ripple';\nimport * as ɵngcc5 from 'primeng/messages';\nimport * as ɵngcc6 from 'primeng/button';\nimport * as ɵngcc7 from 'primeng/progressbar';\nconst _c0 = [\"advancedfileinput\"];\nconst _c1 = [\"basicfileinput\"];\nconst _c2 = [\"content\"];\n\nfunction FileUpload_div_0_p_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"p-button\", 17);\n    ɵngcc0.ɵɵlistener(\"onClick\", function FileUpload_div_0_p_button_8_Template_p_button_onClick_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r10.upload();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"label\", ctx_r3.uploadLabel)(\"icon\", ctx_r3.uploadIcon)(\"disabled\", !ctx_r3.hasFiles() || ctx_r3.isFileLimitExceeded());\n  }\n}\n\nfunction FileUpload_div_0_p_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"p-button\", 17);\n    ɵngcc0.ɵɵlistener(\"onClick\", function FileUpload_div_0_p_button_9_Template_p_button_onClick_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r13);\n      const ctx_r12 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r12.clear();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"label\", ctx_r4.cancelLabel)(\"icon\", ctx_r4.cancelIcon)(\"disabled\", !ctx_r4.hasFiles() || ctx_r4.uploading);\n  }\n}\n\nfunction FileUpload_div_0_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nfunction FileUpload_div_0_p_progressBar_13_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"p-progressBar\", 18);\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r7.progress)(\"showValue\", false);\n  }\n}\n\nfunction FileUpload_div_0_div_15_div_1_div_1_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"img\", 25);\n  }\n\n  if (rf & 2) {\n    const file_r17 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵproperty(\"src\", file_r17.objectURL, ɵngcc0.ɵɵsanitizeUrl)(\"width\", ctx_r19.previewWidth);\n  }\n}\n\nfunction FileUpload_div_0_div_15_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 22);\n    ɵngcc0.ɵɵelementStart(1, \"div\");\n    ɵngcc0.ɵɵtemplate(2, FileUpload_div_0_div_15_div_1_div_1_img_2_Template, 1, 2, \"img\", 23);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\");\n    ɵngcc0.ɵɵtext(4);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"div\");\n    ɵngcc0.ɵɵtext(6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(7, \"div\");\n    ɵngcc0.ɵɵelementStart(8, \"button\", 24);\n    ɵngcc0.ɵɵlistener(\"click\", function FileUpload_div_0_div_15_div_1_div_1_Template_button_click_8_listener($event) {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r22);\n      const i_r18 = restoredCtx.index;\n      const ctx_r21 = ɵngcc0.ɵɵnextContext(4);\n      return ctx_r21.remove($event, i_r18);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const file_r17 = ctx.$implicit;\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r16.isImage(file_r17));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(file_r17.name);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r16.formatSize(file_r17.size));\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"disabled\", ctx_r16.uploading);\n  }\n}\n\nfunction FileUpload_div_0_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtemplate(1, FileUpload_div_0_div_15_div_1_div_1_Template, 9, 4, \"div\", 21);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r14.files);\n  }\n}\n\nfunction FileUpload_div_0_div_15_div_2_ng_template_1_Template(rf, ctx) {}\n\nfunction FileUpload_div_0_div_15_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵtemplate(1, FileUpload_div_0_div_15_div_2_ng_template_1_Template, 0, 0, \"ng-template\", 26);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r15.files)(\"ngForTemplate\", ctx_r15.fileTemplate);\n  }\n}\n\nfunction FileUpload_div_0_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 19);\n    ɵngcc0.ɵɵtemplate(1, FileUpload_div_0_div_15_div_1_Template, 2, 1, \"div\", 20);\n    ɵngcc0.ɵɵtemplate(2, FileUpload_div_0_div_15_div_2_Template, 2, 2, \"div\", 20);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r8.fileTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r8.fileTemplate);\n  }\n}\n\nfunction FileUpload_div_0_ng_container_16_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c3 = function (a0, a1) {\n  return {\n    \"p-focus\": a0,\n    \"p-disabled\": a1\n  };\n};\n\nconst _c4 = function (a0) {\n  return {\n    $implicit: a0\n  };\n};\n\nfunction FileUpload_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 3);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 4);\n    ɵngcc0.ɵɵlistener(\"focus\", function FileUpload_div_0_Template_span_focus_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r24 = ɵngcc0.ɵɵnextContext();\n      return ctx_r24.onFocus();\n    })(\"blur\", function FileUpload_div_0_Template_span_blur_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r26 = ɵngcc0.ɵɵnextContext();\n      return ctx_r26.onBlur();\n    })(\"click\", function FileUpload_div_0_Template_span_click_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r27 = ɵngcc0.ɵɵnextContext();\n      return ctx_r27.choose();\n    })(\"keydown.enter\", function FileUpload_div_0_Template_span_keydown_enter_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r28 = ɵngcc0.ɵɵnextContext();\n      return ctx_r28.choose();\n    });\n    ɵngcc0.ɵɵelementStart(3, \"input\", 5, 6);\n    ɵngcc0.ɵɵlistener(\"change\", function FileUpload_div_0_Template_input_change_3_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r29 = ɵngcc0.ɵɵnextContext();\n      return ctx_r29.onFileSelect($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelement(5, \"span\", 7);\n    ɵngcc0.ɵɵelementStart(6, \"span\", 8);\n    ɵngcc0.ɵɵtext(7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(8, FileUpload_div_0_p_button_8_Template, 1, 3, \"p-button\", 9);\n    ɵngcc0.ɵɵtemplate(9, FileUpload_div_0_p_button_9_Template, 1, 3, \"p-button\", 9);\n    ɵngcc0.ɵɵtemplate(10, FileUpload_div_0_ng_container_10_Template, 1, 0, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(11, \"div\", 11, 12);\n    ɵngcc0.ɵɵlistener(\"dragenter\", function FileUpload_div_0_Template_div_dragenter_11_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r30 = ɵngcc0.ɵɵnextContext();\n      return ctx_r30.onDragEnter($event);\n    })(\"dragleave\", function FileUpload_div_0_Template_div_dragleave_11_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r31 = ɵngcc0.ɵɵnextContext();\n      return ctx_r31.onDragLeave($event);\n    })(\"drop\", function FileUpload_div_0_Template_div_drop_11_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r25);\n      const ctx_r32 = ɵngcc0.ɵɵnextContext();\n      return ctx_r32.onDrop($event);\n    });\n    ɵngcc0.ɵɵtemplate(13, FileUpload_div_0_p_progressBar_13_Template, 1, 2, \"p-progressBar\", 13);\n    ɵngcc0.ɵɵelement(14, \"p-messages\", 14);\n    ɵngcc0.ɵɵtemplate(15, FileUpload_div_0_div_15_Template, 3, 2, \"div\", 15);\n    ɵngcc0.ɵɵtemplate(16, FileUpload_div_0_ng_container_16_Template, 1, 0, \"ng-container\", 16);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassMap(ctx_r0.styleClass);\n    ɵngcc0.ɵɵproperty(\"ngClass\", \"p-fileupload p-fileupload-advanced p-component\")(\"ngStyle\", ctx_r0.style);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction2(22, _c3, ctx_r0.focus, ctx_r0.disabled || ctx_r0.isChooseDisabled()));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"multiple\", ctx_r0.multiple)(\"accept\", ctx_r0.accept)(\"disabled\", ctx_r0.disabled || ctx_r0.isChooseDisabled());\n    ɵngcc0.ɵɵattribute(\"title\", \"\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵclassMap(ctx_r0.chooseIcon);\n    ɵngcc0.ɵɵproperty(\"ngClass\", \"p-button-icon p-button-icon-left\");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.chooseLabel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.auto && ctx_r0.showUploadButton);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.auto && ctx_r0.showCancelButton);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r0.toolbarTemplate);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.hasFiles());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r0.msgs)(\"enableService\", false);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.hasFiles());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r0.contentTemplate)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(25, _c4, ctx_r0.files));\n  }\n}\n\nfunction FileUpload_div_1_input_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"input\", 31, 32);\n    ɵngcc0.ɵɵlistener(\"change\", function FileUpload_div_1_input_6_Template_input_change_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r36);\n      const ctx_r35 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r35.onFileSelect($event);\n    })(\"focus\", function FileUpload_div_1_input_6_Template_input_focus_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r36);\n      const ctx_r37 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r37.onFocus();\n    })(\"blur\", function FileUpload_div_1_input_6_Template_input_blur_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r36);\n      const ctx_r38 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r38.onBlur();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r33 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"accept\", ctx_r33.accept)(\"multiple\", ctx_r33.multiple)(\"disabled\", ctx_r33.disabled);\n  }\n}\n\nconst _c5 = function (a1, a2, a3) {\n  return {\n    \"p-button p-component p-fileupload-choose\": true,\n    \"p-fil(eupload-choose-selected\": a1,\n    \"p-focus\": a2,\n    \"p-disabled\": a3\n  };\n};\n\nfunction FileUpload_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 27);\n    ɵngcc0.ɵɵelement(1, \"p-messages\", 14);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 28);\n    ɵngcc0.ɵɵlistener(\"mouseup\", function FileUpload_div_1_Template_span_mouseup_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r40);\n      const ctx_r39 = ɵngcc0.ɵɵnextContext();\n      return ctx_r39.onBasicUploaderClick();\n    })(\"keydown\", function FileUpload_div_1_Template_span_keydown_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r40);\n      const ctx_r41 = ɵngcc0.ɵɵnextContext();\n      return ctx_r41.onBasicUploaderClick();\n    });\n    ɵngcc0.ɵɵelement(3, \"span\", 29);\n    ɵngcc0.ɵɵelementStart(4, \"span\", 8);\n    ɵngcc0.ɵɵtext(5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(6, FileUpload_div_1_input_6_Template, 2, 3, \"input\", 30);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r1.msgs)(\"enableService\", false);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassMap(ctx_r1.styleClass);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction3(9, _c5, ctx_r1.hasFiles(), ctx_r1.focus, ctx_r1.disabled))(\"ngStyle\", ctx_r1.style);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ctx_r1.hasFiles() && !ctx_r1.auto ? ctx_r1.uploadIcon : ctx_r1.chooseIcon);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.auto ? ctx_r1.chooseLabel : ctx_r1.hasFiles() ? ctx_r1.files[0].name : ctx_r1.chooseLabel);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.hasFiles());\n  }\n}\n\nlet FileUpload = /*#__PURE__*/(() => {\n  class FileUpload {\n    constructor(el, sanitizer, zone, http, cd) {\n      this.el = el;\n      this.sanitizer = sanitizer;\n      this.zone = zone;\n      this.http = http;\n      this.cd = cd;\n      this.method = 'POST';\n      this.invalidFileSizeMessageSummary = '{0}: Invalid file size, ';\n      this.invalidFileSizeMessageDetail = 'maximum upload size is {0}.';\n      this.invalidFileTypeMessageSummary = '{0}: Invalid file type, ';\n      this.invalidFileTypeMessageDetail = 'allowed file types: {0}.';\n      this.invalidFileLimitMessageDetail = 'limit is {0} at most.';\n      this.invalidFileLimitMessageSummary = 'Maximum number of files exceeded, ';\n      this.previewWidth = 50;\n      this.chooseLabel = 'Choose';\n      this.uploadLabel = 'Upload';\n      this.cancelLabel = 'Cancel';\n      this.chooseIcon = 'pi pi-plus';\n      this.uploadIcon = 'pi pi-upload';\n      this.cancelIcon = 'pi pi-times';\n      this.showUploadButton = true;\n      this.showCancelButton = true;\n      this.mode = 'advanced';\n      this.onBeforeUpload = new EventEmitter();\n      this.onSend = new EventEmitter();\n      this.onUpload = new EventEmitter();\n      this.onError = new EventEmitter();\n      this.onClear = new EventEmitter();\n      this.onRemove = new EventEmitter();\n      this.onSelect = new EventEmitter();\n      this.onProgress = new EventEmitter();\n      this.uploadHandler = new EventEmitter();\n      this._files = [];\n      this.progress = 0;\n      this.uploadedFileCount = 0;\n    }\n\n    set files(files) {\n      this._files = [];\n\n      for (let i = 0; i < files.length; i++) {\n        let file = files[i];\n\n        if (this.validate(file)) {\n          if (this.isImage(file)) {\n            file.objectURL = this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(files[i]));\n          }\n\n          this._files.push(files[i]);\n        }\n      }\n    }\n\n    get files() {\n      return this._files;\n    }\n\n    ngAfterContentInit() {\n      this.templates.forEach(item => {\n        switch (item.getType()) {\n          case 'file':\n            this.fileTemplate = item.template;\n            break;\n\n          case 'content':\n            this.contentTemplate = item.template;\n            break;\n\n          case 'toolbar':\n            this.toolbarTemplate = item.template;\n            break;\n\n          default:\n            this.fileTemplate = item.template;\n            break;\n        }\n      });\n    }\n\n    ngAfterViewInit() {\n      if (this.mode === 'advanced') {\n        this.zone.runOutsideAngular(() => {\n          if (this.content) this.content.nativeElement.addEventListener('dragover', this.onDragOver.bind(this));\n        });\n      }\n    }\n\n    choose() {\n      this.advancedFileInput.nativeElement.click();\n    }\n\n    onFileSelect(event) {\n      if (event.type !== 'drop' && this.isIE11() && this.duplicateIEEvent) {\n        this.duplicateIEEvent = false;\n        return;\n      }\n\n      this.msgs = [];\n\n      if (!this.multiple) {\n        this.files = [];\n      }\n\n      let files = event.dataTransfer ? event.dataTransfer.files : event.target.files;\n\n      for (let i = 0; i < files.length; i++) {\n        let file = files[i];\n\n        if (!this.isFileSelected(file)) {\n          if (this.validate(file)) {\n            if (this.isImage(file)) {\n              file.objectURL = this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(files[i]));\n            }\n\n            this.files.push(files[i]);\n          }\n        }\n      }\n\n      this.onSelect.emit({\n        originalEvent: event,\n        files: files,\n        currentFiles: this.files\n      });\n\n      if (this.fileLimit && this.mode == \"advanced\") {\n        this.checkFileLimit();\n      }\n\n      if (this.hasFiles() && this.auto && (!(this.mode === \"advanced\") || !this.isFileLimitExceeded())) {\n        this.upload();\n      }\n\n      if (event.type !== 'drop' && this.isIE11()) {\n        this.clearIEInput();\n      } else {\n        this.clearInputElement();\n      }\n    }\n\n    isFileSelected(file) {\n      for (let sFile of this.files) {\n        if (sFile.name + sFile.type + sFile.size === file.name + file.type + file.size) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    isIE11() {\n      return !!window['MSInputMethodContext'] && !!document['documentMode'];\n    }\n\n    validate(file) {\n      if (this.accept && !this.isFileTypeValid(file)) {\n        this.msgs.push({\n          severity: 'error',\n          summary: this.invalidFileTypeMessageSummary.replace('{0}', file.name),\n          detail: this.invalidFileTypeMessageDetail.replace('{0}', this.accept)\n        });\n        return false;\n      }\n\n      if (this.maxFileSize && file.size > this.maxFileSize) {\n        this.msgs.push({\n          severity: 'error',\n          summary: this.invalidFileSizeMessageSummary.replace('{0}', file.name),\n          detail: this.invalidFileSizeMessageDetail.replace('{0}', this.formatSize(this.maxFileSize))\n        });\n        return false;\n      }\n\n      return true;\n    }\n\n    isFileTypeValid(file) {\n      let acceptableTypes = this.accept.split(',').map(type => type.trim());\n\n      for (let type of acceptableTypes) {\n        let acceptable = this.isWildcard(type) ? this.getTypeClass(file.type) === this.getTypeClass(type) : file.type == type || this.getFileExtension(file).toLowerCase() === type.toLowerCase();\n\n        if (acceptable) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    getTypeClass(fileType) {\n      return fileType.substring(0, fileType.indexOf('/'));\n    }\n\n    isWildcard(fileType) {\n      return fileType.indexOf('*') !== -1;\n    }\n\n    getFileExtension(file) {\n      return '.' + file.name.split('.').pop();\n    }\n\n    isImage(file) {\n      return /^image\\//.test(file.type);\n    }\n\n    onImageLoad(img) {\n      window.URL.revokeObjectURL(img.src);\n    }\n\n    upload() {\n      if (this.customUpload) {\n        if (this.fileLimit) {\n          this.uploadedFileCount += this.files.length;\n        }\n\n        this.uploadHandler.emit({\n          files: this.files\n        });\n        this.cd.markForCheck();\n      } else {\n        this.uploading = true;\n        this.msgs = [];\n        let formData = new FormData();\n        this.onBeforeUpload.emit({\n          'formData': formData\n        });\n\n        for (let i = 0; i < this.files.length; i++) {\n          formData.append(this.name, this.files[i], this.files[i].name);\n        }\n\n        this.http.post(this.url, formData, {\n          headers: this.headers,\n          reportProgress: true,\n          observe: 'events',\n          withCredentials: this.withCredentials\n        }).subscribe(event => {\n          switch (event.type) {\n            case HttpEventType.Sent:\n              this.onSend.emit({\n                originalEvent: event,\n                'formData': formData\n              });\n              break;\n\n            case HttpEventType.Response:\n              this.uploading = false;\n              this.progress = 0;\n\n              if (event['status'] >= 200 && event['status'] < 300) {\n                if (this.fileLimit) {\n                  this.uploadedFileCount += this.files.length;\n                }\n\n                this.onUpload.emit({\n                  originalEvent: event,\n                  files: this.files\n                });\n              } else {\n                this.onError.emit({\n                  files: this.files\n                });\n              }\n\n              this.clear();\n              break;\n\n            case HttpEventType.UploadProgress:\n              {\n                if (event['loaded']) {\n                  this.progress = Math.round(event['loaded'] * 100 / event['total']);\n                }\n\n                this.onProgress.emit({\n                  originalEvent: event,\n                  progress: this.progress\n                });\n                break;\n              }\n          }\n\n          this.cd.markForCheck();\n        }, error => {\n          this.uploading = false;\n          this.onError.emit({\n            files: this.files,\n            error: error\n          });\n        });\n      }\n    }\n\n    clear() {\n      this.files = [];\n      this.onClear.emit();\n      this.clearInputElement();\n      this.cd.markForCheck();\n    }\n\n    remove(event, index) {\n      this.clearInputElement();\n      this.onRemove.emit({\n        originalEvent: event,\n        file: this.files[index]\n      });\n      this.files.splice(index, 1);\n    }\n\n    isFileLimitExceeded() {\n      if (this.fileLimit && this.fileLimit <= this.files.length + this.uploadedFileCount && this.focus) {\n        this.focus = false;\n      }\n\n      return this.fileLimit && this.fileLimit < this.files.length + this.uploadedFileCount;\n    }\n\n    isChooseDisabled() {\n      return this.fileLimit && this.fileLimit <= this.files.length + this.uploadedFileCount;\n    }\n\n    checkFileLimit() {\n      if (this.isFileLimitExceeded()) {\n        this.msgs.push({\n          severity: 'error',\n          summary: this.invalidFileLimitMessageSummary.replace('{0}', this.fileLimit.toString()),\n          detail: this.invalidFileLimitMessageDetail.replace('{0}', this.fileLimit.toString())\n        });\n      }\n    }\n\n    clearInputElement() {\n      if (this.advancedFileInput && this.advancedFileInput.nativeElement) {\n        this.advancedFileInput.nativeElement.value = '';\n      }\n\n      if (this.basicFileInput && this.basicFileInput.nativeElement) {\n        this.basicFileInput.nativeElement.value = '';\n      }\n    }\n\n    clearIEInput() {\n      if (this.advancedFileInput && this.advancedFileInput.nativeElement) {\n        this.duplicateIEEvent = true; //IE11 fix to prevent onFileChange trigger again\n\n        this.advancedFileInput.nativeElement.value = '';\n      }\n    }\n\n    hasFiles() {\n      return this.files && this.files.length > 0;\n    }\n\n    onDragEnter(e) {\n      if (!this.disabled) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n\n    onDragOver(e) {\n      if (!this.disabled) {\n        DomHandler.addClass(this.content.nativeElement, 'p-fileupload-highlight');\n        this.dragHighlight = true;\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    }\n\n    onDragLeave(event) {\n      if (!this.disabled) {\n        DomHandler.removeClass(this.content.nativeElement, 'p-fileupload-highlight');\n      }\n    }\n\n    onDrop(event) {\n      if (!this.disabled) {\n        DomHandler.removeClass(this.content.nativeElement, 'p-fileupload-highlight');\n        event.stopPropagation();\n        event.preventDefault();\n        let files = event.dataTransfer ? event.dataTransfer.files : event.target.files;\n        let allowDrop = this.multiple || files && files.length === 1;\n\n        if (allowDrop) {\n          this.onFileSelect(event);\n        }\n      }\n    }\n\n    onFocus() {\n      this.focus = true;\n    }\n\n    onBlur() {\n      this.focus = false;\n    }\n\n    formatSize(bytes) {\n      if (bytes == 0) {\n        return '0 B';\n      }\n\n      let k = 1024,\n          dm = 3,\n          sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],\n          i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n    }\n\n    onBasicUploaderClick() {\n      if (this.hasFiles()) this.upload();else this.basicFileInput.nativeElement.click();\n    }\n\n    getBlockableElement() {\n      return this.el.nativeElement.children[0];\n    }\n\n    ngOnDestroy() {\n      if (this.content && this.content.nativeElement) {\n        this.content.nativeElement.removeEventListener('dragover', this.onDragOver);\n      }\n    }\n\n  }\n\n  FileUpload.ɵfac = function FileUpload_Factory(t) {\n    return new (t || FileUpload)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc2.HttpClient), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  FileUpload.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: FileUpload,\n    selectors: [[\"p-fileUpload\"]],\n    contentQueries: function FileUpload_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, PrimeTemplate, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.templates = _t);\n      }\n    },\n    viewQuery: function FileUpload_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 5);\n        ɵngcc0.ɵɵviewQuery(_c1, 5);\n        ɵngcc0.ɵɵviewQuery(_c2, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.advancedFileInput = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.basicFileInput = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.content = _t.first);\n      }\n    },\n    inputs: {\n      method: \"method\",\n      invalidFileSizeMessageSummary: \"invalidFileSizeMessageSummary\",\n      invalidFileSizeMessageDetail: \"invalidFileSizeMessageDetail\",\n      invalidFileTypeMessageSummary: \"invalidFileTypeMessageSummary\",\n      invalidFileTypeMessageDetail: \"invalidFileTypeMessageDetail\",\n      invalidFileLimitMessageDetail: \"invalidFileLimitMessageDetail\",\n      invalidFileLimitMessageSummary: \"invalidFileLimitMessageSummary\",\n      previewWidth: \"previewWidth\",\n      chooseLabel: \"chooseLabel\",\n      uploadLabel: \"uploadLabel\",\n      cancelLabel: \"cancelLabel\",\n      chooseIcon: \"chooseIcon\",\n      uploadIcon: \"uploadIcon\",\n      cancelIcon: \"cancelIcon\",\n      showUploadButton: \"showUploadButton\",\n      showCancelButton: \"showCancelButton\",\n      mode: \"mode\",\n      files: \"files\",\n      name: \"name\",\n      url: \"url\",\n      multiple: \"multiple\",\n      accept: \"accept\",\n      disabled: \"disabled\",\n      auto: \"auto\",\n      withCredentials: \"withCredentials\",\n      maxFileSize: \"maxFileSize\",\n      style: \"style\",\n      styleClass: \"styleClass\",\n      headers: \"headers\",\n      customUpload: \"customUpload\",\n      fileLimit: \"fileLimit\"\n    },\n    outputs: {\n      onBeforeUpload: \"onBeforeUpload\",\n      onSend: \"onSend\",\n      onUpload: \"onUpload\",\n      onError: \"onError\",\n      onClear: \"onClear\",\n      onRemove: \"onRemove\",\n      onSelect: \"onSelect\",\n      onProgress: \"onProgress\",\n      uploadHandler: \"uploadHandler\"\n    },\n    decls: 2,\n    vars: 2,\n    consts: [[3, \"ngClass\", \"ngStyle\", \"class\", 4, \"ngIf\"], [\"class\", \"p-fileupload p-fileupload-basic p-component\", 4, \"ngIf\"], [3, \"ngClass\", \"ngStyle\"], [1, \"p-fileupload-buttonbar\"], [\"pRipple\", \"\", \"tabindex\", \"0\", 1, \"p-button\", \"p-component\", \"p-fileupload-choose\", 3, \"ngClass\", \"focus\", \"blur\", \"click\", \"keydown.enter\"], [\"type\", \"file\", 3, \"multiple\", \"accept\", \"disabled\", \"change\"], [\"advancedfileinput\", \"\"], [3, \"ngClass\"], [1, \"p-button-label\"], [\"type\", \"button\", 3, \"label\", \"icon\", \"disabled\", \"onClick\", 4, \"ngIf\"], [4, \"ngTemplateOutlet\"], [1, \"p-fileupload-content\", 3, \"dragenter\", \"dragleave\", \"drop\"], [\"content\", \"\"], [3, \"value\", \"showValue\", 4, \"ngIf\"], [3, \"value\", \"enableService\"], [\"class\", \"p-fileupload-files\", 4, \"ngIf\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"type\", \"button\", 3, \"label\", \"icon\", \"disabled\", \"onClick\"], [3, \"value\", \"showValue\"], [1, \"p-fileupload-files\"], [4, \"ngIf\"], [\"class\", \"p-fileupload-row\", 4, \"ngFor\", \"ngForOf\"], [1, \"p-fileupload-row\"], [3, \"src\", \"width\", 4, \"ngIf\"], [\"type\", \"button\", \"icon\", \"pi pi-times\", \"pButton\", \"\", 3, \"disabled\", \"click\"], [3, \"src\", \"width\"], [\"ngFor\", \"\", 3, \"ngForOf\", \"ngForTemplate\"], [1, \"p-fileupload\", \"p-fileupload-basic\", \"p-component\"], [\"tabindex\", \"0\", \"pRipple\", \"\", 3, \"ngClass\", \"ngStyle\", \"mouseup\", \"keydown\"], [1, \"p-button-icon\", \"p-button-icon-left\", \"pi\", 3, \"ngClass\"], [\"type\", \"file\", 3, \"accept\", \"multiple\", \"disabled\", \"change\", \"focus\", \"blur\", 4, \"ngIf\"], [\"type\", \"file\", 3, \"accept\", \"multiple\", \"disabled\", \"change\", \"focus\", \"blur\"], [\"basicfileinput\", \"\"]],\n    template: function FileUpload_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, FileUpload_div_0_Template, 17, 27, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, FileUpload_div_1_Template, 7, 13, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.mode === \"advanced\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.mode === \"basic\");\n      }\n    },\n    directives: [ɵngcc3.NgIf, ɵngcc3.NgClass, ɵngcc3.NgStyle, ɵngcc4.Ripple, ɵngcc3.NgTemplateOutlet, ɵngcc5.Messages, ɵngcc6.Button, ɵngcc7.ProgressBar, ɵngcc3.NgForOf, ɵngcc6.ButtonDirective],\n    styles: [\".p-fileupload-content{position:relative}.p-fileupload-row{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex}.p-fileupload-row>div{-ms-flex:1 1 auto;flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{left:0;position:absolute;top:0;width:100%}.p-button.p-fileupload-choose{overflow:hidden;position:relative}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}\"],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return FileUpload;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet FileUploadModule = /*#__PURE__*/(() => {\n  class FileUploadModule {}\n\n  FileUploadModule.ɵfac = function FileUploadModule_Factory(t) {\n    return new (t || FileUploadModule)();\n  };\n\n  FileUploadModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: FileUploadModule\n  });\n  FileUploadModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, SharedModule, ButtonModule, ProgressBarModule, MessagesModule, RippleModule], SharedModule, ButtonModule, ProgressBarModule, MessagesModule]\n  });\n  return FileUploadModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(FileUploadModule, {\n    declarations: function () {\n      return [FileUpload];\n    },\n    imports: function () {\n      return [CommonModule, SharedModule, ButtonModule, ProgressBarModule, MessagesModule, RippleModule];\n    },\n    exports: function () {\n      return [FileUpload, SharedModule, ButtonModule, ProgressBarModule, MessagesModule];\n    }\n  });\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { FileUpload, FileUploadModule }; //# sourceMappingURL=primeng-fileupload.js.map","map":null,"metadata":{},"sourceType":"module"}